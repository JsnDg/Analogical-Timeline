{"ast":null,"code":"var _jsxFileName = \"/Users/jasonding/Desktop/Hypo-Eval/src/components/TreePlotVisualization.jsx\",\n  _s3 = $RefreshSig$();\n// ============== 段落1：导入依赖 ==============\nimport React, { useState, useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport data_summary from './data_summary.json'; // 确保有 data_summary.json\n\n// ============== 段落2：定义 TreePlotVisualization 组件 ==============\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TreePlotVisualization = () => {\n  _s3();\n  var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  // ============== 段落2.1：定义所有 state 变量 ==============\n  const [showTree, setShowTree] = useState(true); // true: Exploration View, false: Evaluation View\n  const [nodes, setNodes] = useState([]);\n  const [links, setLinks] = useState([]);\n  const [hoveredNode, setHoveredNode] = useState(null);\n  const [selectedNode, setSelectedNode] = useState(null);\n  const [userInput, setUserInput] = useState('');\n  const [analysisIntent, setAnalysisIntent] = useState('');\n  const [isAnalysisSubmitted, setIsAnalysisSubmitted] = useState(false);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [isEvaluating, setIsEvaluating] = useState(false);\n  const [error, setError] = useState(null);\n  const svgRef = useRef(null);\n  const [hypothesesList, setHypothesesList] = useState([]);\n  // **新增**: 用于存放“拖拽后生成的 ghostNode + 悬浮确认按钮信息”\n  const [pendingChange, setPendingChange] = useState(null);\n\n  // X/Y 轴指标（仅在 Evaluation View 用）\n  const [xAxisMetric, setXAxisMetric] = useState('feasibilityScore');\n  const [yAxisMetric, setYAxisMetric] = useState('noveltyScore');\n\n  // ID 计数器\n  const idCounterRef = useRef(0);\n  const generateUniqueId = () => {\n    idCounterRef.current += 1;\n    return `node-${idCounterRef.current}`;\n  };\n\n  // 配色映射\n  const colorMap = {\n    root: '#4C84FF',\n    simple: '#45B649',\n    complex: '#FF6B6B'\n  };\n\n  // ============== 段落3：评估假设（evaluateHypotheses） ==============\n  const evaluateHypotheses = async hypotheses => {\n    setIsEvaluating(true);\n    setError(null);\n    try {\n      const prompt = `For the following hypotheses, rank **each one individually** based on novelty, feasibility, and impact.\n      Novelty is judged by whether the hypotheses challenges traditional assumptions, propose innovative approaches, or explore under-researched areas will score higher in novelty. Less novel hypotheses include those that replicate well-known findings or extend existing studies with minimal new insights.\n      Feasibility is judged by whether the hypothesis can be represented by the dataset described in the data summary.\n      Impact assesses how the hypotheses addresses critical or emerging issues, influence policy or decision-making, or provide insights into major societal, economic, or scientific challenges. Hypotheses with lower impact are narrower in scope or contribute incremental knowledge without broader implications.\n      For each hypothesis, provide its rank (1 being the highest) in terms of novelty, feasibility, and impact.\n      Also, provide the ranking reasons for each hypothesis.\n      **Ensure that you include all hypotheses in your evaluation and do not combine or omit any.**\n      **No two hypotheses should have the same rank in any category. Assign unique ranks to each hypothesis in each category to avoid overlaps.**\n      Return the results in JSON format as an array of objects with the following fields:\n      - id\n      - novelty_rank\n      - novelty_rank_reason\n      - feasibility_rank\n      - feasibility_rank_reason\n      - impact_rank\n      - impact_rank_reason\n\nHere are the hypotheses:\n${JSON.stringify(hypotheses)}\n\nData summary: ${JSON.stringify(data_summary)}\n\nPlease provide only the JSON array in your response.`;\n      const apiKey = process.env.REACT_APP_OPENAI_API_KEY;\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-4o',\n          messages: [{\n            role: 'system',\n            content: 'You are a data scientist.'\n          }, {\n            role: 'user',\n            content: prompt\n          }],\n          max_tokens: 2000\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error.message);\n      }\n      const data = await response.json();\n      const assistantReply = data.choices[0].message.content.trim();\n      let evaluatedHypotheses;\n      try {\n        const jsonMatch = assistantReply.match(/\\[.*\\]/s);\n        if (jsonMatch) {\n          evaluatedHypotheses = JSON.parse(jsonMatch[0]);\n        } else {\n          evaluatedHypotheses = JSON.parse(assistantReply);\n        }\n      } catch (parseError) {\n        throw new Error(\"Failed to parse evaluated hypotheses JSON from the assistant's reply.\");\n      }\n      if (evaluatedHypotheses.length !== hypotheses.length) {\n        throw new Error(`Mismatch in number of evaluated hypotheses. Expected ${hypotheses.length}, but got ${evaluatedHypotheses.length}.`);\n      }\n\n      // rank -> score\n      const rankToScore = (rank, total) => {\n        const maxScore = 90;\n        const minScore = 10;\n        const scoreRange = maxScore - minScore;\n        // 分数从高到低\n        const score = maxScore - (rank - 1) * scoreRange / (total - 1);\n        return Math.round(score);\n      };\n      setNodes(prevNodes => prevNodes.map(node => {\n        const evalHypo = evaluatedHypotheses.find(h => h.id === node.id);\n        if (evalHypo) {\n          const totalHypotheses = hypotheses.length;\n          const noveltyScore = rankToScore(evalHypo.novelty_rank, totalHypotheses);\n          const feasibilityScore = rankToScore(evalHypo.feasibility_rank, totalHypotheses);\n          const impactScore = rankToScore(evalHypo.impact_rank, totalHypotheses);\n          return {\n            ...node,\n            noveltyScore,\n            feasibilityScore,\n            impactScore,\n            rankingReason: evalHypo.ranking_reason\n          };\n        }\n        return node;\n      }));\n    } catch (err) {\n      console.error('Error evaluating hypotheses:', err);\n      setError(err.message);\n    } finally {\n      setIsEvaluating(false);\n    }\n  };\n\n  // ============== 段落4：分析意图提交处理 (handleAnalysisIntentSubmit) ==============\n  const handleAnalysisIntentSubmit = async e => {\n    e.preventDefault();\n    if (!analysisIntent.trim()) return;\n    setIsGenerating(true);\n    setError(null);\n    try {\n      const prompt = `Based on the following analysis intent and data, generate exactly three initial hypotheses. For each hypothesis, provide a two-word title and a detailed content. Return the hypotheses in JSON format as an array of objects with \"title\" and \"content\" fields.\n\nAnalysis Intent: ${analysisIntent}\n\nData: ${JSON.stringify(data_summary)}\n\nPlease provide only the JSON array in your response.`;\n      const apiKey = process.env.REACT_APP_OPENAI_API_KEY;\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-4o',\n          messages: [{\n            role: 'system',\n            content: 'You are a data scientist.'\n          }, {\n            role: 'user',\n            content: prompt\n          }],\n          max_tokens: 500\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error.message);\n      }\n      const data = await response.json();\n      const assistantReply = data.choices[0].message.content.trim();\n      let hypothesesArray;\n      try {\n        const jsonMatch = assistantReply.match(/\\[.*\\]/s);\n        if (jsonMatch) {\n          hypothesesArray = JSON.parse(jsonMatch[0]);\n        } else {\n          hypothesesArray = JSON.parse(assistantReply);\n        }\n      } catch (parseError) {\n        throw new Error(\"Failed to parse hypotheses JSON from the assistant's reply.\");\n      }\n      const hypotheses = hypothesesArray.slice(0, 3);\n      const hypothesesWithId = hypotheses.map(hyp => {\n        const id = generateUniqueId();\n        return {\n          id,\n          ...hyp\n        };\n      });\n      const updatedHypothesesList = [...hypothesesList, ...hypothesesWithId];\n      setHypothesesList(updatedHypothesesList);\n\n      // Root node\n      const rootNode = {\n        id: 'root',\n        level: 0,\n        title: analysisIntent,\n        content: analysisIntent,\n        type: 'root',\n        x: 0,\n        y: 0\n      };\n\n      // Child nodes\n      const childSpacing = 200;\n      const totalWidth = (hypotheses.length - 1) * childSpacing;\n      const startX = rootNode.x - totalWidth / 2;\n      const childNodes = hypothesesWithId.map((hyp, i) => ({\n        id: hyp.id,\n        level: 1,\n        title: hyp.title.trim(),\n        content: hyp.content.trim(),\n        type: 'complex',\n        x: startX + i * childSpacing,\n        y: rootNode.y + 150\n      }));\n      const newNodes = [rootNode, ...childNodes];\n      const newLinks = childNodes.map(nd => ({\n        source: rootNode.id,\n        target: nd.id\n      }));\n      setNodes(newNodes);\n      setLinks(newLinks);\n      setAnalysisIntent('');\n      setIsAnalysisSubmitted(true);\n\n      // 评估\n      await evaluateHypotheses(updatedHypothesesList);\n      setIsGenerating(false);\n    } catch (err) {\n      console.error('Error generating initial hypotheses:', err);\n      setError(err.message);\n      setIsGenerating(false);\n    }\n  };\n\n  // ============== 段落5：生成子节点 (generateChildNodes) ==============\n  const generateChildNodes = async () => {\n    if (!selectedNode) return;\n    setIsGenerating(true);\n    setError(null);\n    try {\n      const prompt = `Based on the following node content and data, generate exactly three new hypotheses. For each hypothesis, provide a two-word title and a detailed content. Return the hypotheses in JSON format as an array of objects with \"title\" and \"content\" fields.\n\nNode Content: ${selectedNode.content}\n\nData: ${JSON.stringify(data_summary)}\n\nAdditional Context: ${userInput}\n\nPlease provide only the JSON array in your response.`;\n      const apiKey = process.env.REACT_APP_OPENAI_API_KEY;\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-4o',\n          messages: [{\n            role: 'system',\n            content: 'You are a data scientist.'\n          }, {\n            role: 'user',\n            content: prompt\n          }],\n          max_tokens: 500\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error.message);\n      }\n      const data = await response.json();\n      const assistantReply = data.choices[0].message.content.trim();\n      let hypothesesArray;\n      try {\n        const jsonMatch = assistantReply.match(/\\[.*\\]/s);\n        if (jsonMatch) {\n          hypothesesArray = JSON.parse(jsonMatch[0]);\n        } else {\n          hypothesesArray = JSON.parse(assistantReply);\n        }\n      } catch (parseError) {\n        throw new Error(\"Failed to parse hypotheses JSON from the assistant's reply.\");\n      }\n      const hypotheses = hypothesesArray.slice(0, 3);\n      const newHypothesesWithId = hypotheses.map(hyp => {\n        const id = generateUniqueId();\n        return {\n          id,\n          ...hyp\n        };\n      });\n      const updatedHypothesesList = [...hypothesesList, ...newHypothesesWithId];\n      setHypothesesList(updatedHypothesesList);\n\n      // 布局\n      const childSpacing = 200;\n      const totalWidth = (hypotheses.length - 1) * childSpacing;\n      const startX = selectedNode.x - totalWidth / 2;\n      const newNodes = newHypothesesWithId.map((hyp, i) => ({\n        id: hyp.id,\n        level: selectedNode.level + 1,\n        title: hyp.title.trim(),\n        content: hyp.content.trim(),\n        type: 'complex',\n        x: startX + i * childSpacing + Math.random() * 20 - 10,\n        y: selectedNode.y + 150 + Math.random() * 20 - 10\n      }));\n      const newLinks = newNodes.map(nd => ({\n        source: selectedNode.id,\n        target: nd.id\n      }));\n      setNodes(prev => [...prev, ...newNodes]);\n      setLinks(prev => [...prev, ...newLinks]);\n\n      // 评估\n      await evaluateHypotheses(updatedHypothesesList);\n      setIsGenerating(false);\n      setUserInput('');\n    } catch (err) {\n      console.error('Error generating hypotheses:', err);\n      setError(err.message);\n      setIsGenerating(false);\n    }\n  };\n\n  // ============== 段落6：根据拖拽修改假设 (modifyHypothesisBasedOnModifications) ==============\n  // ============== 段落6：修改开始 ==============\n  const modifyHypothesisBasedOnModifications = async (originalNode, ghostNode, modifications, behindNode) => {\n    setError(null);\n    try {\n      setIsGenerating(true);\n\n      // 根据每个指标和对应的 increase/decrease，拼接更灵活的描述\n      let instructionLines = [];\n      // 如果 behindNode 存在，就用它的 content，否则给个说明\n      const behindNodeContent = behindNode ? behindNode.content : '(No behind node found)';\n\n      // 遍历 modifications，分别处理 Novelty / Feasibility / Impact\n      modifications.forEach(mod => {\n        const metricName = mod.metric === 'noveltyScore' ? 'Novelty' : mod.metric === 'feasibilityScore' ? 'Feasibility' : 'Impact';\n        const direction = mod.direction === 'increase' ? 'increasing' : 'decreasing';\n\n        // 拼出一句形如：\n        // \"by decreasing its Feasibility to be less feasible than this hypothesis:\n        //  [behindNodeContent]\"\n        // 或\n        // \"by increasing its Novelty to be more novel than this hypothesis:\n        //  [behindNodeContent]\"\n        const line = `by ${direction} its ${metricName} to be ${direction === 'increasing' ? 'more' : 'less'} ${metricName.toLowerCase()} than this hypothesis:\\n${behindNodeContent}`;\n        instructionLines.push(line);\n      });\n\n      // instructionLines 的多条指令用换行 + \"And \"串接\n      const instructionsText = instructionLines.map((line, idx) => {\n        if (idx === 0) return `Modify this hypothesis ${line}`;\n        return `And ${line}`;\n      }).join('\\n\\n');\n\n      // 最终组合 prompt\n      const prompt = `\n  ${instructionsText}\n\n  Keep its main idea intact, but focus on adjusting the degree of novelty, feasibility, and/or impact as requested.\n\n  Original hypothesis:\n  ${originalNode.content}\n\n  Dataset summary: ${JSON.stringify(data_summary)}\n\n  Please provide only the modified hypothesis content in your response.\n      `.trim();\n      console.log('修改假设的 prompt:', prompt);\n      const apiKey = process.env.REACT_APP_OPENAI_API_KEY;\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-4o',\n          messages: [{\n            role: 'system',\n            content: 'You are a data scientist.'\n          }, {\n            role: 'user',\n            content: prompt\n          }],\n          max_tokens: 500\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error.message);\n      }\n      const data = await response.json();\n      const assistantReply = data.choices[0].message.content.trim();\n      ghostNode.content = assistantReply;\n      ghostNode.isModified = true;\n      ghostNode.previousState = originalNode;\n      ghostNode.isGhost = false;\n      const newHypothesis = {\n        id: ghostNode.id,\n        title: ghostNode.title,\n        content: assistantReply\n      };\n      setHypothesesList(prevList => [...prevList, newHypothesis]);\n      setNodes(prevNodes => prevNodes.map(n => n.id === ghostNode.id ? ghostNode : n));\n      setIsGenerating(false);\n      setIsEvaluating(true);\n      await evaluateHypotheses([...hypothesesList, newHypothesis]);\n    } catch (err) {\n      console.error('Error modifying hypothesis:', err);\n      setError(err.message);\n      setIsGenerating(false);\n    } finally {\n      setIsEvaluating(false);\n    }\n  };\n  // ============== 段落6：修改结束 ==============\n\n  // ============== 段落7：节点点击/悬浮/离开事件处理 ==============\n  const handleNodeClick = node => {\n    setSelectedNode(prev => (prev === null || prev === void 0 ? void 0 : prev.id) === node.id ? null : node);\n  };\n  const handleNodeHover = (event, d) => {\n    setHoveredNode(d);\n    d3.select(event.currentTarget).raise();\n  };\n  const handleNodeLeave = () => {\n    setHoveredNode(null);\n  };\n\n  // ============== 段落8：D3 渲染逻辑 useEffect ==============\n  useEffect(() => {\n    if (!svgRef.current) return;\n    const width = 800;\n    const height = 600;\n\n    // 清空 SVG\n    d3.select(svgRef.current).selectAll('*').remove();\n    if (showTree) {\n      // ------------------- Exploration (Tree) View --------------------\n      const svg = d3.select(svgRef.current).attr('width', width).attr('height', height);\n\n      // 卡片背景\n      svg.append('rect').attr('x', 2).attr('y', 2).attr('width', width - 4).attr('height', height - 4).attr('rx', 8).attr('ry', 8).style('fill', '#fff').style('stroke', '#e5e7eb').style('stroke-width', 1).style('filter', 'drop-shadow(0 4px 6px rgba(0,0,0,0.1))');\n\n      // 顶部显示 Root Hypothesis (举例)\n      svg.append('text').attr('x', 24).attr('y', 50).style('font-size', '2rem').style('font-weight', 600).style('fill', '#2563EB').text('Income Inequality');\n\n      // 在卡片内部绘制树\n      const g = svg.append('g').attr('transform', `translate(300, 130)`);\n\n      // 连线\n      links.forEach(link => {\n        const source = nodes.find(n => n.id === link.source);\n        const target = nodes.find(n => n.id === link.target);\n        if (source && target) {\n          g.append('path').attr('d', `M ${source.x},${source.y} C ${source.x},${(source.y + target.y) / 2} \n               ${target.x},${(source.y + target.y) / 2} \n               ${target.x},${target.y}`).style('fill', 'none').style('stroke', '#ccc').style('stroke-width', 2);\n        }\n      });\n\n      // 节点\n      const nodeGroups = g.selectAll('.node').data(nodes).enter().append('g').attr('class', 'node').attr('transform', d => `translate(${d.x},${d.y})`);\n      nodeGroups.append('text').attr('dy', 35).attr('text-anchor', 'middle').text(d => d.title).attr('pointer-events', 'none');\n      nodeGroups.append('circle').attr('r', 25).style('fill', d => d.isNewlyGenerated ? '#FFD700' : colorMap[d.type]).style('opacity', d => d.isGhost ? 0.5 : 1).style('stroke', d => {\n        if ((selectedNode === null || selectedNode === void 0 ? void 0 : selectedNode.id) === d.id) return '#000';else if ((hoveredNode === null || hoveredNode === void 0 ? void 0 : hoveredNode.id) === d.id) return '#555';else return '#fff';\n      }).style('stroke-width', d => {\n        if ((selectedNode === null || selectedNode === void 0 ? void 0 : selectedNode.id) === d.id) return 4;else if ((hoveredNode === null || hoveredNode === void 0 ? void 0 : hoveredNode.id) === d.id) return 3;else return 2;\n      }).style('cursor', 'pointer').on('mouseenter', handleNodeHover).on('mouseleave', handleNodeLeave).on('click', (event, d) => handleNodeClick(d));\n\n      // 在卡片底部放三个颜色标识 (蓝/红/黄)\n      const legendG = svg.append('g').attr('transform', `translate(40, ${height - 40})`);\n\n      // Initial Hypothesis (蓝)\n      legendG.append('circle').attr('cx', 0).attr('cy', 0).attr('r', 6).style('fill', '#4C84FF');\n      legendG.append('text').attr('x', 14).attr('y', 4).style('font-size', '0.875rem').style('fill', '#374151').text('Initial Hypothesis');\n\n      // Hypothesis1 (红)\n      legendG.append('circle').attr('cx', 140).attr('cy', 0).attr('r', 6).style('fill', '#FF6B6B');\n      legendG.append('text').attr('x', 154).attr('y', 4).style('font-size', '0.875rem').style('fill', '#374151').text('Hypothesis1');\n\n      // Hypothesis2 (黄)\n      legendG.append('circle').attr('cx', 270).attr('cy', 0).attr('r', 6).style('fill', '#FFD700');\n      legendG.append('text').attr('x', 284).attr('y', 4).style('font-size', '0.875rem').style('fill', '#374151').text('Hypothesis2');\n    } else {\n      // ------------------- Evaluation (Scatter) View --------------------\n      const svg = d3.select(svgRef.current).attr('width', width).attr('height', height);\n\n      // 背景卡片\n      svg.append('rect').attr('x', 2).attr('y', 2).attr('width', width - 4).attr('height', height - 4).attr('rx', 8).attr('ry', 8).style('fill', '#fff').style('stroke', '#e5e7eb').style('stroke-width', 1).style('filter', 'drop-shadow(0 4px 6px rgba(0,0,0,0.1))');\n\n      // 顶部示例文字\n      svg.append('text').attr('x', 24).attr('y', 40).style('font-size', '1rem').style('font-weight', 500).style('fill', '#111827').text('Income Inequality');\n      svg.append('text').attr('x', 24).attr('y', 70).style('font-size', '1.5rem').style('font-weight', 1000).style('fill', '#1D4ED8').text('Gender Disparity');\n\n      // 右上角 X/Y 下拉框\n      const axisFO = svg.append('foreignObject').attr('x', width - 210).attr('y', 20).attr('width', 200).attr('height', 60);\n      axisFO.append('xhtml:div').style('display', 'flex').style('flexDirection', 'column').style('gap', '6px').style('fontSize', '0.875rem').html(`\n        <label style=\"color: #374151;\">X-Axis:\n          <select id=\"xSelect\" \n            style=\"margin-left: 6px; padding: 4px; border: 1px solid #d1d5db; border-radius: 4px; background-color: #f9fafb; color: #374151;\">\n            <option value=\"noveltyScore\">Novelty</option>\n            <option value=\"feasibilityScore\">Feasibility</option>\n            <option value=\"impactScore\">Impact</option>\n          </select>\n        </label>\n        <label style=\"color: #374151;\">Y-Axis:\n          <select id=\"ySelect\"\n            style=\"margin-left: 6px; padding: 4px; border: 1px solid #d1d5db; border-radius: 4px; background-color: #f9fafb; color: #374151;\">\n            <option value=\"noveltyScore\">Novelty</option>\n            <option value=\"feasibilityScore\">Feasibility</option>\n            <option value=\"impactScore\">Impact</option>\n          </select>\n        </label>\n      `);\n      const xSelectElem = document.getElementById('xSelect');\n      const ySelectElem = document.getElementById('ySelect');\n      if (xSelectElem) xSelectElem.value = xAxisMetric;\n      if (ySelectElem) ySelectElem.value = yAxisMetric;\n      if (xSelectElem) {\n        xSelectElem.onchange = e => setXAxisMetric(e.target.value);\n      }\n      if (ySelectElem) {\n        ySelectElem.onchange = e => setYAxisMetric(e.target.value);\n      }\n      const margin = {\n        top: 100,\n        right: 50,\n        bottom: 80,\n        left: 50\n      };\n      const chartWidth = width - margin.left - margin.right;\n      const chartHeight = height - margin.top - margin.bottom;\n      const g = svg.append('g').attr('transform', `translate(${margin.left}, ${margin.top})`);\n      const xScale = d3.scaleLinear().domain([0, 100]).range([0, chartWidth]);\n      const yScale = d3.scaleLinear().domain([0, 100]).range([chartHeight, 0]);\n      const xAxis = d3.axisBottom(xScale).tickValues(d3.range(0, 101, 20)).tickFormat(d3.format('d'));\n      const yAxis = d3.axisLeft(yScale).tickValues(d3.range(0, 101, 20)).tickFormat(d3.format('d'));\n\n      // grid\n      const xGrid = d3.axisBottom(xScale).tickValues(d3.range(0, 101, 20)).tickSize(-chartHeight).tickFormat('');\n      const yGrid = d3.axisLeft(yScale).tickValues(d3.range(0, 101, 20)).tickSize(-chartWidth).tickFormat('');\n      const xGridG = g.append('g').attr('class', 'x-grid').attr('transform', `translate(0, ${chartHeight})`).call(xGrid);\n      xGridG.selectAll('.domain').remove();\n      xGridG.selectAll('.tick line').style('stroke', '#F1F1F1'); // 表格线颜色\n\n      const yGridG = g.append('g').attr('class', 'y-grid').call(yGrid);\n      yGridG.selectAll('.domain').remove();\n      yGridG.selectAll('.tick line').style('stroke', '#F1F1F1'); // 表格线颜色\n\n      g.append('g').attr('transform', `translate(0, ${chartHeight})`).call(xAxis);\n      g.append('g').call(yAxis);\n\n      // === 在 x 轴下方 和 y 轴左方 动态添加标签（随下拉框变动） ===\n      g.append('text').attr('x', chartWidth / 2).attr('y', chartHeight + 40).style('text-anchor', 'middle').style('fill', '#374151').style('font-size', '0.875rem').text(xAxisMetric === 'noveltyScore' ? 'Novelty' : xAxisMetric === 'feasibilityScore' ? 'Feasibility' : 'Impact');\n      g.append('text').attr('transform', 'rotate(-90)').attr('x', -chartHeight / 2).attr('y', -40).style('text-anchor', 'middle').style('fill', '#374151').style('font-size', '0.875rem').text(yAxisMetric === 'noveltyScore' ? 'Novelty' : yAxisMetric === 'feasibilityScore' ? 'Feasibility' : 'Impact');\n\n      // ① 在 Evaluation View 卡片底部，补充红色 before / 黄色 after\n      const legendEval = svg.append('g').attr('transform', `translate(${margin.left}, ${height - 30})`);\n\n      // 红圆 => Before\n      legendEval.append('circle').attr('cx', 0).attr('cy', 0).attr('r', 5).style('fill', '#FF6B6B');\n      legendEval.append('text').attr('x', 10).attr('y', 4).style('fontSize', '0.875rem').style('fill', '#374151').text('Before');\n\n      // 黄圆 => After\n      legendEval.append('circle').attr('cx', 80).attr('cy', 0).attr('r', 5).style('fill', '#FFC300');\n      legendEval.append('text').attr('x', 90).attr('y', 4).style('fontSize', '0.875rem').style('fill', '#374151').text('After');\n\n      // 仅显示已有分数的节点\n      const filteredNodes = nodes.filter(d => d[xAxisMetric] !== undefined && d[yAxisMetric] !== undefined);\n\n      // 只显示被修改后的连线\n      const evaluationLinks = links.filter(link => {\n        const sourceNode = nodes.find(n => n.id === link.source);\n        const targetNode = nodes.find(n => n.id === link.target);\n        return sourceNode && targetNode && targetNode.isModified;\n      });\n      evaluationLinks.forEach(link => {\n        const source = nodes.find(n => n.id === link.source);\n        const target = nodes.find(n => n.id === link.target);\n        if (source && target) {\n          g.append('line').attr('x1', xScale(source[xAxisMetric])).attr('y1', yScale(source[yAxisMetric])).attr('x2', xScale(target[xAxisMetric])).attr('y2', yScale(target[yAxisMetric])).style('stroke', '#ccc').style('stroke-width', 1);\n        }\n      });\n\n      // ============ 核心拖拽逻辑在这里 ============\n      const nodeGroups = g.selectAll('.node-group').data(filteredNodes).enter().append('g').attr('class', 'node-group').attr('transform', d => `translate(${xScale(d[xAxisMetric])}, ${yScale(d[yAxisMetric])})`).style('cursor', 'pointer').on('mouseenter', handleNodeHover).on('mouseleave', handleNodeLeave).on('click', (event, d) => handleNodeClick(d)).call(d3.drag().on('start', function (event, d) {\n        if (isGenerating || isEvaluating) return;\n        d3.select(this).raise();\n      }).on('drag', function (event, d) {\n        if (isGenerating || isEvaluating) return;\n        const [xx, yy] = d3.pointer(event, g.node());\n        // 实时更新节点位置（UI展示）\n        d3.select(this).attr('transform', `translate(${xx}, ${yy})`);\n\n        // 可以在拖拽时记录一下当前坐标\n        d._lastX = xx;\n        d._lastY = yy;\n      }).on('end', function (event, d) {\n        if (isGenerating || isEvaluating) return;\n        let finalX = typeof d._lastX === 'number' ? d._lastX : d3.pointer(event, g.node())[0];\n        let finalY = typeof d._lastY === 'number' ? d._lastY : d3.pointer(event, g.node())[1];\n        const newXMetricValue = xScale.invert(finalX);\n        const newYMetricValue = yScale.invert(finalY);\n        const oldXMetricValue = d[xAxisMetric];\n        const oldYMetricValue = d[yAxisMetric];\n        const deltaX = newXMetricValue - oldXMetricValue;\n        const deltaY = newYMetricValue - oldYMetricValue;\n        console.log('拖拽结束 => 节点内容:', d.title || d.id);\n        console.log('旧坐标 => X:', oldXMetricValue, 'Y:', oldYMetricValue);\n        console.log('新坐标 => X:', newXMetricValue, 'Y:', newYMetricValue);\n        console.log('比较过程 => ΔX:', deltaX, 'ΔY:', deltaY);\n        console.log('所有节点最新位置 (按当前 X/Y Axis Metric):');\n        nodes.forEach(n => {\n          console.log(`- ${n.title || n.id}: (${n[xAxisMetric]}, ${n[yAxisMetric]})`);\n        });\n\n        // 清空临时属性，防止下次拖拽混淆\n        delete d._lastX;\n        delete d._lastY;\n        let modifications = [];\n        let behindNodeCandidate = null;\n\n        // ================== X 轴处理 ==================\n        if (Math.abs(deltaX) > 5) {\n          modifications.push({\n            metric: xAxisMetric,\n            direction: deltaX > 0 ? 'increase' : 'decrease'\n          });\n          const smallerCandidates = nodes.filter(node => node[xAxisMetric] !== undefined && node.id !== d.id && node[xAxisMetric] < newXMetricValue).sort((a, b) => b[xAxisMetric] - a[xAxisMetric]);\n          if (smallerCandidates[0]) {\n            behindNodeCandidate = smallerCandidates[0];\n            console.log('选取的“behindNodeCandidate”（X 轴）:', behindNodeCandidate.title || behindNodeCandidate.content || behindNodeCandidate.id);\n          }\n        }\n\n        // ================== Y 轴处理 ==================\n        if (Math.abs(deltaY) > 5) {\n          modifications.push({\n            metric: yAxisMetric,\n            direction: deltaY > 0 ? 'increase' : 'decrease'\n          });\n          const smallerY = nodes.filter(node => node[yAxisMetric] !== undefined && node.id !== d.id && node[yAxisMetric] < newYMetricValue).sort((a, b) => b[yAxisMetric] - a[yAxisMetric]);\n          if (smallerY[0]) {\n            behindNodeCandidate = smallerY[0] || behindNodeCandidate;\n            console.log('选取的“behindNodeCandidate”（Y 轴）:', behindNodeCandidate.title || behindNodeCandidate.content || behindNodeCandidate.id);\n          }\n        }\n\n        // 将节点 UI 位置复原回旧坐标 (防止 UI 停留在拖拽处)\n        d3.select(this).attr('transform', `translate(${xScale(d[xAxisMetric])}, ${yScale(d[yAxisMetric])})`);\n\n        // 如果有任意轴超过阈值 => 生成 ghostNode + 存到 pendingChange\n        if (modifications.length > 0) {\n          const ghostNodeId = generateUniqueId();\n          const ghostNode = {\n            ...d,\n            id: ghostNodeId,\n            x: d.x,\n            y: d.y,\n            [xAxisMetric]: newXMetricValue,\n            [yAxisMetric]: newYMetricValue,\n            isGhost: true,\n            isNewlyGenerated: true\n          };\n          setNodes(prev => [...prev, ghostNode]);\n          setLinks(prev => [...prev, {\n            source: d.id,\n            target: ghostNodeId\n          }]);\n          setPendingChange({\n            originalNode: d,\n            ghostNode,\n            modifications,\n            behindNode: behindNodeCandidate,\n            screenX: event.sourceEvent.clientX + 10,\n            screenY: event.sourceEvent.clientY + 10\n          });\n        }\n      }));\n      nodeGroups.append('circle').attr('r', 8).style('fill', d => d.isNewlyGenerated ? '#FFD700' : colorMap[d.type]).style('opacity', d => d.isGhost ? 0.5 : 1).style('stroke', d => {\n        if ((selectedNode === null || selectedNode === void 0 ? void 0 : selectedNode.id) === d.id) return '#000';else if ((hoveredNode === null || hoveredNode === void 0 ? void 0 : hoveredNode.id) === d.id) return '#555';else return '#fff';\n      }).style('stroke-width', d => {\n        if ((selectedNode === null || selectedNode === void 0 ? void 0 : selectedNode.id) === d.id) return 4;else if ((hoveredNode === null || hoveredNode === void 0 ? void 0 : hoveredNode.id) === d.id) return 3;else return 2;\n      });\n    }\n  }, [showTree, nodes, links, selectedNode, hoveredNode, xAxisMetric, yAxisMetric, isGenerating, isEvaluating]);\n\n  // ============== 段落9：Dashboard 相关逻辑 ==============\n  const TopNav = () => {\n    // exploration icon\n    const explorationIcon = /*#__PURE__*/_jsxDEV(\"svg\", {\n      width: \"20\",\n      height: \"20\",\n      viewBox: \"0 0 20 20\",\n      fill: \"none\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      style: {\n        marginRight: '8px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"g\", {\n        clipPath: \"url(#clip0_119_560)\",\n        children: [/*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M8.52543 15.8306C12.2418 15.8306 15.2546 12.8179 15.2546 9.10148C15.2546 5.38508 12.2418 2.37231 8.52543 2.37231C4.80903 2.37231 1.79626 5.38508 1.79626 9.10148C1.79626 12.8179 4.80903 15.8306 8.52543 15.8306Z\",\n          stroke: \"#A2A2A2\",\n          strokeWidth: \"2\",\n          strokeLinejoin: \"round\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 999,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M10.7646 6.46654C10.1915 5.89349 9.39988 5.53906 8.5254 5.53906C7.65097 5.53906 6.8593 5.89349 6.28625 6.46654\",\n          stroke: \"#A2A2A2\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1005,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M13.3632 13.9392L16.7219 17.298\",\n          stroke: \"#A2A2A2\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1012,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 998,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"defs\", {\n        children: /*#__PURE__*/_jsxDEV(\"clipPath\", {\n          id: \"clip0_119_560\",\n          children: /*#__PURE__*/_jsxDEV(\"rect\", {\n            width: \"19\",\n            height: \"19\",\n            fill: \"white\",\n            transform: \"translate(0.212891 0.789062)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1022,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1021,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1020,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 990,\n      columnNumber: 5\n    }, this);\n\n    // evaluation icon\n    const evaluationIcon = /*#__PURE__*/_jsxDEV(\"svg\", {\n      width: \"20\",\n      height: \"20\",\n      viewBox: \"0 0 20 20\",\n      fill: \"none\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      style: {\n        marginRight: '8px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"g\", {\n        children: [/*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M2.47949 2.46533V16.7153H16.7295\",\n          stroke: \"#141414\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1039,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          fillRule: \"evenodd\",\n          clipRule: \"evenodd\",\n          d: \"M8.02114 9.59025C8.89557 9.59025 9.60447 8.88135 9.60447 8.00692C9.60447 7.13248 8.89557 6.42358 8.02114 6.42358C7.1467 6.42358 6.43781 7.13248 6.43781 8.00692C6.43781 8.88135 7.1467 9.59025 8.02114 9.59025Z\",\n          fill: \"#141414\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1046,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          fillRule: \"evenodd\",\n          clipRule: \"evenodd\",\n          d: \"M14.7503 6.42367C15.8434 6.42367 16.7295 5.53755 16.7295 4.4445C16.7295 3.35144 15.8434 2.46533 14.7503 2.46533C13.6573 2.46533 12.7712 3.35144 12.7712 4.4445C12.7712 5.53755 13.6573 6.42367 14.7503 6.42367Z\",\n          fill: \"#141414\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1052,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          fillRule: \"evenodd\",\n          clipRule: \"evenodd\",\n          d: \"M6.04199 14.3403C6.69785 14.3403 7.22949 13.8087 7.22949 13.1528C7.22949 12.497 6.69785 11.9653 6.04199 11.9653C5.38614 11.9653 4.85449 12.497 4.85449 13.1528C4.85449 13.8087 5.38614 14.3403 6.04199 14.3403Z\",\n          fill: \"#141414\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1058,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          fillRule: \"evenodd\",\n          clipRule: \"evenodd\",\n          d: \"M13.167 12.7571C13.8228 12.7571 14.3545 12.2254 14.3545 11.5696C14.3545 10.9137 13.8228 10.3821 13.167 10.3821C12.5111 10.3821 11.9795 10.9137 11.9795 11.5696C11.9795 12.2254 12.5111 12.7571 13.167 12.7571Z\",\n          fill: \"#141414\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1064,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1038,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1030,\n      columnNumber: 5\n    }, this);\n    const tabStyle = {\n      display: 'flex',\n      alignItems: 'center',\n      padding: '10px 16px',\n      cursor: 'pointer',\n      borderRadius: '9999px',\n      transition: 'all 0.2s ease',\n      fontSize: '0.875rem',\n      fontWeight: 500\n    };\n    const explorationActiveStyle = showTree ? {\n      backgroundColor: '#fff',\n      color: '#141414'\n    } : {\n      backgroundColor: 'transparent',\n      color: '#A0AEC0'\n    };\n    const evaluationActiveStyle = !showTree ? {\n      backgroundColor: '#fff',\n      color: '#141414'\n    } : {\n      backgroundColor: 'transparent',\n      color: '#A0AEC0'\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        backgroundColor: '#0F172A',\n        padding: '10px 20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...tabStyle,\n          ...explorationActiveStyle,\n          marginRight: '6px'\n        },\n        onClick: () => setShowTree(true),\n        children: [explorationIcon, \"Exploration View\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1103,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...tabStyle,\n          ...evaluationActiveStyle\n        },\n        onClick: () => setShowTree(false),\n        children: [evaluationIcon, \"Evaluation View\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1109,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1094,\n      columnNumber: 5\n    }, this);\n  };\n  const Dashboard = ({\n    node,\n    isEvaluating,\n    showTree\n  }) => {\n    if (!node) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '24px',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          height: '160px',\n          color: '#9ca3af'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Click on a node to view details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1130,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1120,\n        columnNumber: 7\n      }, this);\n    }\n    return (\n      /*#__PURE__*/\n      // 整个 dashboard\n      _jsxDEV(\"div\", {\n        style: {\n          border: '1px solid #E5E7EB',\n          borderRadius: '8px',\n          backgroundColor: '#FFFFFF',\n          padding: '16px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            fontSize: '1.25rem',\n            fontWeight: '700',\n            marginBottom: '1rem',\n            color: '#111827'\n          },\n          children: node.title || 'Hypothesis Title'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1146,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '100%',\n            height: '100%',\n            position: 'relative',\n            marginBottom: '16px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: 64.3,\n              height: 20.65,\n              left: 0,\n              top: 0,\n              position: 'absolute',\n              background: '#F9E3E2',\n              borderRadius: 57\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1159,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              left: 9.15,\n              top: 3.83,\n              position: 'absolute',\n              color: '#A21919',\n              fontSize: 11,\n              fontFamily: 'Inter',\n              fontWeight: '400',\n              wordWrap: 'break-word'\n            },\n            children: \"Complex\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1170,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1158,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(IVDVCard, {\n          node: node\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1187,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(ThreeFactorsCard, {\n          node: node\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1190,\n          columnNumber: 7\n        }, this), showTree ?\n        /*#__PURE__*/\n        // Exploration View 下方替换成：Add context + Generate\n        _jsxDEV(ContextAndGenerateCard, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1194,\n          columnNumber: 9\n        }, this) :\n        /*#__PURE__*/\n        // Evaluation View 显示得分对比，但在评估时先隐藏，评估结束后再显示\n        _jsxDEV(ScoreComparison, {\n          node: node,\n          isEvaluating: isEvaluating\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1197,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1137,\n        columnNumber: 5\n      }, this)\n    );\n  };\n\n  // ============== 段落10：IVDVCard、ThreeFactorsCard、ContextAndGenerateCard、ScoreComparison 等子组件 ==============\n  const IVDVCard = ({\n    node\n  }) => {\n    _s();\n    const [isAfterIVDV, setIsAfterIVDV] = useState(true);\n\n    // after/before switch\n    const SwitchButton = () => /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => setIsAfterIVDV(prev => !prev),\n      style: {\n        position: 'absolute',\n        top: '12px',\n        right: '12px',\n        cursor: 'pointer'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '100%',\n          height: '100%',\n          background: '#EEEEEE',\n          borderRadius: 62,\n          overflow: 'hidden',\n          justifyContent: 'flex-start',\n          alignItems: 'center',\n          display: 'inline-flex'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: 42,\n            height: 17,\n            background: isAfterIVDV ? '#2E2E2E' : '#EEEEEE',\n            borderRadius: 62,\n            overflow: 'hidden',\n            justifyContent: 'center',\n            alignItems: 'center',\n            display: 'flex',\n            transition: 'all 0.2s ease'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: isAfterIVDV ? '#EEEEEE' : '#2E2E2E',\n              fontSize: 10,\n              fontFamily: 'Inter',\n              fontWeight: 500,\n              wordWrap: 'break-word'\n            },\n            children: \"After\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1244,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1231,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: 40,\n            height: 20,\n            background: isAfterIVDV ? '#EEEEEE' : '#2E2E2E',\n            borderRadius: 62,\n            overflow: 'hidden',\n            justifyContent: 'center',\n            alignItems: 'center',\n            display: 'flex',\n            transition: 'all 0.2s ease'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: isAfterIVDV ? '#2E2E2E' : '#EEEEEE',\n              fontSize: 10,\n              fontFamily: 'Inter',\n              fontWeight: 500,\n              wordWrap: 'break-word'\n            },\n            children: \"Before\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1269,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1256,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1219,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1210,\n      columnNumber: 5\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'relative',\n        border: '1px solid #e5e7eb',\n        borderRadius: '8px',\n        backgroundColor: '#FAFAFA',\n        padding: '16px',\n        marginBottom: '16px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(SwitchButton, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1296,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '8px',\n          marginBottom: '12px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            backgroundColor: '#ECFDF5',\n            color: '#065F46',\n            padding: '6px 8px',\n            borderRadius: '4px',\n            fontSize: '0.875rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"IV:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1309,\n            columnNumber: 11\n          }, this), \" Gender, Race\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1300,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            backgroundColor: '#F0F9FF',\n            color: '#1E3A8A',\n            padding: '6px 8px',\n            borderRadius: '4px',\n            fontSize: '0.875rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"DV:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1320,\n            columnNumber: 11\n          }, this), \" Income\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1311,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1299,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: '#F9FAFB',\n          padding: '12px',\n          borderRadius: '6px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '0.875rem',\n            fontWeight: '500',\n            color: '#6b7280',\n            marginBottom: '4px'\n          },\n          children: [\"Relationship / Hypothesis (\", isAfterIVDV ? 'After' : 'Before', \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1332,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '4px',\n            color: '#374151',\n            fontSize: '0.875rem',\n            lineHeight: '1.5',\n            whiteSpace: 'pre-wrap'\n          },\n          children: node.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1342,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1325,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1286,\n      columnNumber: 5\n    }, this);\n  };\n  _s(IVDVCard, \"esM7by/InCUKxTVLf0KFNh9wBUo=\");\n  const ThreeFactorsCard = ({\n    node\n  }) => {\n    _s2();\n    const [isAfterFactors, setIsAfterFactors] = useState(true);\n    const SwitchButton = () => /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => setIsAfterFactors(prev => !prev),\n      style: {\n        position: 'absolute',\n        top: '12px',\n        right: '12px',\n        width: '82px',\n        height: '20px',\n        background: '#EEEEEE',\n        borderRadius: 62,\n        overflow: 'hidden',\n        display: 'flex',\n        cursor: 'pointer'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: 42,\n          height: 17,\n          background: isAfterFactors ? '#2E2E2E' : '#EEEEEE',\n          borderRadius: 62,\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          transition: 'all 0.2s ease'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: isAfterFactors ? '#EEEEEE' : '#2E2E2E',\n            fontSize: 10,\n            fontWeight: 500\n          },\n          children: \"After\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1390,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1378,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: 40,\n          height: 20,\n          background: isAfterFactors ? '#EEEEEE' : '#2E2E2E',\n          borderRadius: 62,\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          transition: 'all 0.2s ease'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: isAfterFactors ? '#2E2E2E' : '#EEEEEE',\n            fontSize: 10,\n            fontWeight: 500\n          },\n          children: \"Before\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1414,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1402,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1362,\n      columnNumber: 5\n    }, this);\n    const noveltyText = node.noveltyText || 'Exploring the gender income dynamics within different racial groups.';\n    const feasibilityText = node.feasibilityText || 'Considering the influence of age, education, and race on income...';\n    const impactText = node.impactText || 'This hypothesis can be evaluated by comparing the average income...';\n    const renderCardItem = (color, title, text) => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        marginBottom: '16px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginRight: '12px',\n          marginTop: '4px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '12px',\n            height: '12px',\n            borderRadius: '50%',\n            backgroundColor: color\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1436,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1435,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color,\n            fontSize: '1rem',\n            fontWeight: '600',\n            marginBottom: '4px'\n          },\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1446,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: '#111827',\n            fontSize: '1rem',\n            lineHeight: '1.4'\n          },\n          children: text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1456,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1445,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1434,\n      columnNumber: 5\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'relative',\n        border: '1px solid #e5e7eb',\n        borderRadius: '8px',\n        backgroundColor: '#FAFAFA',\n        padding: '16px',\n        marginBottom: '16px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(SwitchButton, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1480,\n        columnNumber: 7\n      }, this), renderCardItem('#FB7185', 'Novelty', noveltyText + ` (${isAfterFactors ? 'After' : 'Before'})`), renderCardItem('#FBBF24', 'Feasibility', feasibilityText + ` (${isAfterFactors ? 'After' : 'Before'})`), renderCardItem('#3B82F6', 'Impact', impactText + ` (${isAfterFactors ? 'After' : 'Before'})`)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1470,\n      columnNumber: 5\n    }, this);\n  };\n  _s2(ThreeFactorsCard, \"yAt/Ws9TJgw5tkFkv+J4K4Eat20=\");\n  const ContextAndGenerateCard = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        border: '1px solid #e5e7eb',\n        borderRadius: '8px',\n        backgroundColor: '#FAFAFA',\n        padding: '16px',\n        marginBottom: '16px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '8px',\n          fontSize: '0.875rem',\n          color: '#6b7280'\n        },\n        children: \"Add context for new hypotheses (option)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1501,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        rows: 2,\n        value: userInput,\n        onChange: e => setUserInput(e.target.value),\n        style: {\n          width: '100%',\n          fontSize: '0.875rem',\n          padding: '8px',\n          border: '1px solid #d1d5db',\n          borderRadius: '4px',\n          resize: 'none',\n          marginBottom: '10px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1504,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: generateChildNodes,\n        disabled: !selectedNode || isGenerating || isEvaluating || !isAnalysisSubmitted,\n        style: {\n          padding: '8px 16px',\n          backgroundColor: '#4C84FF',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          fontSize: '0.875rem',\n          cursor: !selectedNode || isGenerating || isEvaluating || !isAnalysisSubmitted ? 'not-allowed' : 'pointer',\n          opacity: !selectedNode || isGenerating || isEvaluating || !isAnalysisSubmitted ? 0.6 : 1\n        },\n        children: \"Generate New Hypotheses\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1519,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1492,\n      columnNumber: 5\n    }, this);\n  };\n  const ScoreComparison = ({\n    node,\n    isEvaluating\n  }) => {\n    var _node$previousState$n, _node$noveltyScore, _node$previousState$f, _node$feasibilityScor, _node$previousState$i, _node$impactScore, _node$rankingReason;\n    // 如果当前正在评估，则先不显示分数\n    if (isEvaluating) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '16px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '0.875rem',\n            color: '#6b7280'\n          },\n          children: \"Scores will be displayed once evaluation is complete.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1544,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1543,\n        columnNumber: 7\n      }, this);\n    }\n    if (!node) return null;\n    const hasBefore = !!node.previousState;\n    const noveltyBefore = hasBefore ? (_node$previousState$n = node.previousState.noveltyScore) !== null && _node$previousState$n !== void 0 ? _node$previousState$n : 'N/A' : null;\n    const noveltyAfter = (_node$noveltyScore = node.noveltyScore) !== null && _node$noveltyScore !== void 0 ? _node$noveltyScore : 'N/A';\n    const feasibilityBefore = hasBefore ? (_node$previousState$f = node.previousState.feasibilityScore) !== null && _node$previousState$f !== void 0 ? _node$previousState$f : 'N/A' : null;\n    const feasibilityAfter = (_node$feasibilityScor = node.feasibilityScore) !== null && _node$feasibilityScor !== void 0 ? _node$feasibilityScor : 'N/A';\n    const impactBefore = hasBefore ? (_node$previousState$i = node.previousState.impactScore) !== null && _node$previousState$i !== void 0 ? _node$previousState$i : 'N/A' : null;\n    const impactAfter = (_node$impactScore = node.impactScore) !== null && _node$impactScore !== void 0 ? _node$impactScore : 'N/A';\n\n    // 在最下方补充 Score Reason\n    const reason = (_node$rankingReason = node.rankingReason) !== null && _node$rankingReason !== void 0 ? _node$rankingReason : '(No reason provided)';\n    const getArrowDiv = (beforeVal, afterVal) => {\n      const b = parseFloat(beforeVal);\n      const a = parseFloat(afterVal);\n      if (isNaN(b) || isNaN(a)) return null;\n      if (a > b) {\n        // green arrow\n        return /*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"17\",\n          height: \"17\",\n          viewBox: \"0 0 17 17\",\n          fill: \"none\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          style: {\n            margin: '0 6px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"g\", {\n            children: [/*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M7.01221 4.32837L13.0122 4.32837L13.0122 10.3284\",\n              stroke: \"#37A219\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1579,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M4.52682 12.8137L13.0121 4.32845\",\n              stroke: \"#37A219\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1586,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1578,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1570,\n          columnNumber: 9\n        }, this);\n      } else if (a < b) {\n        // red arrow\n        return /*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"17\",\n          height: \"17\",\n          viewBox: \"0 0 17 17\",\n          fill: \"none\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          style: {\n            margin: '0 6px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"g\", {\n            children: [/*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M12.9168 7.19702V13.197H6.91684\",\n              stroke: \"#A21919\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1608,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M4.43146 4.71167L12.9167 13.1969\",\n              stroke: \"#A21919\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1615,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1607,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1599,\n          columnNumber: 9\n        }, this);\n      } else {\n        // 分数相同 -> 横线 icon\n        return /*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"16\",\n          height: \"17\",\n          viewBox: \"0 0 16 17\",\n          fill: \"none\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          style: {\n            margin: '0 6px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"g\", {\n            id: \"Frame\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              id: \"Vector\",\n              d: \"M2.97964 8.17383L13.0204 8.17383\",\n              stroke: \"#A2A2A2\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1637,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1636,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1628,\n          columnNumber: 9\n        }, this);\n      }\n    };\n    const renderMetricCard = (label, color, beforeVal, afterVal) => {\n      const showScore = hasBefore ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          fontSize: '1rem',\n          color: '#374151'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: beforeVal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1654,\n          columnNumber: 9\n        }, this), getArrowDiv(beforeVal, afterVal), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: afterVal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1656,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1653,\n        columnNumber: 7\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '1rem',\n          color: '#374151'\n        },\n        children: [\"Score: \", afterVal]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1659,\n        columnNumber: 7\n      }, this);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: '#F9FAFB',\n          border: '1px solid #E5E7EB',\n          borderRadius: '8px',\n          padding: '16px',\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          gap: '6px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '1rem',\n            fontWeight: '600',\n            color\n          },\n          children: label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1676,\n          columnNumber: 9\n        }, this), showScore, /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '0.875rem',\n            color: '#6b7280',\n            textAlign: 'center',\n            marginTop: '4px',\n            lineHeight: '1.3'\n          },\n          children: reason\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1680,\n          columnNumber: 9\n        }, this)]\n      }, label, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1663,\n        columnNumber: 7\n      }, this);\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gridTemplateColumns: '1fr 1fr 1fr',\n        gap: '16px',\n        marginTop: '16px'\n      },\n      children: [renderMetricCard('Novelty', '#DC2626', noveltyBefore, noveltyAfter), renderMetricCard('Feasibility', '#D97706', feasibilityBefore, feasibilityAfter), renderMetricCard('Impact', '#2563EB', impactBefore, impactAfter)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1696,\n      columnNumber: 5\n    }, this);\n  };\n\n  // ============== 段落11：整体布局，渲染主界面 JSX ==============\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      fontFamily: 'Arial, sans-serif',\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/_jsxDEV(TopNav, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1715,\n      columnNumber: 7\n    }, this), showTree && !isAnalysisSubmitted && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: '#1f2937',\n        display: 'flex',\n        alignItems: 'center',\n        padding: '10px 20px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleAnalysisIntentSubmit,\n        style: {\n          display: 'flex',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: analysisIntent,\n          onChange: e => setAnalysisIntent(e.target.value),\n          placeholder: \"Enter analysis intent\",\n          style: {\n            padding: '6px 10px',\n            borderRadius: '4px',\n            border: '1px solid #d1d5db',\n            marginRight: '8px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1720,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: isGenerating || isEvaluating,\n          style: {\n            padding: '6px 12px',\n            backgroundColor: '#4C84FF',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: isGenerating || isEvaluating ? 'not-allowed' : 'pointer',\n            opacity: isGenerating || isEvaluating ? 0.7 : 1\n          },\n          children: isEvaluating ? 'Evaluating...' : isGenerating ? 'Generating...' : 'Submit'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1727,\n          columnNumber: 13\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginLeft: '16px',\n            color: '#dc2626',\n            fontSize: '0.875rem'\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1742,\n          columnNumber: 23\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1719,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1718,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        padding: '20px',\n        maxWidth: '1600px',\n        margin: '0 auto',\n        boxSizing: 'border-box'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flexBasis: '60%',\n          marginRight: '20px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          ref: svgRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1750,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1749,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flexBasis: '40%'\n        },\n        children: [(isGenerating || isEvaluating) && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            marginBottom: '10px',\n            color: '#4C84FF'\n          },\n          children: isGenerating ? 'Generating...' : 'Evaluating...'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1756,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Dashboard, {\n          node: nodes.find(n => n.id === ((hoveredNode === null || hoveredNode === void 0 ? void 0 : hoveredNode.id) || (selectedNode === null || selectedNode === void 0 ? void 0 : selectedNode.id)))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1760,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1754,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1747,\n      columnNumber: 7\n    }, this), pendingChange && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        left: pendingChange.screenX,\n        top: pendingChange.screenY,\n        backgroundColor: '#f3f4f6',\n        border: '1px solid #d1d5db',\n        borderRadius: '4px',\n        padding: '6px 8px',\n        zIndex: 999\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '4px',\n          fontSize: '0.875rem',\n          color: '#374151'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Confirm change?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1779,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1778,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          padding: '4px 8px',\n          backgroundColor: '#4C84FF',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          marginRight: '8px',\n          cursor: 'pointer'\n        },\n        onClick: () => {\n          // 真正发起修改\n          modifyHypothesisBasedOnModifications(pendingChange.originalNode, pendingChange.ghostNode, pendingChange.modifications, pendingChange.behindNode // 传入 behindNode\n          );\n          // 清空 pendingChange\n          setPendingChange(null);\n        },\n        children: \"Confirm\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1781,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          padding: '4px 8px',\n          backgroundColor: '#fff',\n          color: '#374151',\n          border: '1px solid #d1d5db',\n          borderRadius: '4px',\n          cursor: 'pointer'\n        },\n        onClick: () => {\n          // 用户取消 => 把 ghostNode 移除\n          setNodes(prev => prev.filter(nd => nd.id !== pendingChange.ghostNode.id));\n          setLinks(prev => prev.filter(lk => lk.target !== pendingChange.ghostNode.id));\n          setPendingChange(null);\n        },\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1806,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1766,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1714,\n    columnNumber: 5\n  }, this);\n};\n\n// ============== 段落13：默认导出 ==============\n_s3(TreePlotVisualization, \"2tgv4+tX99jC+lHQIYZak0P05kc=\");\n_c = TreePlotVisualization;\nexport default TreePlotVisualization;\nvar _c;\n$RefreshReg$(_c, \"TreePlotVisualization\");","map":{"version":3,"names":["React","useState","useEffect","useRef","d3","data_summary","jsxDEV","_jsxDEV","TreePlotVisualization","_s3","_s","$RefreshSig$","_s2","showTree","setShowTree","nodes","setNodes","links","setLinks","hoveredNode","setHoveredNode","selectedNode","setSelectedNode","userInput","setUserInput","analysisIntent","setAnalysisIntent","isAnalysisSubmitted","setIsAnalysisSubmitted","isGenerating","setIsGenerating","isEvaluating","setIsEvaluating","error","setError","svgRef","hypothesesList","setHypothesesList","pendingChange","setPendingChange","xAxisMetric","setXAxisMetric","yAxisMetric","setYAxisMetric","idCounterRef","generateUniqueId","current","colorMap","root","simple","complex","evaluateHypotheses","hypotheses","prompt","JSON","stringify","apiKey","process","env","REACT_APP_OPENAI_API_KEY","response","fetch","method","headers","Authorization","body","model","messages","role","content","max_tokens","ok","errorData","json","Error","message","data","assistantReply","choices","trim","evaluatedHypotheses","jsonMatch","match","parse","parseError","length","rankToScore","rank","total","maxScore","minScore","scoreRange","score","Math","round","prevNodes","map","node","evalHypo","find","h","id","totalHypotheses","noveltyScore","novelty_rank","feasibilityScore","feasibility_rank","impactScore","impact_rank","rankingReason","ranking_reason","err","console","handleAnalysisIntentSubmit","e","preventDefault","hypothesesArray","slice","hypothesesWithId","hyp","updatedHypothesesList","rootNode","level","title","type","x","y","childSpacing","totalWidth","startX","childNodes","i","newNodes","newLinks","nd","source","target","generateChildNodes","newHypothesesWithId","random","prev","modifyHypothesisBasedOnModifications","originalNode","ghostNode","modifications","behindNode","instructionLines","behindNodeContent","forEach","mod","metricName","metric","direction","line","toLowerCase","push","instructionsText","idx","join","log","isModified","previousState","isGhost","newHypothesis","prevList","n","handleNodeClick","handleNodeHover","event","d","select","currentTarget","raise","handleNodeLeave","width","height","selectAll","remove","svg","attr","append","style","text","g","link","nodeGroups","enter","isNewlyGenerated","on","legendG","axisFO","html","xSelectElem","document","getElementById","ySelectElem","value","onchange","margin","top","right","bottom","left","chartWidth","chartHeight","xScale","scaleLinear","domain","range","yScale","xAxis","axisBottom","tickValues","tickFormat","format","yAxis","axisLeft","xGrid","tickSize","yGrid","xGridG","call","yGridG","legendEval","filteredNodes","filter","undefined","evaluationLinks","sourceNode","targetNode","drag","xx","yy","pointer","_lastX","_lastY","finalX","finalY","newXMetricValue","invert","newYMetricValue","oldXMetricValue","oldYMetricValue","deltaX","deltaY","behindNodeCandidate","abs","smallerCandidates","sort","a","b","smallerY","ghostNodeId","screenX","sourceEvent","clientX","screenY","clientY","TopNav","explorationIcon","viewBox","fill","xmlns","marginRight","children","clipPath","stroke","strokeWidth","strokeLinejoin","fileName","_jsxFileName","lineNumber","columnNumber","strokeLinecap","transform","evaluationIcon","fillRule","clipRule","tabStyle","display","alignItems","padding","cursor","borderRadius","transition","fontSize","fontWeight","explorationActiveStyle","backgroundColor","color","evaluationActiveStyle","onClick","Dashboard","justifyContent","border","marginBottom","position","background","fontFamily","wordWrap","IVDVCard","ThreeFactorsCard","ContextAndGenerateCard","ScoreComparison","isAfterIVDV","setIsAfterIVDV","SwitchButton","overflow","gap","marginTop","lineHeight","whiteSpace","isAfterFactors","setIsAfterFactors","noveltyText","feasibilityText","impactText","renderCardItem","rows","onChange","resize","disabled","opacity","_node$previousState$n","_node$noveltyScore","_node$previousState$f","_node$feasibilityScor","_node$previousState$i","_node$impactScore","_node$rankingReason","hasBefore","noveltyBefore","noveltyAfter","feasibilityBefore","feasibilityAfter","impactBefore","impactAfter","reason","getArrowDiv","beforeVal","afterVal","parseFloat","isNaN","renderMetricCard","label","showScore","flexDirection","textAlign","gridTemplateColumns","onSubmit","placeholder","marginLeft","maxWidth","boxSizing","flexBasis","ref","zIndex","lk","_c","$RefreshReg$"],"sources":["/Users/jasonding/Desktop/Hypo-Eval/src/components/TreePlotVisualization.jsx"],"sourcesContent":["// ============== 段落1：导入依赖 ==============\nimport React, { useState, useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport data_summary from './data_summary.json'; // 确保有 data_summary.json\n\n// ============== 段落2：定义 TreePlotVisualization 组件 ==============\nconst TreePlotVisualization = () => {\n  // ============== 段落2.1：定义所有 state 变量 ==============\n  const [showTree, setShowTree] = useState(true); // true: Exploration View, false: Evaluation View\n  const [nodes, setNodes] = useState([]);\n  const [links, setLinks] = useState([]);\n  const [hoveredNode, setHoveredNode] = useState(null);\n  const [selectedNode, setSelectedNode] = useState(null);\n  const [userInput, setUserInput] = useState('');\n  const [analysisIntent, setAnalysisIntent] = useState('');\n  const [isAnalysisSubmitted, setIsAnalysisSubmitted] = useState(false);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [isEvaluating, setIsEvaluating] = useState(false);\n  const [error, setError] = useState(null);\n  const svgRef = useRef(null);\n  const [hypothesesList, setHypothesesList] = useState([]);\n  // **新增**: 用于存放“拖拽后生成的 ghostNode + 悬浮确认按钮信息”\n  const [pendingChange, setPendingChange] = useState(null);\n\n  // X/Y 轴指标（仅在 Evaluation View 用）\n  const [xAxisMetric, setXAxisMetric] = useState('feasibilityScore');\n  const [yAxisMetric, setYAxisMetric] = useState('noveltyScore');\n\n  // ID 计数器\n  const idCounterRef = useRef(0);\n  const generateUniqueId = () => {\n    idCounterRef.current += 1;\n    return `node-${idCounterRef.current}`;\n  };\n\n  // 配色映射\n  const colorMap = {\n    root: '#4C84FF',\n    simple: '#45B649',\n    complex: '#FF6B6B',\n  };\n\n  // ============== 段落3：评估假设（evaluateHypotheses） ==============\n  const evaluateHypotheses = async (hypotheses) => {\n    setIsEvaluating(true);\n    setError(null);\n\n    try {\n      const prompt = `For the following hypotheses, rank **each one individually** based on novelty, feasibility, and impact.\n      Novelty is judged by whether the hypotheses challenges traditional assumptions, propose innovative approaches, or explore under-researched areas will score higher in novelty. Less novel hypotheses include those that replicate well-known findings or extend existing studies with minimal new insights.\n      Feasibility is judged by whether the hypothesis can be represented by the dataset described in the data summary.\n      Impact assesses how the hypotheses addresses critical or emerging issues, influence policy or decision-making, or provide insights into major societal, economic, or scientific challenges. Hypotheses with lower impact are narrower in scope or contribute incremental knowledge without broader implications.\n      For each hypothesis, provide its rank (1 being the highest) in terms of novelty, feasibility, and impact.\n      Also, provide the ranking reasons for each hypothesis.\n      **Ensure that you include all hypotheses in your evaluation and do not combine or omit any.**\n      **No two hypotheses should have the same rank in any category. Assign unique ranks to each hypothesis in each category to avoid overlaps.**\n      Return the results in JSON format as an array of objects with the following fields:\n      - id\n      - novelty_rank\n      - novelty_rank_reason\n      - feasibility_rank\n      - feasibility_rank_reason\n      - impact_rank\n      - impact_rank_reason\n\nHere are the hypotheses:\n${JSON.stringify(hypotheses)}\n\nData summary: ${JSON.stringify(data_summary)}\n\nPlease provide only the JSON array in your response.`;\n\n      const apiKey = process.env.REACT_APP_OPENAI_API_KEY;\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`,\n        },\n        body: JSON.stringify({\n          model: 'gpt-4o',\n          messages: [\n            { role: 'system', content: 'You are a data scientist.' },\n            { role: 'user', content: prompt },\n          ],\n          max_tokens: 2000,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error.message);\n      }\n\n      const data = await response.json();\n      const assistantReply = data.choices[0].message.content.trim();\n\n      let evaluatedHypotheses;\n      try {\n        const jsonMatch = assistantReply.match(/\\[.*\\]/s);\n        if (jsonMatch) {\n          evaluatedHypotheses = JSON.parse(jsonMatch[0]);\n        } else {\n          evaluatedHypotheses = JSON.parse(assistantReply);\n        }\n      } catch (parseError) {\n        throw new Error(\"Failed to parse evaluated hypotheses JSON from the assistant's reply.\");\n      }\n\n      if (evaluatedHypotheses.length !== hypotheses.length) {\n        throw new Error(\n          `Mismatch in number of evaluated hypotheses. Expected ${hypotheses.length}, but got ${evaluatedHypotheses.length}.`\n        );\n      }\n\n      // rank -> score\n      const rankToScore = (rank, total) => {\n        const maxScore = 90;\n        const minScore = 10;\n        const scoreRange = maxScore - minScore;\n        // 分数从高到低\n        const score = maxScore - ((rank - 1) * scoreRange) / (total - 1);\n        return Math.round(score);\n      };\n\n      setNodes((prevNodes) =>\n        prevNodes.map((node) => {\n          const evalHypo = evaluatedHypotheses.find((h) => h.id === node.id);\n          if (evalHypo) {\n            const totalHypotheses = hypotheses.length;\n            const noveltyScore = rankToScore(evalHypo.novelty_rank, totalHypotheses);\n            const feasibilityScore = rankToScore(evalHypo.feasibility_rank, totalHypotheses);\n            const impactScore = rankToScore(evalHypo.impact_rank, totalHypotheses);\n\n            return {\n              ...node,\n              noveltyScore,\n              feasibilityScore,\n              impactScore,\n              rankingReason: evalHypo.ranking_reason,\n            };\n          }\n          return node;\n        })\n      );\n    } catch (err) {\n      console.error('Error evaluating hypotheses:', err);\n      setError(err.message);\n    } finally {\n      setIsEvaluating(false);\n    }\n  };\n\n  // ============== 段落4：分析意图提交处理 (handleAnalysisIntentSubmit) ==============\n  const handleAnalysisIntentSubmit = async (e) => {\n    e.preventDefault();\n    if (!analysisIntent.trim()) return;\n\n    setIsGenerating(true);\n    setError(null);\n\n    try {\n      const prompt = `Based on the following analysis intent and data, generate exactly three initial hypotheses. For each hypothesis, provide a two-word title and a detailed content. Return the hypotheses in JSON format as an array of objects with \"title\" and \"content\" fields.\n\nAnalysis Intent: ${analysisIntent}\n\nData: ${JSON.stringify(data_summary)}\n\nPlease provide only the JSON array in your response.`;\n\n      const apiKey = process.env.REACT_APP_OPENAI_API_KEY;\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`,\n        },\n        body: JSON.stringify({\n          model: 'gpt-4o',\n          messages: [\n            { role: 'system', content: 'You are a data scientist.' },\n            { role: 'user', content: prompt },\n          ],\n          max_tokens: 500,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error.message);\n      }\n\n      const data = await response.json();\n      const assistantReply = data.choices[0].message.content.trim();\n\n      let hypothesesArray;\n      try {\n        const jsonMatch = assistantReply.match(/\\[.*\\]/s);\n        if (jsonMatch) {\n          hypothesesArray = JSON.parse(jsonMatch[0]);\n        } else {\n          hypothesesArray = JSON.parse(assistantReply);\n        }\n      } catch (parseError) {\n        throw new Error(\"Failed to parse hypotheses JSON from the assistant's reply.\");\n      }\n\n      const hypotheses = hypothesesArray.slice(0, 3);\n      const hypothesesWithId = hypotheses.map((hyp) => {\n        const id = generateUniqueId();\n        return { id, ...hyp };\n      });\n\n      const updatedHypothesesList = [...hypothesesList, ...hypothesesWithId];\n      setHypothesesList(updatedHypothesesList);\n\n      // Root node\n      const rootNode = {\n        id: 'root',\n        level: 0,\n        title: analysisIntent,\n        content: analysisIntent,\n        type: 'root',\n        x: 0,\n        y: 0,\n      };\n\n      // Child nodes\n      const childSpacing = 200;\n      const totalWidth = (hypotheses.length - 1) * childSpacing;\n      const startX = rootNode.x - totalWidth / 2;\n\n      const childNodes = hypothesesWithId.map((hyp, i) => ({\n        id: hyp.id,\n        level: 1,\n        title: hyp.title.trim(),\n        content: hyp.content.trim(),\n        type: 'complex',\n        x: startX + i * childSpacing,\n        y: rootNode.y + 150,\n      }));\n\n      const newNodes = [rootNode, ...childNodes];\n      const newLinks = childNodes.map((nd) => ({ source: rootNode.id, target: nd.id }));\n      setNodes(newNodes);\n      setLinks(newLinks);\n\n      setAnalysisIntent('');\n      setIsAnalysisSubmitted(true);\n\n      // 评估\n      await evaluateHypotheses(updatedHypothesesList);\n      setIsGenerating(false);\n    } catch (err) {\n      console.error('Error generating initial hypotheses:', err);\n      setError(err.message);\n      setIsGenerating(false);\n    }\n  };\n\n  // ============== 段落5：生成子节点 (generateChildNodes) ==============\n  const generateChildNodes = async () => {\n    if (!selectedNode) return;\n    setIsGenerating(true);\n    setError(null);\n\n    try {\n      const prompt = `Based on the following node content and data, generate exactly three new hypotheses. For each hypothesis, provide a two-word title and a detailed content. Return the hypotheses in JSON format as an array of objects with \"title\" and \"content\" fields.\n\nNode Content: ${selectedNode.content}\n\nData: ${JSON.stringify(data_summary)}\n\nAdditional Context: ${userInput}\n\nPlease provide only the JSON array in your response.`;\n\n      const apiKey = process.env.REACT_APP_OPENAI_API_KEY;\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`,\n        },\n        body: JSON.stringify({\n          model: 'gpt-4o',\n          messages: [\n            { role: 'system', content: 'You are a data scientist.' },\n            { role: 'user', content: prompt },\n          ],\n          max_tokens: 500,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error.message);\n      }\n\n      const data = await response.json();\n      const assistantReply = data.choices[0].message.content.trim();\n\n      let hypothesesArray;\n      try {\n        const jsonMatch = assistantReply.match(/\\[.*\\]/s);\n        if (jsonMatch) {\n          hypothesesArray = JSON.parse(jsonMatch[0]);\n        } else {\n          hypothesesArray = JSON.parse(assistantReply);\n        }\n      } catch (parseError) {\n        throw new Error(\"Failed to parse hypotheses JSON from the assistant's reply.\");\n      }\n\n      const hypotheses = hypothesesArray.slice(0, 3);\n      const newHypothesesWithId = hypotheses.map((hyp) => {\n        const id = generateUniqueId();\n        return { id, ...hyp };\n      });\n\n      const updatedHypothesesList = [...hypothesesList, ...newHypothesesWithId];\n      setHypothesesList(updatedHypothesesList);\n\n      // 布局\n      const childSpacing = 200;\n      const totalWidth = (hypotheses.length - 1) * childSpacing;\n      const startX = selectedNode.x - totalWidth / 2;\n\n      const newNodes = newHypothesesWithId.map((hyp, i) => ({\n        id: hyp.id,\n        level: selectedNode.level + 1,\n        title: hyp.title.trim(),\n        content: hyp.content.trim(),\n        type: 'complex',\n        x: startX + i * childSpacing + Math.random() * 20 - 10,\n        y: selectedNode.y + 150 + Math.random() * 20 - 10,\n      }));\n\n      const newLinks = newNodes.map((nd) => ({ source: selectedNode.id, target: nd.id }));\n      setNodes((prev) => [...prev, ...newNodes]);\n      setLinks((prev) => [...prev, ...newLinks]);\n\n      // 评估\n      await evaluateHypotheses(updatedHypothesesList);\n\n      setIsGenerating(false);\n      setUserInput('');\n    } catch (err) {\n      console.error('Error generating hypotheses:', err);\n      setError(err.message);\n      setIsGenerating(false);\n    }\n  };\n\n  // ============== 段落6：根据拖拽修改假设 (modifyHypothesisBasedOnModifications) ==============\n  // ============== 段落6：修改开始 ==============\n  const modifyHypothesisBasedOnModifications = async (\n    originalNode,\n    ghostNode,\n    modifications,\n    behindNode\n  ) => {\n    setError(null);\n\n    try {\n      setIsGenerating(true);\n\n      // 根据每个指标和对应的 increase/decrease，拼接更灵活的描述\n      let instructionLines = [];\n      // 如果 behindNode 存在，就用它的 content，否则给个说明\n      const behindNodeContent = behindNode ? behindNode.content : '(No behind node found)';\n\n      // 遍历 modifications，分别处理 Novelty / Feasibility / Impact\n      modifications.forEach((mod) => {\n        const metricName =\n          mod.metric === 'noveltyScore'\n            ? 'Novelty'\n            : mod.metric === 'feasibilityScore'\n            ? 'Feasibility'\n            : 'Impact';\n        const direction = mod.direction === 'increase' ? 'increasing' : 'decreasing';\n\n        // 拼出一句形如：\n        // \"by decreasing its Feasibility to be less feasible than this hypothesis:\n        //  [behindNodeContent]\"\n        // 或\n        // \"by increasing its Novelty to be more novel than this hypothesis:\n        //  [behindNodeContent]\"\n        const line = `by ${direction} its ${metricName} to be ${\n          direction === 'increasing' ? 'more' : 'less'\n        } ${metricName.toLowerCase()} than this hypothesis:\\n${behindNodeContent}`;\n        instructionLines.push(line);\n      });\n\n      // instructionLines 的多条指令用换行 + \"And \"串接\n      const instructionsText = instructionLines.map((line, idx) => {\n        if (idx === 0) return `Modify this hypothesis ${line}`;\n        return `And ${line}`;\n      }).join('\\n\\n');\n\n      // 最终组合 prompt\n      const prompt = `\n  ${instructionsText}\n\n  Keep its main idea intact, but focus on adjusting the degree of novelty, feasibility, and/or impact as requested.\n\n  Original hypothesis:\n  ${originalNode.content}\n\n  Dataset summary: ${JSON.stringify(data_summary)}\n\n  Please provide only the modified hypothesis content in your response.\n      `.trim();\n\n      console.log('修改假设的 prompt:', prompt);\n\n      const apiKey = process.env.REACT_APP_OPENAI_API_KEY;\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`,\n        },\n        body: JSON.stringify({\n          model: 'gpt-4o',\n          messages: [\n            { role: 'system', content: 'You are a data scientist.' },\n            { role: 'user', content: prompt },\n          ],\n          max_tokens: 500,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error.message);\n      }\n\n      const data = await response.json();\n      const assistantReply = data.choices[0].message.content.trim();\n\n      ghostNode.content = assistantReply;\n      ghostNode.isModified = true;\n      ghostNode.previousState = originalNode;\n      ghostNode.isGhost = false;\n\n      const newHypothesis = {\n        id: ghostNode.id,\n        title: ghostNode.title,\n        content: assistantReply,\n      };\n      setHypothesesList((prevList) => [...prevList, newHypothesis]);\n\n      setNodes((prevNodes) => prevNodes.map((n) => (n.id === ghostNode.id ? ghostNode : n)));\n      setIsGenerating(false);\n      setIsEvaluating(true);\n\n      await evaluateHypotheses([...hypothesesList, newHypothesis]);\n    } catch (err) {\n      console.error('Error modifying hypothesis:', err);\n      setError(err.message);\n      setIsGenerating(false);\n    } finally {\n      setIsEvaluating(false);\n    }\n  };\n  // ============== 段落6：修改结束 ==============\n\n\n  // ============== 段落7：节点点击/悬浮/离开事件处理 ==============\n  const handleNodeClick = (node) => {\n    setSelectedNode((prev) => (prev?.id === node.id ? null : node));\n  };\n  const handleNodeHover = (event, d) => {\n    setHoveredNode(d);\n    d3.select(event.currentTarget).raise();\n  };\n  const handleNodeLeave = () => {\n    setHoveredNode(null);\n  };\n\n// ============== 段落8：D3 渲染逻辑 useEffect ==============\nuseEffect(() => {\n  if (!svgRef.current) return;\n\n  const width = 800;\n  const height = 600;\n\n  // 清空 SVG\n  d3.select(svgRef.current).selectAll('*').remove();\n\n  if (showTree) {\n    // ------------------- Exploration (Tree) View --------------------\n    const svg = d3.select(svgRef.current).attr('width', width).attr('height', height);\n\n    // 卡片背景\n    svg\n      .append('rect')\n      .attr('x', 2)\n      .attr('y', 2)\n      .attr('width', width - 4)\n      .attr('height', height - 4)\n      .attr('rx', 8)\n      .attr('ry', 8)\n      .style('fill', '#fff')\n      .style('stroke', '#e5e7eb')\n      .style('stroke-width', 1)\n      .style('filter', 'drop-shadow(0 4px 6px rgba(0,0,0,0.1))');\n\n    // 顶部显示 Root Hypothesis (举例)\n    svg\n      .append('text')\n      .attr('x', 24)\n      .attr('y', 50)\n      .style('font-size', '2rem')\n      .style('font-weight', 600)\n      .style('fill', '#2563EB')\n      .text('Income Inequality');\n\n    // 在卡片内部绘制树\n    const g = svg.append('g').attr('transform', `translate(300, 130)`);\n\n    // 连线\n    links.forEach((link) => {\n      const source = nodes.find((n) => n.id === link.source);\n      const target = nodes.find((n) => n.id === link.target);\n      if (source && target) {\n        g.append('path')\n          .attr(\n            'd',\n            `M ${source.x},${source.y} C ${source.x},${(source.y + target.y) / 2} \n               ${target.x},${(source.y + target.y) / 2} \n               ${target.x},${target.y}`\n          )\n          .style('fill', 'none')\n          .style('stroke', '#ccc')\n          .style('stroke-width', 2);\n      }\n    });\n\n    // 节点\n    const nodeGroups = g\n      .selectAll('.node')\n      .data(nodes)\n      .enter()\n      .append('g')\n      .attr('class', 'node')\n      .attr('transform', (d) => `translate(${d.x},${d.y})`);\n\n    nodeGroups\n      .append('text')\n      .attr('dy', 35)\n      .attr('text-anchor', 'middle')\n      .text((d) => d.title)\n      .attr('pointer-events', 'none');\n\n    nodeGroups\n      .append('circle')\n      .attr('r', 25)\n      .style('fill', (d) => (d.isNewlyGenerated ? '#FFD700' : colorMap[d.type]))\n      .style('opacity', (d) => (d.isGhost ? 0.5 : 1))\n      .style('stroke', (d) => {\n        if (selectedNode?.id === d.id) return '#000';\n        else if (hoveredNode?.id === d.id) return '#555';\n        else return '#fff';\n      })\n      .style('stroke-width', (d) => {\n        if (selectedNode?.id === d.id) return 4;\n        else if (hoveredNode?.id === d.id) return 3;\n        else return 2;\n      })\n      .style('cursor', 'pointer')\n      .on('mouseenter', handleNodeHover)\n      .on('mouseleave', handleNodeLeave)\n      .on('click', (event, d) => handleNodeClick(d));\n\n    // 在卡片底部放三个颜色标识 (蓝/红/黄)\n    const legendG = svg.append('g').attr('transform', `translate(40, ${height - 40})`);\n\n    // Initial Hypothesis (蓝)\n    legendG\n      .append('circle')\n      .attr('cx', 0)\n      .attr('cy', 0)\n      .attr('r', 6)\n      .style('fill', '#4C84FF');\n    legendG\n      .append('text')\n      .attr('x', 14)\n      .attr('y', 4)\n      .style('font-size', '0.875rem')\n      .style('fill', '#374151')\n      .text('Initial Hypothesis');\n\n    // Hypothesis1 (红)\n    legendG\n      .append('circle')\n      .attr('cx', 140)\n      .attr('cy', 0)\n      .attr('r', 6)\n      .style('fill', '#FF6B6B');\n    legendG\n      .append('text')\n      .attr('x', 154)\n      .attr('y', 4)\n      .style('font-size', '0.875rem')\n      .style('fill', '#374151')\n      .text('Hypothesis1');\n\n    // Hypothesis2 (黄)\n    legendG\n      .append('circle')\n      .attr('cx', 270)\n      .attr('cy', 0)\n      .attr('r', 6)\n      .style('fill', '#FFD700');\n    legendG\n      .append('text')\n      .attr('x', 284)\n      .attr('y', 4)\n      .style('font-size', '0.875rem')\n      .style('fill', '#374151')\n      .text('Hypothesis2');\n  } else {\n    // ------------------- Evaluation (Scatter) View --------------------\n    const svg = d3.select(svgRef.current).attr('width', width).attr('height', height);\n\n    // 背景卡片\n    svg\n      .append('rect')\n      .attr('x', 2)\n      .attr('y', 2)\n      .attr('width', width - 4)\n      .attr('height', height - 4)\n      .attr('rx', 8)\n      .attr('ry', 8)\n      .style('fill', '#fff')\n      .style('stroke', '#e5e7eb')\n      .style('stroke-width', 1)\n      .style('filter', 'drop-shadow(0 4px 6px rgba(0,0,0,0.1))');\n\n    // 顶部示例文字\n    svg\n      .append('text')\n      .attr('x', 24)\n      .attr('y', 40)\n      .style('font-size', '1rem')\n      .style('font-weight', 500)\n      .style('fill', '#111827')\n      .text('Income Inequality');\n\n    svg\n      .append('text')\n      .attr('x', 24)\n      .attr('y', 70)\n      .style('font-size', '1.5rem')\n      .style('font-weight', 1000)\n      .style('fill', '#1D4ED8')\n      .text('Gender Disparity');\n\n    // 右上角 X/Y 下拉框\n    const axisFO = svg\n      .append('foreignObject')\n      .attr('x', width - 210)\n      .attr('y', 20)\n      .attr('width', 200)\n      .attr('height', 60);\n\n    axisFO\n      .append('xhtml:div')\n      .style('display', 'flex')\n      .style('flexDirection', 'column')\n      .style('gap', '6px')\n      .style('fontSize', '0.875rem')\n      .html(`\n        <label style=\"color: #374151;\">X-Axis:\n          <select id=\"xSelect\" \n            style=\"margin-left: 6px; padding: 4px; border: 1px solid #d1d5db; border-radius: 4px; background-color: #f9fafb; color: #374151;\">\n            <option value=\"noveltyScore\">Novelty</option>\n            <option value=\"feasibilityScore\">Feasibility</option>\n            <option value=\"impactScore\">Impact</option>\n          </select>\n        </label>\n        <label style=\"color: #374151;\">Y-Axis:\n          <select id=\"ySelect\"\n            style=\"margin-left: 6px; padding: 4px; border: 1px solid #d1d5db; border-radius: 4px; background-color: #f9fafb; color: #374151;\">\n            <option value=\"noveltyScore\">Novelty</option>\n            <option value=\"feasibilityScore\">Feasibility</option>\n            <option value=\"impactScore\">Impact</option>\n          </select>\n        </label>\n      `);\n\n    const xSelectElem = document.getElementById('xSelect');\n    const ySelectElem = document.getElementById('ySelect');\n    if (xSelectElem) xSelectElem.value = xAxisMetric;\n    if (ySelectElem) ySelectElem.value = yAxisMetric;\n\n    if (xSelectElem) {\n      xSelectElem.onchange = (e) => setXAxisMetric(e.target.value);\n    }\n    if (ySelectElem) {\n      ySelectElem.onchange = (e) => setYAxisMetric(e.target.value);\n    }\n\n    const margin = { top: 100, right: 50, bottom: 80, left: 50 };\n    const chartWidth = width - margin.left - margin.right;\n    const chartHeight = height - margin.top - margin.bottom;\n\n    const g = svg.append('g').attr('transform', `translate(${margin.left}, ${margin.top})`);\n\n    const xScale = d3.scaleLinear().domain([0, 100]).range([0, chartWidth]);\n    const yScale = d3.scaleLinear().domain([0, 100]).range([chartHeight, 0]);\n\n    const xAxis = d3\n      .axisBottom(xScale)\n      .tickValues(d3.range(0, 101, 20))\n      .tickFormat(d3.format('d'));\n    const yAxis = d3\n      .axisLeft(yScale)\n      .tickValues(d3.range(0, 101, 20))\n      .tickFormat(d3.format('d'));\n\n    // grid\n    const xGrid = d3.axisBottom(xScale).tickValues(d3.range(0, 101, 20)).tickSize(-chartHeight).tickFormat('');\n    const yGrid = d3.axisLeft(yScale).tickValues(d3.range(0, 101, 20)).tickSize(-chartWidth).tickFormat('');\n\n    const xGridG = g.append('g').attr('class', 'x-grid').attr('transform', `translate(0, ${chartHeight})`).call(xGrid);\n    xGridG.selectAll('.domain').remove();\n    xGridG.selectAll('.tick line').style('stroke', '#F1F1F1'); // 表格线颜色\n\n    const yGridG = g.append('g').attr('class', 'y-grid').call(yGrid);\n    yGridG.selectAll('.domain').remove();\n    yGridG.selectAll('.tick line').style('stroke', '#F1F1F1'); // 表格线颜色\n\n    g.append('g').attr('transform', `translate(0, ${chartHeight})`).call(xAxis);\n    g.append('g').call(yAxis);\n\n    // === 在 x 轴下方 和 y 轴左方 动态添加标签（随下拉框变动） ===\n    g\n      .append('text')\n      .attr('x', chartWidth / 2)\n      .attr('y', chartHeight + 40)\n      .style('text-anchor', 'middle')\n      .style('fill', '#374151')\n      .style('font-size', '0.875rem')\n      .text(\n        xAxisMetric === 'noveltyScore'\n          ? 'Novelty'\n          : xAxisMetric === 'feasibilityScore'\n          ? 'Feasibility'\n          : 'Impact'\n      );\n\n    g\n      .append('text')\n      .attr('transform', 'rotate(-90)')\n      .attr('x', -chartHeight / 2)\n      .attr('y', -40)\n      .style('text-anchor', 'middle')\n      .style('fill', '#374151')\n      .style('font-size', '0.875rem')\n      .text(\n        yAxisMetric === 'noveltyScore'\n          ? 'Novelty'\n          : yAxisMetric === 'feasibilityScore'\n          ? 'Feasibility'\n          : 'Impact'\n      );\n\n    // ① 在 Evaluation View 卡片底部，补充红色 before / 黄色 after\n    const legendEval = svg.append('g').attr('transform', `translate(${margin.left}, ${height - 30})`);\n\n    // 红圆 => Before\n    legendEval\n      .append('circle')\n      .attr('cx', 0)\n      .attr('cy', 0)\n      .attr('r', 5)\n      .style('fill', '#FF6B6B');\n    legendEval\n      .append('text')\n      .attr('x', 10)\n      .attr('y', 4)\n      .style('fontSize', '0.875rem')\n      .style('fill', '#374151')\n      .text('Before');\n\n    // 黄圆 => After\n    legendEval\n      .append('circle')\n      .attr('cx', 80)\n      .attr('cy', 0)\n      .attr('r', 5)\n      .style('fill', '#FFC300');\n    legendEval\n      .append('text')\n      .attr('x', 90)\n      .attr('y', 4)\n      .style('fontSize', '0.875rem')\n      .style('fill', '#374151')\n      .text('After');\n\n    // 仅显示已有分数的节点\n    const filteredNodes = nodes.filter((d) => d[xAxisMetric] !== undefined && d[yAxisMetric] !== undefined);\n\n    // 只显示被修改后的连线\n    const evaluationLinks = links.filter((link) => {\n      const sourceNode = nodes.find((n) => n.id === link.source);\n      const targetNode = nodes.find((n) => n.id === link.target);\n      return sourceNode && targetNode && targetNode.isModified;\n    });\n\n    evaluationLinks.forEach((link) => {\n      const source = nodes.find((n) => n.id === link.source);\n      const target = nodes.find((n) => n.id === link.target);\n      if (source && target) {\n        g.append('line')\n          .attr('x1', xScale(source[xAxisMetric]))\n          .attr('y1', yScale(source[yAxisMetric]))\n          .attr('x2', xScale(target[xAxisMetric]))\n          .attr('y2', yScale(target[yAxisMetric]))\n          .style('stroke', '#ccc')\n          .style('stroke-width', 1);\n      }\n    });\n\n    // ============ 核心拖拽逻辑在这里 ============\n    const nodeGroups = g\n      .selectAll('.node-group')\n      .data(filteredNodes)\n      .enter()\n      .append('g')\n      .attr('class', 'node-group')\n      .attr('transform', (d) => `translate(${xScale(d[xAxisMetric])}, ${yScale(d[yAxisMetric])})`)\n      .style('cursor', 'pointer')\n      .on('mouseenter', handleNodeHover)\n      .on('mouseleave', handleNodeLeave)\n      .on('click', (event, d) => handleNodeClick(d))\n      .call(\n        d3\n          .drag()\n          .on('start', function (event, d) {\n            if (isGenerating || isEvaluating) return;\n            d3.select(this).raise();\n          })\n          .on('drag', function (event, d) {\n            if (isGenerating || isEvaluating) return;\n            const [xx, yy] = d3.pointer(event, g.node());\n            // 实时更新节点位置（UI展示）\n            d3.select(this).attr('transform', `translate(${xx}, ${yy})`);\n\n            // 可以在拖拽时记录一下当前坐标\n            d._lastX = xx;\n            d._lastY = yy;\n          })\n          .on('end', function (event, d) {\n            if (isGenerating || isEvaluating) return;\n\n            let finalX = typeof d._lastX === 'number' ? d._lastX : d3.pointer(event, g.node())[0];\n            let finalY = typeof d._lastY === 'number' ? d._lastY : d3.pointer(event, g.node())[1];\n\n            const newXMetricValue = xScale.invert(finalX);\n            const newYMetricValue = yScale.invert(finalY);\n\n            const oldXMetricValue = d[xAxisMetric];\n            const oldYMetricValue = d[yAxisMetric];\n            const deltaX = newXMetricValue - oldXMetricValue;\n            const deltaY = newYMetricValue - oldYMetricValue;\n\n            console.log('拖拽结束 => 节点内容:', d.title || d.id);\n            console.log('旧坐标 => X:', oldXMetricValue, 'Y:', oldYMetricValue);\n            console.log('新坐标 => X:', newXMetricValue, 'Y:', newYMetricValue);\n            console.log('比较过程 => ΔX:', deltaX, 'ΔY:', deltaY);\n\n            console.log('所有节点最新位置 (按当前 X/Y Axis Metric):');\n            nodes.forEach((n) => {\n              console.log(`- ${n.title || n.id}: (${n[xAxisMetric]}, ${n[yAxisMetric]})`);\n            });\n\n            // 清空临时属性，防止下次拖拽混淆\n            delete d._lastX;\n            delete d._lastY;\n\n            let modifications = [];\n            let behindNodeCandidate = null;\n\n            // ================== X 轴处理 ==================\n            if (Math.abs(deltaX) > 5) {\n              modifications.push({\n                metric: xAxisMetric,\n                direction: deltaX > 0 ? 'increase' : 'decrease',\n              });\n\n              const smallerCandidates = nodes\n                .filter((node) => node[xAxisMetric] !== undefined && node.id !== d.id && node[xAxisMetric] < newXMetricValue)\n                .sort((a, b) => b[xAxisMetric] - a[xAxisMetric]);\n\n              if (smallerCandidates[0]) {\n                behindNodeCandidate = smallerCandidates[0];\n                console.log('选取的“behindNodeCandidate”（X 轴）:', behindNodeCandidate.title || behindNodeCandidate.content || behindNodeCandidate.id);\n              }\n            }\n\n            // ================== Y 轴处理 ==================\n            if (Math.abs(deltaY) > 5) {\n              modifications.push({\n                metric: yAxisMetric,\n                direction: deltaY > 0 ? 'increase' : 'decrease',\n              });\n\n              const smallerY = nodes\n                .filter((node) => node[yAxisMetric] !== undefined && node.id !== d.id && node[yAxisMetric] < newYMetricValue)\n                .sort((a, b) => b[yAxisMetric] - a[yAxisMetric]);\n\n              if (smallerY[0]) {\n                behindNodeCandidate = smallerY[0] || behindNodeCandidate;\n                console.log('选取的“behindNodeCandidate”（Y 轴）:', behindNodeCandidate.title || behindNodeCandidate.content || behindNodeCandidate.id);\n              }\n            }\n\n            // 将节点 UI 位置复原回旧坐标 (防止 UI 停留在拖拽处)\n            d3.select(this).attr(\n              'transform',\n              `translate(${xScale(d[xAxisMetric])}, ${yScale(d[yAxisMetric])})`\n            );\n\n            // 如果有任意轴超过阈值 => 生成 ghostNode + 存到 pendingChange\n            if (modifications.length > 0) {\n              const ghostNodeId = generateUniqueId();\n              const ghostNode = {\n                ...d,\n                id: ghostNodeId,\n                x: d.x,\n                y: d.y,\n                [xAxisMetric]: newXMetricValue,\n                [yAxisMetric]: newYMetricValue,\n                isGhost: true,\n                isNewlyGenerated: true,\n              };\n\n              setNodes((prev) => [...prev, ghostNode]);\n              setLinks((prev) => [...prev, { source: d.id, target: ghostNodeId }]);\n\n              setPendingChange({\n                originalNode: d,\n                ghostNode,\n                modifications,\n                behindNode: behindNodeCandidate,\n                screenX: event.sourceEvent.clientX + 10,\n                screenY: event.sourceEvent.clientY + 10,\n              });\n            }\n          })\n      );\n\n    nodeGroups\n      .append('circle')\n      .attr('r', 8)\n      .style('fill', (d) => (d.isNewlyGenerated ? '#FFD700' : colorMap[d.type]))\n      .style('opacity', (d) => (d.isGhost ? 0.5 : 1))\n      .style('stroke', (d) => {\n        if (selectedNode?.id === d.id) return '#000';\n        else if (hoveredNode?.id === d.id) return '#555';\n        else return '#fff';\n      })\n      .style('stroke-width', (d) => {\n        if (selectedNode?.id === d.id) return 4;\n        else if (hoveredNode?.id === d.id) return 3;\n        else return 2;\n      });\n  }\n}, [\n  showTree,\n  nodes,\n  links,\n  selectedNode,\n  hoveredNode,\n  xAxisMetric,\n  yAxisMetric,\n  isGenerating,\n  isEvaluating,\n]);\n\n\n// ============== 段落9：Dashboard 相关逻辑 ==============\nconst TopNav = () => {\n  // exploration icon\n  const explorationIcon = (\n    <svg\n      width=\"20\"\n      height=\"20\"\n      viewBox=\"0 0 20 20\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      style={{ marginRight: '8px' }}\n    >\n      <g clipPath=\"url(#clip0_119_560)\">\n        <path\n          d=\"M8.52543 15.8306C12.2418 15.8306 15.2546 12.8179 15.2546 9.10148C15.2546 5.38508 12.2418 2.37231 8.52543 2.37231C4.80903 2.37231 1.79626 5.38508 1.79626 9.10148C1.79626 12.8179 4.80903 15.8306 8.52543 15.8306Z\"\n          stroke=\"#A2A2A2\"\n          strokeWidth=\"2\"\n          strokeLinejoin=\"round\"\n        />\n        <path\n          d=\"M10.7646 6.46654C10.1915 5.89349 9.39988 5.53906 8.5254 5.53906C7.65097 5.53906 6.8593 5.89349 6.28625 6.46654\"\n          stroke=\"#A2A2A2\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        />\n        <path\n          d=\"M13.3632 13.9392L16.7219 17.298\"\n          stroke=\"#A2A2A2\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        />\n      </g>\n      <defs>\n        <clipPath id=\"clip0_119_560\">\n          <rect width=\"19\" height=\"19\" fill=\"white\" transform=\"translate(0.212891 0.789062)\" />\n        </clipPath>\n      </defs>\n    </svg>\n  );\n\n  // evaluation icon\n  const evaluationIcon = (\n    <svg\n      width=\"20\"\n      height=\"20\"\n      viewBox=\"0 0 20 20\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      style={{ marginRight: '8px' }}\n    >\n      <g>\n        <path\n          d=\"M2.47949 2.46533V16.7153H16.7295\"\n          stroke=\"#141414\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        />\n        <path\n          fillRule=\"evenodd\"\n          clipRule=\"evenodd\"\n          d=\"M8.02114 9.59025C8.89557 9.59025 9.60447 8.88135 9.60447 8.00692C9.60447 7.13248 8.89557 6.42358 8.02114 6.42358C7.1467 6.42358 6.43781 7.13248 6.43781 8.00692C6.43781 8.88135 7.1467 9.59025 8.02114 9.59025Z\"\n          fill=\"#141414\"\n        />\n        <path\n          fillRule=\"evenodd\"\n          clipRule=\"evenodd\"\n          d=\"M14.7503 6.42367C15.8434 6.42367 16.7295 5.53755 16.7295 4.4445C16.7295 3.35144 15.8434 2.46533 14.7503 2.46533C13.6573 2.46533 12.7712 3.35144 12.7712 4.4445C12.7712 5.53755 13.6573 6.42367 14.7503 6.42367Z\"\n          fill=\"#141414\"\n        />\n        <path\n          fillRule=\"evenodd\"\n          clipRule=\"evenodd\"\n          d=\"M6.04199 14.3403C6.69785 14.3403 7.22949 13.8087 7.22949 13.1528C7.22949 12.497 6.69785 11.9653 6.04199 11.9653C5.38614 11.9653 4.85449 12.497 4.85449 13.1528C4.85449 13.8087 5.38614 14.3403 6.04199 14.3403Z\"\n          fill=\"#141414\"\n        />\n        <path\n          fillRule=\"evenodd\"\n          clipRule=\"evenodd\"\n          d=\"M13.167 12.7571C13.8228 12.7571 14.3545 12.2254 14.3545 11.5696C14.3545 10.9137 13.8228 10.3821 13.167 10.3821C12.5111 10.3821 11.9795 10.9137 11.9795 11.5696C11.9795 12.2254 12.5111 12.7571 13.167 12.7571Z\"\n          fill=\"#141414\"\n        />\n      </g>\n    </svg>\n  );\n\n  const tabStyle = {\n    display: 'flex',\n    alignItems: 'center',\n    padding: '10px 16px',\n    cursor: 'pointer',\n    borderRadius: '9999px',\n    transition: 'all 0.2s ease',\n    fontSize: '0.875rem',\n    fontWeight: 500,\n  };\n\n  const explorationActiveStyle = showTree\n    ? { backgroundColor: '#fff', color: '#141414' }\n    : { backgroundColor: 'transparent', color: '#A0AEC0' };\n\n  const evaluationActiveStyle = !showTree\n    ? { backgroundColor: '#fff', color: '#141414' }\n    : { backgroundColor: 'transparent', color: '#A0AEC0' };\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        alignItems: 'center',\n        backgroundColor: '#0F172A',\n        padding: '10px 20px',\n      }}\n    >\n      {/* Exploration View Tab */}\n      <div style={{ ...tabStyle, ...explorationActiveStyle, marginRight: '6px' }} onClick={() => setShowTree(true)}>\n        {explorationIcon}\n        Exploration View\n      </div>\n\n      {/* Evaluation View Tab */}\n      <div style={{ ...tabStyle, ...evaluationActiveStyle }} onClick={() => setShowTree(false)}>\n        {evaluationIcon}\n        Evaluation View\n      </div>\n    </div>\n  );\n};\n\nconst Dashboard = ({ node, isEvaluating, showTree }) => {\n  if (!node) {\n    return (\n      <div\n        style={{\n          padding: '24px',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          height: '160px',\n          color: '#9ca3af',\n        }}\n      >\n        <p>Click on a node to view details</p>\n      </div>\n    );\n  }\n\n  return (\n    // 整个 dashboard\n    <div\n      style={{\n        border: '1px solid #E5E7EB',\n        borderRadius: '8px',\n        backgroundColor: '#FFFFFF',\n        padding: '16px',\n      }}\n    >\n      {/* 标题 */}\n      <h2\n        style={{\n          fontSize: '1.25rem',\n          fontWeight: '700',\n          marginBottom: '1rem',\n          color: '#111827',\n        }}\n      >\n        {node.title || 'Hypothesis Title'}\n      </h2>\n\n      {/* (4) 标签：Complex */}\n      <div style={{ width: '100%', height: '100%', position: 'relative', marginBottom: '16px' }}>\n        <div\n          style={{\n            width: 64.3,\n            height: 20.65,\n            left: 0,\n            top: 0,\n            position: 'absolute',\n            background: '#F9E3E2',\n            borderRadius: 57,\n          }}\n        />\n        <div\n          style={{\n            left: 9.15,\n            top: 3.83,\n            position: 'absolute',\n            color: '#A21919',\n            fontSize: 11,\n            fontFamily: 'Inter',\n            fontWeight: '400',\n            wordWrap: 'break-word',\n          }}\n        >\n          Complex\n        </div>\n      </div>\n\n      {/* IV / DV 卡片（独立 Switch） */}\n      <IVDVCard node={node} />\n\n      {/* Novelty / Feasibility / Impact 卡片（独立 Switch） */}\n      <ThreeFactorsCard node={node} />\n\n      {showTree ? (\n        // Exploration View 下方替换成：Add context + Generate\n        <ContextAndGenerateCard />\n      ) : (\n        // Evaluation View 显示得分对比，但在评估时先隐藏，评估结束后再显示\n        <ScoreComparison node={node} isEvaluating={isEvaluating} />\n      )}\n    </div>\n  );\n};\n\n\n// ============== 段落10：IVDVCard、ThreeFactorsCard、ContextAndGenerateCard、ScoreComparison 等子组件 ==============\nconst IVDVCard = ({ node }) => {\n  const [isAfterIVDV, setIsAfterIVDV] = useState(true);\n\n  // after/before switch\n  const SwitchButton = () => (\n    <div\n      onClick={() => setIsAfterIVDV((prev) => !prev)}\n      style={{\n        position: 'absolute',\n        top: '12px',\n        right: '12px',\n        cursor: 'pointer',\n      }}\n    >\n      <div\n        style={{\n          width: '100%',\n          height: '100%',\n          background: '#EEEEEE',\n          borderRadius: 62,\n          overflow: 'hidden',\n          justifyContent: 'flex-start',\n          alignItems: 'center',\n          display: 'inline-flex',\n        }}\n      >\n        <div\n          style={{\n            width: 42,\n            height: 17,\n            background: isAfterIVDV ? '#2E2E2E' : '#EEEEEE',\n            borderRadius: 62,\n            overflow: 'hidden',\n            justifyContent: 'center',\n            alignItems: 'center',\n            display: 'flex',\n            transition: 'all 0.2s ease',\n          }}\n        >\n          <div\n            style={{\n              color: isAfterIVDV ? '#EEEEEE' : '#2E2E2E',\n              fontSize: 10,\n              fontFamily: 'Inter',\n              fontWeight: 500,\n              wordWrap: 'break-word',\n            }}\n          >\n            After\n          </div>\n        </div>\n        <div\n          style={{\n            width: 40,\n            height: 20,\n            background: isAfterIVDV ? '#EEEEEE' : '#2E2E2E',\n            borderRadius: 62,\n            overflow: 'hidden',\n            justifyContent: 'center',\n            alignItems: 'center',\n            display: 'flex',\n            transition: 'all 0.2s ease',\n          }}\n        >\n          <div\n            style={{\n              color: isAfterIVDV ? '#2E2E2E' : '#EEEEEE',\n              fontSize: 10,\n              fontFamily: 'Inter',\n              fontWeight: 500,\n              wordWrap: 'break-word',\n            }}\n          >\n            Before\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  return (\n    <div\n      style={{\n        position: 'relative',\n        border: '1px solid #e5e7eb',\n        borderRadius: '8px',\n        backgroundColor: '#FAFAFA',\n        padding: '16px',\n        marginBottom: '16px',\n      }}\n    >\n      <SwitchButton />\n\n      {/* IV / DV */}\n      <div style={{ display: 'flex', gap: '8px', marginBottom: '12px' }}>\n        <div\n          style={{\n            backgroundColor: '#ECFDF5',\n            color: '#065F46',\n            padding: '6px 8px',\n            borderRadius: '4px',\n            fontSize: '0.875rem',\n          }}\n        >\n          <strong>IV:</strong> Gender, Race\n        </div>\n        <div\n          style={{\n            backgroundColor: '#F0F9FF',\n            color: '#1E3A8A',\n            padding: '6px 8px',\n            borderRadius: '4px',\n            fontSize: '0.875rem',\n          }}\n        >\n          <strong>DV:</strong> Income\n        </div>\n      </div>\n\n      {/* Relationship */}\n      <div\n        style={{\n          backgroundColor: '#F9FAFB',\n          padding: '12px',\n          borderRadius: '6px',\n        }}\n      >\n        <div\n          style={{\n            fontSize: '0.875rem',\n            fontWeight: '500',\n            color: '#6b7280',\n            marginBottom: '4px',\n          }}\n        >\n          Relationship / Hypothesis ({isAfterIVDV ? 'After' : 'Before'})\n        </div>\n        <div\n          style={{\n            marginTop: '4px',\n            color: '#374151',\n            fontSize: '0.875rem',\n            lineHeight: '1.5',\n            whiteSpace: 'pre-wrap',\n          }}\n        >\n          {node.content}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst ThreeFactorsCard = ({ node }) => {\n  const [isAfterFactors, setIsAfterFactors] = useState(true);\n\n  const SwitchButton = () => (\n    <div\n      onClick={() => setIsAfterFactors((prev) => !prev)}\n      style={{\n        position: 'absolute',\n        top: '12px',\n        right: '12px',\n        width: '82px',\n        height: '20px',\n        background: '#EEEEEE',\n        borderRadius: 62,\n        overflow: 'hidden',\n        display: 'flex',\n        cursor: 'pointer',\n      }}\n    >\n      {/* After */}\n      <div\n        style={{\n          width: 42,\n          height: 17,\n          background: isAfterFactors ? '#2E2E2E' : '#EEEEEE',\n          borderRadius: 62,\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          transition: 'all 0.2s ease',\n        }}\n      >\n        <div\n          style={{\n            color: isAfterFactors ? '#EEEEEE' : '#2E2E2E',\n            fontSize: 10,\n            fontWeight: 500,\n          }}\n        >\n          After\n        </div>\n      </div>\n\n      {/* Before */}\n      <div\n        style={{\n          width: 40,\n          height: 20,\n          background: isAfterFactors ? '#EEEEEE' : '#2E2E2E',\n          borderRadius: 62,\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          transition: 'all 0.2s ease',\n        }}\n      >\n        <div\n          style={{\n            color: isAfterFactors ? '#2E2E2E' : '#EEEEEE',\n            fontSize: 10,\n            fontWeight: 500,\n          }}\n        >\n          Before\n        </div>\n      </div>\n    </div>\n  );\n\n  const noveltyText = node.noveltyText || 'Exploring the gender income dynamics within different racial groups.';\n  const feasibilityText =\n    node.feasibilityText || 'Considering the influence of age, education, and race on income...';\n  const impactText =\n    node.impactText || 'This hypothesis can be evaluated by comparing the average income...';\n\n  const renderCardItem = (color, title, text) => (\n    <div style={{ display: 'flex', marginBottom: '16px' }}>\n      <div style={{ marginRight: '12px', marginTop: '4px' }}>\n        <div\n          style={{\n            width: '12px',\n            height: '12px',\n            borderRadius: '50%',\n            backgroundColor: color,\n          }}\n        ></div>\n      </div>\n      <div>\n        <div\n          style={{\n            color,\n            fontSize: '1rem',\n            fontWeight: '600',\n            marginBottom: '4px',\n          }}\n        >\n          {title}\n        </div>\n        <div\n          style={{\n            color: '#111827',\n            fontSize: '1rem',\n            lineHeight: '1.4',\n          }}\n        >\n          {text}\n        </div>\n      </div>\n    </div>\n  );\n\n  return (\n    <div\n      style={{\n        position: 'relative',\n        border: '1px solid #e5e7eb',\n        borderRadius: '8px',\n        backgroundColor: '#FAFAFA',\n        padding: '16px',\n        marginBottom: '16px',\n      }}\n    >\n      <SwitchButton />\n\n      {/* 三要素 */}\n      {renderCardItem('#FB7185', 'Novelty', noveltyText + ` (${isAfterFactors ? 'After' : 'Before'})`)}\n      {renderCardItem('#FBBF24', 'Feasibility', feasibilityText + ` (${isAfterFactors ? 'After' : 'Before'})`)}\n      {renderCardItem('#3B82F6', 'Impact', impactText + ` (${isAfterFactors ? 'After' : 'Before'})`)}\n    </div>\n  );\n};\n\nconst ContextAndGenerateCard = () => {\n  return (\n    <div\n      style={{\n        border: '1px solid #e5e7eb',\n        borderRadius: '8px',\n        backgroundColor: '#FAFAFA',\n        padding: '16px',\n        marginBottom: '16px',\n      }}\n    >\n      <div style={{ marginBottom: '8px', fontSize: '0.875rem', color: '#6b7280' }}>\n        Add context for new hypotheses (option)\n      </div>\n      <textarea\n        rows={2}\n        value={userInput}\n        onChange={(e) => setUserInput(e.target.value)}\n        style={{\n          width: '100%',\n          fontSize: '0.875rem',\n          padding: '8px',\n          border: '1px solid #d1d5db',\n          borderRadius: '4px',\n          resize: 'none',\n          marginBottom: '10px',\n        }}\n      />\n\n      <button\n        onClick={generateChildNodes}\n        disabled={!selectedNode || isGenerating || isEvaluating || !isAnalysisSubmitted}\n        style={{\n          padding: '8px 16px',\n          backgroundColor: '#4C84FF',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          fontSize: '0.875rem',\n          cursor: !selectedNode || isGenerating || isEvaluating || !isAnalysisSubmitted ? 'not-allowed' : 'pointer',\n          opacity: !selectedNode || isGenerating || isEvaluating || !isAnalysisSubmitted ? 0.6 : 1,\n        }}\n      >\n        Generate New Hypotheses\n      </button>\n    </div>\n  );\n};\n\nconst ScoreComparison = ({ node, isEvaluating }) => {\n  // 如果当前正在评估，则先不显示分数\n  if (isEvaluating) {\n    return (\n      <div style={{ marginTop: '16px' }}>\n        <p style={{ fontSize: '0.875rem', color: '#6b7280' }}>\n          Scores will be displayed once evaluation is complete.\n        </p>\n      </div>\n    );\n  }\n\n  if (!node) return null;\n  const hasBefore = !!node.previousState;\n  const noveltyBefore = hasBefore ? node.previousState.noveltyScore ?? 'N/A' : null;\n  const noveltyAfter = node.noveltyScore ?? 'N/A';\n  const feasibilityBefore = hasBefore ? node.previousState.feasibilityScore ?? 'N/A' : null;\n  const feasibilityAfter = node.feasibilityScore ?? 'N/A';\n  const impactBefore = hasBefore ? node.previousState.impactScore ?? 'N/A' : null;\n  const impactAfter = node.impactScore ?? 'N/A';\n\n  // 在最下方补充 Score Reason\n  const reason = node.rankingReason ?? '(No reason provided)';\n\n  const getArrowDiv = (beforeVal, afterVal) => {\n    const b = parseFloat(beforeVal);\n    const a = parseFloat(afterVal);\n    if (isNaN(b) || isNaN(a)) return null;\n    if (a > b) {\n      // green arrow\n      return (\n        <svg\n          width=\"17\"\n          height=\"17\"\n          viewBox=\"0 0 17 17\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          style={{ margin: '0 6px' }}\n        >\n          <g>\n            <path\n              d=\"M7.01221 4.32837L13.0122 4.32837L13.0122 10.3284\"\n              stroke=\"#37A219\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            />\n            <path\n              d=\"M4.52682 12.8137L13.0121 4.32845\"\n              stroke=\"#37A219\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            />\n          </g>\n        </svg>\n      );\n    } else if (a < b) {\n      // red arrow\n      return (\n        <svg\n          width=\"17\"\n          height=\"17\"\n          viewBox=\"0 0 17 17\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          style={{ margin: '0 6px' }}\n        >\n          <g>\n            <path\n              d=\"M12.9168 7.19702V13.197H6.91684\"\n              stroke=\"#A21919\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            />\n            <path\n              d=\"M4.43146 4.71167L12.9167 13.1969\"\n              stroke=\"#A21919\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            />\n          </g>\n        </svg>\n      );\n    } else {\n      // 分数相同 -> 横线 icon\n      return (\n        <svg\n          width=\"16\"\n          height=\"17\"\n          viewBox=\"0 0 16 17\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          style={{ margin: '0 6px' }}\n        >\n          <g id=\"Frame\">\n            <path\n              id=\"Vector\"\n              d=\"M2.97964 8.17383L13.0204 8.17383\"\n              stroke=\"#A2A2A2\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            />\n          </g>\n        </svg>\n      );\n    }\n  };\n\n  const renderMetricCard = (label, color, beforeVal, afterVal) => {\n    const showScore = hasBefore ? (\n      <div style={{ display: 'flex', alignItems: 'center', fontSize: '1rem', color: '#374151' }}>\n        <span>{beforeVal}</span>\n        {getArrowDiv(beforeVal, afterVal)}\n        <span>{afterVal}</span>\n      </div>\n    ) : (\n      <div style={{ fontSize: '1rem', color: '#374151' }}>Score: {afterVal}</div>\n    );\n\n    return (\n      <div\n        key={label}\n        style={{\n          backgroundColor: '#F9FAFB',\n          border: '1px solid #E5E7EB',\n          borderRadius: '8px',\n          padding: '16px',\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          gap: '6px',\n        }}\n      >\n        <div style={{ fontSize: '1rem', fontWeight: '600', color }}>{label}</div>\n        {showScore}\n\n        {/* Score reason */}\n        <div\n          style={{\n            fontSize: '0.875rem',\n            color: '#6b7280',\n            textAlign: 'center',\n            marginTop: '4px',\n            lineHeight: '1.3',\n          }}\n        >\n          {reason}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div\n      style={{\n        display: 'grid',\n        gridTemplateColumns: '1fr 1fr 1fr',\n        gap: '16px',\n        marginTop: '16px',\n      }}\n    >\n      {renderMetricCard('Novelty', '#DC2626', noveltyBefore, noveltyAfter)}\n      {renderMetricCard('Feasibility', '#D97706', feasibilityBefore, feasibilityAfter)}\n      {renderMetricCard('Impact', '#2563EB', impactBefore, impactAfter)}\n    </div>\n  );\n};\n\n\n  // ============== 段落11：整体布局，渲染主界面 JSX ==============\n  return (\n    <div style={{ fontFamily: 'Arial, sans-serif', position: 'relative' }}>\n      <TopNav />\n\n      {showTree && !isAnalysisSubmitted && (\n        <div style={{ backgroundColor: '#1f2937', display: 'flex', alignItems: 'center', padding: '10px 20px' }}>\n          <form onSubmit={handleAnalysisIntentSubmit} style={{ display: 'flex', alignItems: 'center' }}>\n            <input\n              type=\"text\"\n              value={analysisIntent}\n              onChange={(e) => setAnalysisIntent(e.target.value)}\n              placeholder=\"Enter analysis intent\"\n              style={{ padding: '6px 10px', borderRadius: '4px', border: '1px solid #d1d5db', marginRight: '8px' }}\n            />\n            <button\n              type=\"submit\"\n              disabled={isGenerating || isEvaluating}\n              style={{\n                padding: '6px 12px',\n                backgroundColor: '#4C84FF',\n                color: 'white',\n                border: 'none',\n                borderRadius: '4px',\n                cursor: isGenerating || isEvaluating ? 'not-allowed' : 'pointer',\n                opacity: isGenerating || isEvaluating ? 0.7 : 1,\n              }}\n            >\n              {isEvaluating ? 'Evaluating...' : isGenerating ? 'Generating...' : 'Submit'}\n            </button>\n            {error && <div style={{ marginLeft: '16px', color: '#dc2626', fontSize: '0.875rem' }}>{error}</div>}\n          </form>\n        </div>\n      )}\n\n      <div style={{ display: 'flex', padding: '20px', maxWidth: '1600px', margin: '0 auto', boxSizing: 'border-box' }}>\n        {/* 左侧图 */}\n        <div style={{ flexBasis: '60%', marginRight: '20px' }}>\n          <svg ref={svgRef} />\n        </div>\n\n        {/* 右侧 Dashboard */}\n        <div style={{ flexBasis: '40%' }}>\n          {(isGenerating || isEvaluating) && (\n            <div style={{ textAlign: 'center', marginBottom: '10px', color: '#4C84FF' }}>\n              {isGenerating ? 'Generating...' : 'Evaluating...'}\n            </div>\n          )}\n          <Dashboard node={nodes.find((n) => n.id === (hoveredNode?.id || selectedNode?.id))} />\n        </div>\n      </div>\n\n      {/* ========== 段落12：悬浮确认修改的按钮 (pendingChange) ========== */}\n      {pendingChange && (\n        <div\n          style={{\n            position: 'absolute',\n            left: pendingChange.screenX,\n            top: pendingChange.screenY,\n            backgroundColor: '#f3f4f6',\n            border: '1px solid #d1d5db',\n            borderRadius: '4px',\n            padding: '6px 8px',\n            zIndex: 999,\n          }}\n        >\n          <div style={{ marginBottom: '4px', fontSize: '0.875rem', color: '#374151' }}>\n            <strong>Confirm change?</strong>\n          </div>\n          <button\n            style={{\n              padding: '4px 8px',\n              backgroundColor: '#4C84FF',\n              color: 'white',\n              border: 'none',\n              borderRadius: '4px',\n              marginRight: '8px',\n              cursor: 'pointer',\n            }}\n            onClick={() => {\n              // 真正发起修改\n              modifyHypothesisBasedOnModifications(\n                pendingChange.originalNode,\n                pendingChange.ghostNode,\n                pendingChange.modifications,\n                pendingChange.behindNode // 传入 behindNode\n              );\n              // 清空 pendingChange\n              setPendingChange(null);\n            }}\n          >\n            Confirm\n          </button>\n\n          <button\n            style={{\n              padding: '4px 8px',\n              backgroundColor: '#fff',\n              color: '#374151',\n              border: '1px solid #d1d5db',\n              borderRadius: '4px',\n              cursor: 'pointer',\n            }}\n            onClick={() => {\n              // 用户取消 => 把 ghostNode 移除\n              setNodes((prev) => prev.filter((nd) => nd.id !== pendingChange.ghostNode.id));\n              setLinks((prev) => prev.filter((lk) => lk.target !== pendingChange.ghostNode.id));\n              setPendingChange(null);\n            }}\n          >\n            Cancel\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// ============== 段落13：默认导出 ==============\nexport default TreePlotVisualization;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}