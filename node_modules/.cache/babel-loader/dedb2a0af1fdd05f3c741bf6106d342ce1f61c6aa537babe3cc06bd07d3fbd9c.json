{"ast":null,"code":"var _jsxFileName = \"/Users/jasonding/Desktop/Hypo-Eval/src/components/TreePlotVisualization.jsx\",\n  _s3 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport data_summary from './data_summary.json'; // 确保有 data_summary.json\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TreePlotVisualization = () => {\n  _s3();\n  var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  const [showTree, setShowTree] = useState(true); // true: Exploration View, false: Evaluation View\n  const [nodes, setNodes] = useState([]);\n  const [links, setLinks] = useState([]);\n  const [hoveredNode, setHoveredNode] = useState(null);\n  const [selectedNode, setSelectedNode] = useState(null);\n  const [userInput, setUserInput] = useState('');\n  const [analysisIntent, setAnalysisIntent] = useState('');\n  const [isAnalysisSubmitted, setIsAnalysisSubmitted] = useState(false);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [isEvaluating, setIsEvaluating] = useState(false);\n  const [error, setError] = useState(null);\n  const svgRef = useRef(null);\n  const [hypothesesList, setHypothesesList] = useState([]);\n\n  // X/Y 轴指标（仅在 Evaluation View 用）\n  const [xAxisMetric, setXAxisMetric] = useState('feasibilityScore');\n  const [yAxisMetric, setYAxisMetric] = useState('noveltyScore');\n\n  // ID 计数器\n  const idCounterRef = useRef(0);\n  const generateUniqueId = () => {\n    idCounterRef.current += 1;\n    return `node-${idCounterRef.current}`;\n  };\n\n  // 配色映射\n  const colorMap = {\n    root: '#4C84FF',\n    simple: '#45B649',\n    complex: '#FF6B6B'\n  };\n\n  // ============ Evaluate Hypotheses ============\n  const evaluateHypotheses = async hypotheses => {\n    setIsEvaluating(true);\n    setError(null);\n    try {\n      const prompt = `For the following hypotheses, rank **each one individually** based on novelty, feasibility, and impact.\nFeasibility is judged by whether the hypothesis can be represented by the dataset described in the data summary.\nImpact assesses how significant the hypothesis is to the field.\nFor each hypothesis, provide its rank (1 being the highest) in terms of novelty, feasibility, and impact.\nAlso, provide the ranking reasons for each hypothesis.\n**Ensure that you include all hypotheses in your evaluation and do not combine or omit any.**\n**No two hypotheses should have the same rank in any category. Assign unique ranks to each hypothesis in each category to avoid overlaps.**\nReturn the results in JSON format as an array of objects with the following fields:\n- id\n- novelty_rank\n- feasibility_rank\n- impact_rank\n- ranking_reason\n\nHere are the hypotheses:\n${JSON.stringify(hypotheses)}\n\nData summary: ${JSON.stringify(data_summary)}\n\nPlease provide only the JSON array in your response.`;\n      const apiKey = process.env.REACT_APP_OPENAI_API_KEY;\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-4o',\n          messages: [{\n            role: 'system',\n            content: 'You are a data scientist.'\n          }, {\n            role: 'user',\n            content: prompt\n          }],\n          max_tokens: 2000\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error.message);\n      }\n      const data = await response.json();\n      const assistantReply = data.choices[0].message.content.trim();\n      let evaluatedHypotheses;\n      try {\n        const jsonMatch = assistantReply.match(/\\[.*\\]/s);\n        if (jsonMatch) {\n          evaluatedHypotheses = JSON.parse(jsonMatch[0]);\n        } else {\n          evaluatedHypotheses = JSON.parse(assistantReply);\n        }\n      } catch (parseError) {\n        throw new Error(\"Failed to parse evaluated hypotheses JSON from the assistant's reply.\");\n      }\n      if (evaluatedHypotheses.length !== hypotheses.length) {\n        throw new Error(`Mismatch in number of evaluated hypotheses. Expected ${hypotheses.length}, but got ${evaluatedHypotheses.length}.`);\n      }\n\n      // rank -> score\n      const rankToScore = (rank, total) => {\n        const maxScore = 90;\n        const minScore = 10;\n        const scoreRange = maxScore - minScore;\n        // 分数从高到低\n        const score = maxScore - (rank - 1) * scoreRange / (total - 1);\n        return Math.round(score);\n      };\n      setNodes(prevNodes => prevNodes.map(node => {\n        const evalHypo = evaluatedHypotheses.find(h => h.id === node.id);\n        if (evalHypo) {\n          const totalHypotheses = hypotheses.length;\n          const noveltyScore = rankToScore(evalHypo.novelty_rank, totalHypotheses);\n          const feasibilityScore = rankToScore(evalHypo.feasibility_rank, totalHypotheses);\n          const impactScore = rankToScore(evalHypo.impact_rank, totalHypotheses);\n          return {\n            ...node,\n            noveltyScore,\n            feasibilityScore,\n            impactScore,\n            rankingReason: evalHypo.ranking_reason\n          };\n        }\n        return node;\n      }));\n    } catch (err) {\n      console.error('Error evaluating hypotheses:', err);\n      setError(err.message);\n    } finally {\n      setIsEvaluating(false);\n    }\n  };\n\n  // ============ handleAnalysisIntentSubmit ============\n  const handleAnalysisIntentSubmit = async e => {\n    e.preventDefault();\n    if (!analysisIntent.trim()) return;\n    setIsGenerating(true);\n    setError(null);\n    try {\n      const prompt = `Based on the following analysis intent and data, generate exactly three initial hypotheses. For each hypothesis, provide a two-word title and a detailed content. Return the hypotheses in JSON format as an array of objects with \"title\" and \"content\" fields.\n\nAnalysis Intent: ${analysisIntent}\n\nData: ${JSON.stringify(data_summary)}\n\nPlease provide only the JSON array in your response.`;\n      const apiKey = process.env.REACT_APP_OPENAI_API_KEY;\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-4o',\n          messages: [{\n            role: 'system',\n            content: 'You are a data scientist.'\n          }, {\n            role: 'user',\n            content: prompt\n          }],\n          max_tokens: 500\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error.message);\n      }\n      const data = await response.json();\n      const assistantReply = data.choices[0].message.content.trim();\n      let hypothesesArray;\n      try {\n        const jsonMatch = assistantReply.match(/\\[.*\\]/s);\n        if (jsonMatch) {\n          hypothesesArray = JSON.parse(jsonMatch[0]);\n        } else {\n          hypothesesArray = JSON.parse(assistantReply);\n        }\n      } catch (parseError) {\n        throw new Error(\"Failed to parse hypotheses JSON from the assistant's reply.\");\n      }\n      const hypotheses = hypothesesArray.slice(0, 3);\n      const hypothesesWithId = hypotheses.map(hyp => {\n        const id = generateUniqueId();\n        return {\n          id,\n          ...hyp\n        };\n      });\n      const updatedHypothesesList = [...hypothesesList, ...hypothesesWithId];\n      setHypothesesList(updatedHypothesesList);\n\n      // Root node\n      const rootNode = {\n        id: 'root',\n        level: 0,\n        title: analysisIntent,\n        content: analysisIntent,\n        type: 'root',\n        x: 0,\n        y: 0\n      };\n\n      // Child nodes\n      const childSpacing = 200;\n      const totalWidth = (hypotheses.length - 1) * childSpacing;\n      const startX = rootNode.x - totalWidth / 2;\n      const childNodes = hypothesesWithId.map((hyp, i) => ({\n        id: hyp.id,\n        level: 1,\n        title: hyp.title.trim(),\n        content: hyp.content.trim(),\n        type: 'complex',\n        x: startX + i * childSpacing,\n        y: rootNode.y + 150\n      }));\n      const newNodes = [rootNode, ...childNodes];\n      const newLinks = childNodes.map(nd => ({\n        source: rootNode.id,\n        target: nd.id\n      }));\n      setNodes(newNodes);\n      setLinks(newLinks);\n      setAnalysisIntent('');\n      setIsAnalysisSubmitted(true);\n\n      // 评估\n      await evaluateHypotheses(updatedHypothesesList);\n      setIsGenerating(false);\n    } catch (err) {\n      console.error('Error generating initial hypotheses:', err);\n      setError(err.message);\n      setIsGenerating(false);\n    }\n  };\n\n  // ============ generateChildNodes ============\n  const generateChildNodes = async () => {\n    if (!selectedNode) return;\n    setIsGenerating(true);\n    setError(null);\n    try {\n      const prompt = `Based on the following node content and data, generate exactly three new hypotheses. For each hypothesis, provide a two-word title and a detailed content. Return the hypotheses in JSON format as an array of objects with \"title\" and \"content\" fields.\n\nNode Content: ${selectedNode.content}\n\nData: ${JSON.stringify(data_summary)}\n\nAdditional Context: ${userInput}\n\nPlease provide only the JSON array in your response.`;\n      const apiKey = process.env.REACT_APP_OPENAI_API_KEY;\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-4o',\n          messages: [{\n            role: 'system',\n            content: 'You are a data scientist.'\n          }, {\n            role: 'user',\n            content: prompt\n          }],\n          max_tokens: 500\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error.message);\n      }\n      const data = await response.json();\n      const assistantReply = data.choices[0].message.content.trim();\n      let hypothesesArray;\n      try {\n        const jsonMatch = assistantReply.match(/\\[.*\\]/s);\n        if (jsonMatch) {\n          hypothesesArray = JSON.parse(jsonMatch[0]);\n        } else {\n          hypothesesArray = JSON.parse(assistantReply);\n        }\n      } catch (parseError) {\n        throw new Error(\"Failed to parse hypotheses JSON from the assistant's reply.\");\n      }\n      const hypotheses = hypothesesArray.slice(0, 3);\n      const newHypothesesWithId = hypotheses.map(hyp => {\n        const id = generateUniqueId();\n        return {\n          id,\n          ...hyp\n        };\n      });\n      const updatedHypothesesList = [...hypothesesList, ...newHypothesesWithId];\n      setHypothesesList(updatedHypothesesList);\n\n      // 布局\n      const childSpacing = 200;\n      const totalWidth = (hypotheses.length - 1) * childSpacing;\n      const startX = selectedNode.x - totalWidth / 2;\n      const newNodes = newHypothesesWithId.map((hyp, i) => ({\n        id: hyp.id,\n        level: selectedNode.level + 1,\n        title: hyp.title.trim(),\n        content: hyp.content.trim(),\n        type: 'complex',\n        x: startX + i * childSpacing + Math.random() * 20 - 10,\n        y: selectedNode.y + 150 + Math.random() * 20 - 10\n      }));\n      const newLinks = newNodes.map(nd => ({\n        source: selectedNode.id,\n        target: nd.id\n      }));\n      setNodes(prev => [...prev, ...newNodes]);\n      setLinks(prev => [...prev, ...newLinks]);\n\n      // 评估\n      await evaluateHypotheses(updatedHypothesesList);\n      setIsGenerating(false);\n      setUserInput('');\n    } catch (err) {\n      console.error('Error generating hypotheses:', err);\n      setError(err.message);\n      setIsGenerating(false);\n    }\n  };\n\n  // ============ modifyHypothesisBasedOnModifications ============\n  const modifyHypothesisBasedOnModifications = async (originalNode, ghostNode, modifications) => {\n    setError(null);\n    try {\n      setIsGenerating(true);\n      const modificationsDescriptions = modifications.map(mod => {\n        const metricName = mod.metric === 'noveltyScore' ? 'Novelty' : mod.metric === 'feasibilityScore' ? 'Feasibility' : 'Impact';\n        const direction = mod.direction === 'increase' ? 'increase' : 'decrease';\n        return `${direction} its ${metricName}`;\n      });\n      const modificationsText = modificationsDescriptions.join(' and ');\n      const prompt = `Modify the following hypothesis to significantly ${modificationsText}, while keeping its main idea intact. Provide the modified hypothesis content.\n\nOriginal Hypothesis: ${originalNode.content}\n\nData Summary: ${JSON.stringify(data_summary)}\n\nPlease provide only the modified hypothesis content in your response.`;\n      const apiKey = process.env.REACT_APP_OPENAI_API_KEY;\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-4o',\n          messages: [{\n            role: 'system',\n            content: 'You are a data scientist.'\n          }, {\n            role: 'user',\n            content: prompt\n          }],\n          max_tokens: 500\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error.message);\n      }\n      const data = await response.json();\n      const assistantReply = data.choices[0].message.content.trim();\n      ghostNode.content = assistantReply;\n      ghostNode.isModified = true;\n      ghostNode.previousState = originalNode;\n      ghostNode.isGhost = false;\n      const newHypothesis = {\n        id: ghostNode.id,\n        title: ghostNode.title,\n        content: assistantReply\n      };\n      setHypothesesList(prevList => [...prevList, newHypothesis]);\n      setNodes(prevNodes => prevNodes.map(n => n.id === ghostNode.id ? ghostNode : n));\n      setIsGenerating(false);\n      setIsEvaluating(true);\n      await evaluateHypotheses([...hypothesesList, newHypothesis]);\n    } catch (err) {\n      console.error('Error modifying hypothesis:', err);\n      setError(err.message);\n      setIsGenerating(false);\n    } finally {\n      setIsEvaluating(false);\n    }\n  };\n\n  // ============ handleNodeClick / Hover / Leave ============\n  const handleNodeClick = node => {\n    setSelectedNode(prev => (prev === null || prev === void 0 ? void 0 : prev.id) === node.id ? null : node);\n  };\n  const handleNodeHover = (event, d) => {\n    setHoveredNode(d);\n    d3.select(event.currentTarget).raise();\n  };\n  const handleNodeLeave = () => {\n    setHoveredNode(null);\n  };\n\n  // ============ useEffect for D3 Rendering ============\n  useEffect(() => {\n    if (!svgRef.current) return;\n    const width = 800;\n    const height = 600;\n\n    // 清空 SVG\n    d3.select(svgRef.current).selectAll('*').remove();\n    if (showTree) {\n      // ------------------- Exploration (Tree) View --------------------\n      const svg = d3.select(svgRef.current).attr('width', width).attr('height', height);\n\n      // 卡片背景\n      svg.append('rect').attr('x', 2).attr('y', 2).attr('width', width - 4).attr('height', height - 4).attr('rx', 8).attr('ry', 8).style('fill', '#fff').style('stroke', '#e5e7eb').style('stroke-width', 1).style('filter', 'drop-shadow(0 4px 6px rgba(0,0,0,0.1))');\n\n      // 顶部显示 Root Hypothesis \"Income Inequality\"\n      svg.append('text').attr('x', 24).attr('y', 50).style('font-size', '2rem').style('font-weight', 600).style('fill', '#2563EB').text('Income Inequality');\n\n      // 在卡片内部绘制树\n      const g = svg.append('g').attr('transform', `translate(300, 130)`);\n\n      // 连线\n      links.forEach(link => {\n        const source = nodes.find(n => n.id === link.source);\n        const target = nodes.find(n => n.id === link.target);\n        if (source && target) {\n          g.append('path').attr('d', `M ${source.x},${source.y} C ${source.x},${(source.y + target.y) / 2} \n                 ${target.x},${(source.y + target.y) / 2} \n                 ${target.x},${target.y}`).style('fill', 'none').style('stroke', '#ccc').style('stroke-width', 2);\n        }\n      });\n\n      // 节点\n      const nodeGroups = g.selectAll('.node').data(nodes).enter().append('g').attr('class', 'node').attr('transform', d => `translate(${d.x},${d.y})`);\n      nodeGroups.append('text').attr('dy', 35).attr('text-anchor', 'middle').text(d => d.title).attr('pointer-events', 'none');\n      nodeGroups.append('circle').attr('r', 25).style('fill', d => d.isNewlyGenerated ? '#FFD700' : colorMap[d.type]).style('opacity', d => d.isGhost ? 0.5 : 1).style('stroke', d => {\n        if ((selectedNode === null || selectedNode === void 0 ? void 0 : selectedNode.id) === d.id) return '#000';else if ((hoveredNode === null || hoveredNode === void 0 ? void 0 : hoveredNode.id) === d.id) return '#555';else return '#fff';\n      }).style('stroke-width', d => {\n        if ((selectedNode === null || selectedNode === void 0 ? void 0 : selectedNode.id) === d.id) return 4;else if ((hoveredNode === null || hoveredNode === void 0 ? void 0 : hoveredNode.id) === d.id) return 3;else return 2;\n      }).style('cursor', 'pointer').on('mouseenter', handleNodeHover).on('mouseleave', handleNodeLeave).on('click', (event, d) => handleNodeClick(d));\n\n      // 在卡片底部放三个颜色标识 (蓝/红/黄)\n      const legendG = svg.append('g').attr('transform', `translate(40, ${height - 40})`);\n\n      // Initial Hypothesis (蓝)\n      legendG.append('circle').attr('cx', 0).attr('cy', 0).attr('r', 6).style('fill', '#4C84FF');\n      legendG.append('text').attr('x', 14).attr('y', 4).style('font-size', '0.875rem').style('fill', '#374151').text('Initial Hypothesis');\n\n      // Hypothesis1 (红)\n      legendG.append('circle').attr('cx', 140).attr('cy', 0).attr('r', 6).style('fill', '#FF6B6B');\n      legendG.append('text').attr('x', 154).attr('y', 4).style('font-size', '0.875rem').style('fill', '#374151').text('Hypothesis1');\n\n      // Hypothesis2 (黄)\n      legendG.append('circle').attr('cx', 270).attr('cy', 0).attr('r', 6).style('fill', '#FFD700');\n      legendG.append('text').attr('x', 284).attr('y', 4).style('font-size', '0.875rem').style('fill', '#374151').text('Hypothesis2');\n    } else {\n      // ------------------- Evaluation (Scatter) View --------------------\n      const svg = d3.select(svgRef.current).attr('width', width).attr('height', height);\n\n      // 背景卡片\n      svg.append('rect').attr('x', 2).attr('y', 2).attr('width', width - 4).attr('height', height - 4).attr('rx', 8).attr('ry', 8).style('fill', '#fff').style('stroke', '#e5e7eb').style('stroke-width', 1).style('filter', 'drop-shadow(0 4px 6px rgba(0,0,0,0.1))');\n\n      // 顶部示例文字\n      svg.append('text').attr('x', 24).attr('y', 40).style('font-size', '1rem').style('font-weight', 500).style('fill', '#111827').text('Income Inequality');\n      svg.append('text').attr('x', 24).attr('y', 70).style('font-size', '1.5rem').style('font-weight', 600).style('fill', '#1D4ED8').text('Gender Disparity');\n\n      // 右上角 X/Y 下拉框\n      const axisFO = svg.append('foreignObject').attr('x', width - 210).attr('y', 20).attr('width', 200).attr('height', 60);\n      axisFO.append('xhtml:div').style('display', 'flex').style('flexDirection', 'column').style('gap', '6px').style('fontSize', '0.875rem').html(`\n          <label style=\"color: #374151;\">X-Axis:\n            <select id=\"xSelect\" style=\"margin-left: 6px;\">\n              <option value=\"noveltyScore\">Novelty</option>\n              <option value=\"feasibilityScore\">Feasibility</option>\n              <option value=\"impactScore\">Impact</option>\n            </select>\n          </label>\n          <label style=\"color: #374151;\">Y-Axis:\n            <select id=\"ySelect\" style=\"margin-left: 6px;\">\n              <option value=\"noveltyScore\">Novelty</option>\n              <option value=\"feasibilityScore\">Feasibility</option>\n              <option value=\"impactScore\">Impact</option>\n            </select>\n          </label>\n        `);\n      const xSelectElem = document.getElementById('xSelect');\n      const ySelectElem = document.getElementById('ySelect');\n      if (xSelectElem) xSelectElem.value = xAxisMetric;\n      if (ySelectElem) ySelectElem.value = yAxisMetric;\n      if (xSelectElem) {\n        xSelectElem.onchange = e => setXAxisMetric(e.target.value);\n      }\n      if (ySelectElem) {\n        ySelectElem.onchange = e => setYAxisMetric(e.target.value);\n      }\n      const margin = {\n        top: 100,\n        right: 50,\n        bottom: 80,\n        left: 50\n      };\n      const chartWidth = width - margin.left - margin.right;\n      const chartHeight = height - margin.top - margin.bottom;\n      const g = svg.append('g').attr('transform', `translate(${margin.left}, ${margin.top})`);\n      const xScale = d3.scaleLinear().domain([0, 100]).range([0, chartWidth]);\n      const yScale = d3.scaleLinear().domain([0, 100]).range([chartHeight, 0]);\n      const xAxis = d3.axisBottom(xScale).tickValues(d3.range(0, 101, 20)).tickFormat(d3.format('d'));\n      const yAxis = d3.axisLeft(yScale).tickValues(d3.range(0, 101, 20)).tickFormat(d3.format('d'));\n\n      // grid\n      const xGrid = d3.axisBottom(xScale).tickValues(d3.range(0, 101, 20)).tickSize(-chartHeight).tickFormat('');\n      const yGrid = d3.axisLeft(yScale).tickValues(d3.range(0, 101, 20)).tickSize(-chartWidth).tickFormat('');\n      g.append('g').attr('class', 'x-grid').attr('transform', `translate(0, ${chartHeight})`).call(xGrid).selectAll('.domain').remove();\n      g.append('g').attr('class', 'y-grid').call(yGrid).selectAll('.domain').remove();\n      g.append('g').attr('transform', `translate(0, ${chartHeight})`).call(xAxis);\n      g.append('g').call(yAxis);\n\n      // ① 在 Evaluation View 卡片底部，补充红色 before / 黄色 after\n      const legendEval = svg.append('g').attr('transform', `translate(${margin.left}, ${height - 30})`);\n\n      // 红圆 => Before\n      legendEval.append('circle').attr('cx', 0).attr('cy', 0).attr('r', 5).style('fill', '#FF6B6B');\n      legendEval.append('text').attr('x', 10).attr('y', 4).style('fontSize', '0.875rem').style('fill', '#374151').text('Before');\n\n      // 黄圆 => After\n      legendEval.append('circle').attr('cx', 80).attr('cy', 0).attr('r', 5).style('fill', '#FFC300');\n      legendEval.append('text').attr('x', 90).attr('y', 4).style('fontSize', '0.875rem').style('fill', '#374151').text('After');\n\n      // 仅显示已有分数的节点\n      const filteredNodes = nodes.filter(d => d[xAxisMetric] !== undefined && d[yAxisMetric] !== undefined);\n\n      // 只显示被修改后的连线\n      const evaluationLinks = links.filter(link => {\n        const sourceNode = nodes.find(n => n.id === link.source);\n        const targetNode = nodes.find(n => n.id === link.target);\n        return sourceNode && targetNode && targetNode.isModified;\n      });\n      evaluationLinks.forEach(link => {\n        const source = nodes.find(n => n.id === link.source);\n        const target = nodes.find(n => n.id === link.target);\n        if (source && target) {\n          g.append('line').attr('x1', xScale(source[xAxisMetric])).attr('y1', yScale(source[yAxisMetric])).attr('x2', xScale(target[xAxisMetric])).attr('y2', yScale(target[yAxisMetric])).style('stroke', '#ccc').style('stroke-width', 1);\n        }\n      });\n      const nodeGroups = g.selectAll('.node-group').data(filteredNodes).enter().append('g').attr('class', 'node-group').attr('transform', d => `translate(${xScale(d[xAxisMetric])}, ${yScale(d[yAxisMetric])})`).style('cursor', 'pointer').on('mouseenter', handleNodeHover).on('mouseleave', handleNodeLeave).on('click', (event, d) => handleNodeClick(d)).call(d3.drag().on('start', function (event, d) {\n        if (isGenerating || isEvaluating) return;\n        d3.select(this).raise();\n      }).on('drag', function (event, d) {\n        if (isGenerating || isEvaluating) return;\n        const [xx, yy] = d3.pointer(event, g.node());\n        d3.select(this).attr('transform', `translate(${xx}, ${yy})`);\n      }).on('end', (event, d) => {\n        if (isGenerating || isEvaluating) return;\n        const [xx, yy] = d3.pointer(event, g.node());\n        const newXMetricValue = xScale.invert(xx);\n        const newYMetricValue = yScale.invert(yy);\n        const oldXMetricValue = d[xAxisMetric];\n        const oldYMetricValue = d[yAxisMetric];\n        const deltaX = newXMetricValue - oldXMetricValue;\n        const deltaY = newYMetricValue - oldYMetricValue;\n        let modifications = [];\n        if (Math.abs(deltaX) > 5) {\n          modifications.push({\n            metric: xAxisMetric,\n            direction: deltaX > 0 ? 'increase' : 'decrease'\n          });\n        }\n        if (Math.abs(deltaY) > 5) {\n          modifications.push({\n            metric: yAxisMetric,\n            direction: deltaY > 0 ? 'increase' : 'decrease'\n          });\n        }\n\n        // 复位\n        d3.select(this).attr('transform', `translate(${xScale(d[xAxisMetric])}, ${yScale(d[yAxisMetric])})`);\n        if (modifications.length > 0) {\n          const ghostNodeId = generateUniqueId();\n          const ghostNode = {\n            ...d,\n            id: ghostNodeId,\n            x: d.x,\n            y: d.y,\n            [xAxisMetric]: newXMetricValue,\n            [yAxisMetric]: newYMetricValue,\n            isGhost: true,\n            isNewlyGenerated: true\n          };\n          setNodes(prev => [...prev, ghostNode]);\n          setLinks(prev => [...prev, {\n            source: d.id,\n            target: ghostNodeId\n          }]);\n          modifyHypothesisBasedOnModifications(d, ghostNode, modifications);\n        }\n      }));\n      nodeGroups.append('circle').attr('r', 8).style('fill', d => d.isNewlyGenerated ? '#FFD700' : colorMap[d.type]).style('opacity', d => d.isGhost ? 0.5 : 1).style('stroke', d => {\n        if ((selectedNode === null || selectedNode === void 0 ? void 0 : selectedNode.id) === d.id) return '#000';else if ((hoveredNode === null || hoveredNode === void 0 ? void 0 : hoveredNode.id) === d.id) return '#555';else return '#fff';\n      }).style('stroke-width', d => {\n        if ((selectedNode === null || selectedNode === void 0 ? void 0 : selectedNode.id) === d.id) return 4;else if ((hoveredNode === null || hoveredNode === void 0 ? void 0 : hoveredNode.id) === d.id) return 3;else return 2;\n      });\n    }\n  }, [showTree, nodes, links, selectedNode, hoveredNode, xAxisMetric, yAxisMetric, isGenerating, isEvaluating]);\n\n  // =========================== Dashboard Code ===========================\n  const TopNav = () => {\n    // exploration icon\n    const explorationIcon = /*#__PURE__*/_jsxDEV(\"svg\", {\n      width: \"20\",\n      height: \"20\",\n      viewBox: \"0 0 20 20\",\n      fill: \"none\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      style: {\n        marginRight: '8px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"g\", {\n        clipPath: \"url(#clip0_119_560)\",\n        children: [/*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M8.52543 15.8306C12.2418 15.8306 15.2546 12.8179 15.2546 9.10148C15.2546 5.38508 12.2418 2.37231 8.52543 2.37231C4.80903 2.37231 1.79626 5.38508 1.79626 9.10148C1.79626 12.8179 4.80903 15.8306 8.52543 15.8306Z\",\n          stroke: \"#A2A2A2\",\n          strokeWidth: \"2\",\n          strokeLinejoin: \"round\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 851,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M10.7646 6.46654C10.1915 5.89349 9.39988 5.53906 8.5254 5.53906C7.65097 5.53906 6.8593 5.89349 6.28625 6.46654\",\n          stroke: \"#A2A2A2\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 857,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M13.3632 13.9392L16.7219 17.298\",\n          stroke: \"#A2A2A2\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 864,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 850,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"defs\", {\n        children: /*#__PURE__*/_jsxDEV(\"clipPath\", {\n          id: \"clip0_119_560\",\n          children: /*#__PURE__*/_jsxDEV(\"rect\", {\n            width: \"19\",\n            height: \"19\",\n            fill: \"white\",\n            transform: \"translate(0.212891 0.789062)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 874,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 873,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 872,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 842,\n      columnNumber: 7\n    }, this);\n\n    // evaluation icon\n    const evaluationIcon = /*#__PURE__*/_jsxDEV(\"svg\", {\n      width: \"20\",\n      height: \"20\",\n      viewBox: \"0 0 20 20\",\n      fill: \"none\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      style: {\n        marginRight: '8px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"g\", {\n        children: [/*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M2.47949 2.46533V16.7153H16.7295\",\n          stroke: \"#141414\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 891,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          fillRule: \"evenodd\",\n          clipRule: \"evenodd\",\n          d: \"M8.02114 9.59025C8.89557 9.59025 9.60447 8.88135 9.60447 8.00692C9.60447 7.13248 8.89557 6.42358 8.02114 6.42358C7.1467 6.42358 6.43781 7.13248 6.43781 8.00692C6.43781 8.88135 7.1467 9.59025 8.02114 9.59025Z\",\n          fill: \"#141414\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 898,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          fillRule: \"evenodd\",\n          clipRule: \"evenodd\",\n          d: \"M14.7503 6.42367C15.8434 6.42367 16.7295 5.53755 16.7295 4.4445C16.7295 3.35144 15.8434 2.46533 14.7503 2.46533C13.6573 2.46533 12.7712 3.35144 12.7712 4.4445C12.7712 5.53755 13.6573 6.42367 14.7503 6.42367Z\",\n          fill: \"#141414\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 904,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          fillRule: \"evenodd\",\n          clipRule: \"evenodd\",\n          d: \"M6.04199 14.3403C6.69785 14.3403 7.22949 13.8087 7.22949 13.1528C7.22949 12.497 6.69785 11.9653 6.04199 11.9653C5.38614 11.9653 4.85449 12.497 4.85449 13.1528C4.85449 13.8087 5.38614 14.3403 6.04199 14.3403Z\",\n          fill: \"#141414\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 910,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          fillRule: \"evenodd\",\n          clipRule: \"evenodd\",\n          d: \"M13.167 12.7571C13.8228 12.7571 14.3545 12.2254 14.3545 11.5696C14.3545 10.9137 13.8228 10.3821 13.167 10.3821C12.5111 10.3821 11.9795 10.9137 11.9795 11.5696C11.9795 12.2254 12.5111 12.7571 13.167 12.7571Z\",\n          fill: \"#141414\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 916,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 890,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 882,\n      columnNumber: 7\n    }, this);\n    const tabStyle = {\n      display: 'flex',\n      alignItems: 'center',\n      padding: '10px 16px',\n      cursor: 'pointer',\n      borderRadius: '9999px',\n      transition: 'all 0.2s ease',\n      fontSize: '0.875rem',\n      fontWeight: 500\n    };\n    const explorationActiveStyle = showTree ? {\n      backgroundColor: '#fff',\n      color: '#141414'\n    } : {\n      backgroundColor: 'transparent',\n      color: '#A0AEC0'\n    };\n    const evaluationActiveStyle = !showTree ? {\n      backgroundColor: '#fff',\n      color: '#141414'\n    } : {\n      backgroundColor: 'transparent',\n      color: '#A0AEC0'\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        backgroundColor: '#0F172A',\n        // 类似深色\n        padding: '10px 20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...tabStyle,\n          ...explorationActiveStyle,\n          marginRight: '6px'\n        },\n        onClick: () => setShowTree(true),\n        children: [explorationIcon, \"Exploration View\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 955,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...tabStyle,\n          ...evaluationActiveStyle\n        },\n        onClick: () => setShowTree(false),\n        children: [evaluationIcon, \"Evaluation View\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 961,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 946,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Dashboard 组件\n  const Dashboard = ({\n    node\n  }) => {\n    if (!node) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '24px',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          height: '160px',\n          color: '#9ca3af'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Click on a node to view details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 983,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 973,\n        columnNumber: 9\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '100%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          fontSize: '1.25rem',\n          fontWeight: '700',\n          marginBottom: '1rem',\n          color: '#111827'\n        },\n        children: node.title || 'Hypothesis Title'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 991,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IVDVCard, {\n        node: node\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1003,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ThreeFactorsCard, {\n        node: node\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1006,\n        columnNumber: 9\n      }, this), showTree ?\n      /*#__PURE__*/\n      // Exploration View 下方替换成：Add context + Generate\n      _jsxDEV(ContextAndGenerateCard, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1010,\n        columnNumber: 11\n      }, this) :\n      /*#__PURE__*/\n      // Evaluation View 显示得分对比\n      _jsxDEV(ScoreComparison, {\n        node: node\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1013,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 989,\n      columnNumber: 7\n    }, this);\n  };\n\n  // 1) IV/DV/Relationship 卡片 + 独立 Switch\n  const IVDVCard = ({\n    node\n  }) => {\n    _s();\n    const [isAfterIVDV, setIsAfterIVDV] = useState(true);\n    const SwitchButton = () => /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => setIsAfterIVDV(prev => !prev),\n      style: {\n        position: 'absolute',\n        top: '12px',\n        right: '12px',\n        width: '82px',\n        height: '20px',\n        background: '#EEEEEE',\n        borderRadius: 62,\n        overflow: 'hidden',\n        display: 'flex',\n        cursor: 'pointer'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: 42,\n          height: 17,\n          background: isAfterIVDV ? '#2E2E2E' : '#EEEEEE',\n          borderRadius: 62,\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          transition: 'all 0.2s ease'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: isAfterIVDV ? '#EEEEEE' : '#2E2E2E',\n            fontSize: 10,\n            fontWeight: 500\n          },\n          children: \"After\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1052,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1040,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: 40,\n          height: 20,\n          background: isAfterIVDV ? '#EEEEEE' : '#2E2E2E',\n          borderRadius: 62,\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          transition: 'all 0.2s ease'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: isAfterIVDV ? '#2E2E2E' : '#EEEEEE',\n            fontSize: 10,\n            fontWeight: 500\n          },\n          children: \"Before\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1076,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1064,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1024,\n      columnNumber: 7\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'relative',\n        border: '1px solid #e5e7eb',\n        borderRadius: '8px',\n        backgroundColor: '#FAFAFA',\n        padding: '16px',\n        marginBottom: '16px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(SwitchButton, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '8px',\n          marginBottom: '12px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            backgroundColor: '#ECFDF5',\n            color: '#065F46',\n            padding: '6px 8px',\n            borderRadius: '4px',\n            fontSize: '0.875rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"IV:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1113,\n            columnNumber: 13\n          }, this), \" Gender, Race\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            backgroundColor: '#F0F9FF',\n            color: '#1E3A8A',\n            padding: '6px 8px',\n            borderRadius: '4px',\n            fontSize: '0.875rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"DV:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1124,\n            columnNumber: 13\n          }, this), \" Income\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1115,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: '#F9FAFB',\n          padding: '12px',\n          borderRadius: '6px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '0.875rem',\n            fontWeight: '500',\n            color: '#6b7280',\n            marginBottom: '4px'\n          },\n          children: [\"Relationship / Hypothesis (\", isAfterIVDV ? 'After' : 'Before', \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1136,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '4px',\n            color: '#374151',\n            fontSize: '0.875rem',\n            lineHeight: '1.5',\n            whiteSpace: 'pre-wrap'\n          },\n          children: node.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1146,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1129,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1090,\n      columnNumber: 7\n    }, this);\n  };\n\n  // 2) Novelty / Feasibility / Impact 卡片 + 独立 Switch\n  _s(IVDVCard, \"esM7by/InCUKxTVLf0KFNh9wBUo=\");\n  const ThreeFactorsCard = ({\n    node\n  }) => {\n    _s2();\n    const [isAfterFactors, setIsAfterFactors] = useState(true);\n    const SwitchButton = () => /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => setIsAfterFactors(prev => !prev),\n      style: {\n        position: 'absolute',\n        top: '12px',\n        right: '12px',\n        width: '82px',\n        height: '20px',\n        background: '#EEEEEE',\n        borderRadius: 62,\n        overflow: 'hidden',\n        display: 'flex',\n        cursor: 'pointer'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: 42,\n          height: 17,\n          background: isAfterFactors ? '#2E2E2E' : '#EEEEEE',\n          borderRadius: 62,\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          transition: 'all 0.2s ease'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: isAfterFactors ? '#EEEEEE' : '#2E2E2E',\n            fontSize: 10,\n            fontWeight: 500\n          },\n          children: \"After\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1195,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1183,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: 40,\n          height: 20,\n          background: isAfterFactors ? '#EEEEEE' : '#2E2E2E',\n          borderRadius: 62,\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          transition: 'all 0.2s ease'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: isAfterFactors ? '#2E2E2E' : '#EEEEEE',\n            fontSize: 10,\n            fontWeight: 500\n          },\n          children: \"Before\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1219,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1207,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1167,\n      columnNumber: 7\n    }, this);\n    const noveltyText = node.noveltyText || 'Exploring the gender income dynamics within different racial groups.';\n    const feasibilityText = node.feasibilityText || 'Considering the influence of age, education, and race on income...';\n    const impactText = node.impactText || 'This hypothesis can be evaluated by comparing the average income...';\n    const renderCardItem = (color, title, text) => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        marginBottom: '16px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginRight: '12px',\n          marginTop: '4px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '12px',\n            height: '12px',\n            borderRadius: '50%',\n            backgroundColor: color\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1241,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1240,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color,\n            fontSize: '1rem',\n            fontWeight: '600',\n            marginBottom: '4px'\n          },\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1251,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: '#111827',\n            fontSize: '1rem',\n            lineHeight: '1.4'\n          },\n          children: text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1261,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1250,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1239,\n      columnNumber: 7\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'relative',\n        border: '1px solid #e5e7eb',\n        borderRadius: '8px',\n        backgroundColor: '#FAFAFA',\n        padding: '16px',\n        marginBottom: '16px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(SwitchButton, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1285,\n        columnNumber: 9\n      }, this), renderCardItem('#FB7185', 'Novelty', noveltyText + ` (${isAfterFactors ? 'After' : 'Before'})`), renderCardItem('#FBBF24', 'Feasibility', feasibilityText + ` (${isAfterFactors ? 'After' : 'Before'})`), renderCardItem('#3B82F6', 'Impact', impactText + ` (${isAfterFactors ? 'After' : 'Before'})`)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1275,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Exploration 下方的 Add context + Generate 新卡片（在 Dashboard 最后）\n  _s2(ThreeFactorsCard, \"yAt/Ws9TJgw5tkFkv+J4K4Eat20=\");\n  const ContextAndGenerateCard = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        border: '1px solid #e5e7eb',\n        borderRadius: '8px',\n        backgroundColor: '#FAFAFA',\n        padding: '16px',\n        marginBottom: '16px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '8px',\n          fontSize: '0.875rem',\n          color: '#6b7280'\n        },\n        children: \"Add context for new hypotheses (option)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1307,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        rows: 2,\n        value: userInput,\n        onChange: e => setUserInput(e.target.value),\n        style: {\n          width: '100%',\n          fontSize: '0.875rem',\n          padding: '8px',\n          border: '1px solid #d1d5db',\n          borderRadius: '4px',\n          resize: 'none',\n          marginBottom: '10px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1310,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: generateChildNodes,\n        disabled: !selectedNode || isGenerating || isEvaluating || !isAnalysisSubmitted,\n        style: {\n          padding: '8px 16px',\n          backgroundColor: '#4C84FF',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          fontSize: '0.875rem',\n          cursor: !selectedNode || isGenerating || isEvaluating || !isAnalysisSubmitted ? 'not-allowed' : 'pointer',\n          opacity: !selectedNode || isGenerating || isEvaluating || !isAnalysisSubmitted ? 0.6 : 1\n        },\n        children: \"Generate New Hypotheses\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1325,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1298,\n      columnNumber: 7\n    }, this);\n  };\n\n  // 3) Evaluation 下方分数对比\n  const ScoreComparison = ({\n    node\n  }) => {\n    var _node$previousState$n, _node$noveltyScore, _node$previousState$f, _node$feasibilityScor, _node$previousState$i, _node$impactScore, _node$rankingReason;\n    const hasBefore = !!node.previousState;\n    const noveltyBefore = hasBefore ? (_node$previousState$n = node.previousState.noveltyScore) !== null && _node$previousState$n !== void 0 ? _node$previousState$n : 'N/A' : null;\n    const noveltyAfter = (_node$noveltyScore = node.noveltyScore) !== null && _node$noveltyScore !== void 0 ? _node$noveltyScore : 'N/A';\n    const feasibilityBefore = hasBefore ? (_node$previousState$f = node.previousState.feasibilityScore) !== null && _node$previousState$f !== void 0 ? _node$previousState$f : 'N/A' : null;\n    const feasibilityAfter = (_node$feasibilityScor = node.feasibilityScore) !== null && _node$feasibilityScor !== void 0 ? _node$feasibilityScor : 'N/A';\n    const impactBefore = hasBefore ? (_node$previousState$i = node.previousState.impactScore) !== null && _node$previousState$i !== void 0 ? _node$previousState$i : 'N/A' : null;\n    const impactAfter = (_node$impactScore = node.impactScore) !== null && _node$impactScore !== void 0 ? _node$impactScore : 'N/A';\n\n    // 在最下方补充 Score Reason\n    const reason = (_node$rankingReason = node.rankingReason) !== null && _node$rankingReason !== void 0 ? _node$rankingReason : '(No reason provided)';\n\n    // ③ 如果数字大小相同，则用以下横线icon放在两个数字之间\n    const getArrowDiv = (beforeVal, afterVal) => {\n      const b = parseFloat(beforeVal);\n      const a = parseFloat(afterVal);\n      if (isNaN(b) || isNaN(a)) return null;\n      if (a > b) {\n        // green arrow\n        return /*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"17\",\n          height: \"17\",\n          viewBox: \"0 0 17 17\",\n          fill: \"none\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          style: {\n            margin: '0 6px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"g\", {\n            children: [/*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M7.01221 4.32837L13.0122 4.32837L13.0122 10.3284\",\n              stroke: \"#37A219\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1375,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M4.52682 12.8137L13.0121 4.32845\",\n              stroke: \"#37A219\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1382,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1374,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1366,\n          columnNumber: 11\n        }, this);\n      } else if (a < b) {\n        // red arrow\n        return /*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"17\",\n          height: \"17\",\n          viewBox: \"0 0 17 17\",\n          fill: \"none\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          style: {\n            margin: '0 6px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"g\", {\n            children: [/*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M12.9168 7.19702V13.197H6.91684\",\n              stroke: \"#A21919\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1404,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M4.43146 4.71167L12.9167 13.1969\",\n              stroke: \"#A21919\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1411,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1403,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1395,\n          columnNumber: 11\n        }, this);\n      } else {\n        // 分数相同 -> 横线 icon\n        return /*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"16\",\n          height: \"17\",\n          viewBox: \"0 0 16 17\",\n          fill: \"none\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          style: {\n            margin: '0 6px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"g\", {\n            id: \"Frame\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              id: \"Vector\",\n              d: \"M2.97964 8.17383L13.0204 8.17383\",\n              stroke: \"#A2A2A2\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1433,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1432,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1424,\n          columnNumber: 11\n        }, this);\n      }\n    };\n    const renderMetricCard = (label, color, beforeVal, afterVal) => {\n      const showScore = hasBefore ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          fontSize: '1rem',\n          color: '#374151'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: beforeVal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1450,\n          columnNumber: 11\n        }, this), getArrowDiv(beforeVal, afterVal), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: afterVal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1452,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1449,\n        columnNumber: 9\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '1rem',\n          color: '#374151'\n        },\n        children: [\"Score: \", afterVal]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1455,\n        columnNumber: 9\n      }, this);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: '#F9FAFB',\n          border: '1px solid #E5E7EB',\n          borderRadius: '8px',\n          padding: '16px',\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          gap: '6px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '1rem',\n            fontWeight: '600',\n            color\n          },\n          children: label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1472,\n          columnNumber: 11\n        }, this), showScore, /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '0.875rem',\n            color: '#6b7280',\n            textAlign: 'center',\n            marginTop: '4px',\n            lineHeight: '1.3'\n          },\n          children: reason\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1476,\n          columnNumber: 11\n        }, this)]\n      }, label, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1459,\n        columnNumber: 9\n      }, this);\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gridTemplateColumns: '1fr 1fr 1fr',\n        gap: '16px',\n        marginTop: '16px'\n      },\n      children: [renderMetricCard('Novelty', '#DC2626', noveltyBefore, noveltyAfter), renderMetricCard('Feasibility', '#D97706', feasibilityBefore, feasibilityAfter), renderMetricCard('Impact', '#2563EB', impactBefore, impactAfter)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1492,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      fontFamily: 'Arial, sans-serif'\n    },\n    children: [/*#__PURE__*/_jsxDEV(TopNav, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1510,\n      columnNumber: 7\n    }, this), showTree && !isAnalysisSubmitted && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: '#1f2937',\n        display: 'flex',\n        alignItems: 'center',\n        padding: '10px 20px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleAnalysisIntentSubmit,\n        style: {\n          display: 'flex',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: analysisIntent,\n          onChange: e => setAnalysisIntent(e.target.value),\n          placeholder: \"Enter analysis intent\",\n          style: {\n            padding: '6px 10px',\n            borderRadius: '4px',\n            border: '1px solid #d1d5db',\n            marginRight: '8px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1523,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: isGenerating || isEvaluating,\n          style: {\n            padding: '6px 12px',\n            backgroundColor: '#4C84FF',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: isGenerating || isEvaluating ? 'not-allowed' : 'pointer',\n            opacity: isGenerating || isEvaluating ? 0.7 : 1\n          },\n          children: isEvaluating ? 'Evaluating...' : isGenerating ? 'Generating...' : 'Submit'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1535,\n          columnNumber: 13\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginLeft: '16px',\n            color: '#dc2626',\n            fontSize: '0.875rem'\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1551,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1522,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1514,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        padding: '20px',\n        maxWidth: '1600px',\n        margin: '0 auto',\n        boxSizing: 'border-box'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flexBasis: '60%',\n          marginRight: '20px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          ref: svgRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1569,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1568,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flexBasis: '40%'\n        },\n        children: [(isGenerating || isEvaluating) && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            marginBottom: '10px',\n            color: '#4C84FF'\n          },\n          children: isGenerating ? 'Generating...' : 'Evaluating...'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1575,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Dashboard, {\n          node: nodes.find(n => n.id === ((hoveredNode === null || hoveredNode === void 0 ? void 0 : hoveredNode.id) || (selectedNode === null || selectedNode === void 0 ? void 0 : selectedNode.id)))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1579,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1573,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1558,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1508,\n    columnNumber: 5\n  }, this);\n};\n_s3(TreePlotVisualization, \"IREkl/7wB0HBPSwxnnAuvu9c/lo=\");\n_c = TreePlotVisualization;\nexport default TreePlotVisualization;\nvar _c;\n$RefreshReg$(_c, \"TreePlotVisualization\");","map":{"version":3,"names":["React","useState","useEffect","useRef","d3","data_summary","jsxDEV","_jsxDEV","TreePlotVisualization","_s3","_s","$RefreshSig$","_s2","showTree","setShowTree","nodes","setNodes","links","setLinks","hoveredNode","setHoveredNode","selectedNode","setSelectedNode","userInput","setUserInput","analysisIntent","setAnalysisIntent","isAnalysisSubmitted","setIsAnalysisSubmitted","isGenerating","setIsGenerating","isEvaluating","setIsEvaluating","error","setError","svgRef","hypothesesList","setHypothesesList","xAxisMetric","setXAxisMetric","yAxisMetric","setYAxisMetric","idCounterRef","generateUniqueId","current","colorMap","root","simple","complex","evaluateHypotheses","hypotheses","prompt","JSON","stringify","apiKey","process","env","REACT_APP_OPENAI_API_KEY","response","fetch","method","headers","Authorization","body","model","messages","role","content","max_tokens","ok","errorData","json","Error","message","data","assistantReply","choices","trim","evaluatedHypotheses","jsonMatch","match","parse","parseError","length","rankToScore","rank","total","maxScore","minScore","scoreRange","score","Math","round","prevNodes","map","node","evalHypo","find","h","id","totalHypotheses","noveltyScore","novelty_rank","feasibilityScore","feasibility_rank","impactScore","impact_rank","rankingReason","ranking_reason","err","console","handleAnalysisIntentSubmit","e","preventDefault","hypothesesArray","slice","hypothesesWithId","hyp","updatedHypothesesList","rootNode","level","title","type","x","y","childSpacing","totalWidth","startX","childNodes","i","newNodes","newLinks","nd","source","target","generateChildNodes","newHypothesesWithId","random","prev","modifyHypothesisBasedOnModifications","originalNode","ghostNode","modifications","modificationsDescriptions","mod","metricName","metric","direction","modificationsText","join","isModified","previousState","isGhost","newHypothesis","prevList","n","handleNodeClick","handleNodeHover","event","d","select","currentTarget","raise","handleNodeLeave","width","height","selectAll","remove","svg","attr","append","style","text","g","forEach","link","nodeGroups","enter","isNewlyGenerated","on","legendG","axisFO","html","xSelectElem","document","getElementById","ySelectElem","value","onchange","margin","top","right","bottom","left","chartWidth","chartHeight","xScale","scaleLinear","domain","range","yScale","xAxis","axisBottom","tickValues","tickFormat","format","yAxis","axisLeft","xGrid","tickSize","yGrid","call","legendEval","filteredNodes","filter","undefined","evaluationLinks","sourceNode","targetNode","drag","xx","yy","pointer","newXMetricValue","invert","newYMetricValue","oldXMetricValue","oldYMetricValue","deltaX","deltaY","abs","push","ghostNodeId","TopNav","explorationIcon","viewBox","fill","xmlns","marginRight","children","clipPath","stroke","strokeWidth","strokeLinejoin","fileName","_jsxFileName","lineNumber","columnNumber","strokeLinecap","transform","evaluationIcon","fillRule","clipRule","tabStyle","display","alignItems","padding","cursor","borderRadius","transition","fontSize","fontWeight","explorationActiveStyle","backgroundColor","color","evaluationActiveStyle","onClick","Dashboard","justifyContent","marginBottom","IVDVCard","ThreeFactorsCard","ContextAndGenerateCard","ScoreComparison","isAfterIVDV","setIsAfterIVDV","SwitchButton","position","background","overflow","border","gap","marginTop","lineHeight","whiteSpace","isAfterFactors","setIsAfterFactors","noveltyText","feasibilityText","impactText","renderCardItem","rows","onChange","resize","disabled","opacity","_node$previousState$n","_node$noveltyScore","_node$previousState$f","_node$feasibilityScor","_node$previousState$i","_node$impactScore","_node$rankingReason","hasBefore","noveltyBefore","noveltyAfter","feasibilityBefore","feasibilityAfter","impactBefore","impactAfter","reason","getArrowDiv","beforeVal","afterVal","b","parseFloat","a","isNaN","renderMetricCard","label","showScore","flexDirection","textAlign","gridTemplateColumns","fontFamily","onSubmit","placeholder","marginLeft","maxWidth","boxSizing","flexBasis","ref","_c","$RefreshReg$"],"sources":["/Users/jasonding/Desktop/Hypo-Eval/src/components/TreePlotVisualization.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport data_summary from './data_summary.json'; // 确保有 data_summary.json\n\nconst TreePlotVisualization = () => {\n  const [showTree, setShowTree] = useState(true); // true: Exploration View, false: Evaluation View\n  const [nodes, setNodes] = useState([]);\n  const [links, setLinks] = useState([]);\n  const [hoveredNode, setHoveredNode] = useState(null);\n  const [selectedNode, setSelectedNode] = useState(null);\n  const [userInput, setUserInput] = useState('');\n  const [analysisIntent, setAnalysisIntent] = useState('');\n  const [isAnalysisSubmitted, setIsAnalysisSubmitted] = useState(false);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [isEvaluating, setIsEvaluating] = useState(false);\n  const [error, setError] = useState(null);\n  const svgRef = useRef(null);\n  const [hypothesesList, setHypothesesList] = useState([]);\n\n  // X/Y 轴指标（仅在 Evaluation View 用）\n  const [xAxisMetric, setXAxisMetric] = useState('feasibilityScore');\n  const [yAxisMetric, setYAxisMetric] = useState('noveltyScore');\n\n  // ID 计数器\n  const idCounterRef = useRef(0);\n  const generateUniqueId = () => {\n    idCounterRef.current += 1;\n    return `node-${idCounterRef.current}`;\n  };\n\n  // 配色映射\n  const colorMap = {\n    root: '#4C84FF',\n    simple: '#45B649',\n    complex: '#FF6B6B',\n  };\n\n  // ============ Evaluate Hypotheses ============\n  const evaluateHypotheses = async (hypotheses) => {\n    setIsEvaluating(true);\n    setError(null);\n\n    try {\n      const prompt = `For the following hypotheses, rank **each one individually** based on novelty, feasibility, and impact.\nFeasibility is judged by whether the hypothesis can be represented by the dataset described in the data summary.\nImpact assesses how significant the hypothesis is to the field.\nFor each hypothesis, provide its rank (1 being the highest) in terms of novelty, feasibility, and impact.\nAlso, provide the ranking reasons for each hypothesis.\n**Ensure that you include all hypotheses in your evaluation and do not combine or omit any.**\n**No two hypotheses should have the same rank in any category. Assign unique ranks to each hypothesis in each category to avoid overlaps.**\nReturn the results in JSON format as an array of objects with the following fields:\n- id\n- novelty_rank\n- feasibility_rank\n- impact_rank\n- ranking_reason\n\nHere are the hypotheses:\n${JSON.stringify(hypotheses)}\n\nData summary: ${JSON.stringify(data_summary)}\n\nPlease provide only the JSON array in your response.`;\n\n      const apiKey = process.env.REACT_APP_OPENAI_API_KEY;\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`,\n        },\n        body: JSON.stringify({\n          model: 'gpt-4o',\n          messages: [\n            { role: 'system', content: 'You are a data scientist.' },\n            { role: 'user', content: prompt },\n          ],\n          max_tokens: 2000,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error.message);\n      }\n\n      const data = await response.json();\n      const assistantReply = data.choices[0].message.content.trim();\n\n      let evaluatedHypotheses;\n      try {\n        const jsonMatch = assistantReply.match(/\\[.*\\]/s);\n        if (jsonMatch) {\n          evaluatedHypotheses = JSON.parse(jsonMatch[0]);\n        } else {\n          evaluatedHypotheses = JSON.parse(assistantReply);\n        }\n      } catch (parseError) {\n        throw new Error(\"Failed to parse evaluated hypotheses JSON from the assistant's reply.\");\n      }\n\n      if (evaluatedHypotheses.length !== hypotheses.length) {\n        throw new Error(\n          `Mismatch in number of evaluated hypotheses. Expected ${hypotheses.length}, but got ${evaluatedHypotheses.length}.`\n        );\n      }\n\n      // rank -> score\n      const rankToScore = (rank, total) => {\n        const maxScore = 90;\n        const minScore = 10;\n        const scoreRange = maxScore - minScore;\n        // 分数从高到低\n        const score = maxScore - ((rank - 1) * scoreRange) / (total - 1);\n        return Math.round(score);\n      };\n\n      setNodes((prevNodes) =>\n        prevNodes.map((node) => {\n          const evalHypo = evaluatedHypotheses.find((h) => h.id === node.id);\n          if (evalHypo) {\n            const totalHypotheses = hypotheses.length;\n            const noveltyScore = rankToScore(evalHypo.novelty_rank, totalHypotheses);\n            const feasibilityScore = rankToScore(evalHypo.feasibility_rank, totalHypotheses);\n            const impactScore = rankToScore(evalHypo.impact_rank, totalHypotheses);\n\n            return {\n              ...node,\n              noveltyScore,\n              feasibilityScore,\n              impactScore,\n              rankingReason: evalHypo.ranking_reason,\n            };\n          }\n          return node;\n        })\n      );\n    } catch (err) {\n      console.error('Error evaluating hypotheses:', err);\n      setError(err.message);\n    } finally {\n      setIsEvaluating(false);\n    }\n  };\n\n  // ============ handleAnalysisIntentSubmit ============\n  const handleAnalysisIntentSubmit = async (e) => {\n    e.preventDefault();\n    if (!analysisIntent.trim()) return;\n\n    setIsGenerating(true);\n    setError(null);\n\n    try {\n      const prompt = `Based on the following analysis intent and data, generate exactly three initial hypotheses. For each hypothesis, provide a two-word title and a detailed content. Return the hypotheses in JSON format as an array of objects with \"title\" and \"content\" fields.\n\nAnalysis Intent: ${analysisIntent}\n\nData: ${JSON.stringify(data_summary)}\n\nPlease provide only the JSON array in your response.`;\n\n      const apiKey = process.env.REACT_APP_OPENAI_API_KEY;\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`,\n        },\n        body: JSON.stringify({\n          model: 'gpt-4o',\n          messages: [\n            { role: 'system', content: 'You are a data scientist.' },\n            { role: 'user', content: prompt },\n          ],\n          max_tokens: 500,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error.message);\n      }\n\n      const data = await response.json();\n      const assistantReply = data.choices[0].message.content.trim();\n\n      let hypothesesArray;\n      try {\n        const jsonMatch = assistantReply.match(/\\[.*\\]/s);\n        if (jsonMatch) {\n          hypothesesArray = JSON.parse(jsonMatch[0]);\n        } else {\n          hypothesesArray = JSON.parse(assistantReply);\n        }\n      } catch (parseError) {\n        throw new Error(\"Failed to parse hypotheses JSON from the assistant's reply.\");\n      }\n\n      const hypotheses = hypothesesArray.slice(0, 3);\n      const hypothesesWithId = hypotheses.map((hyp) => {\n        const id = generateUniqueId();\n        return { id, ...hyp };\n      });\n\n      const updatedHypothesesList = [...hypothesesList, ...hypothesesWithId];\n      setHypothesesList(updatedHypothesesList);\n\n      // Root node\n      const rootNode = {\n        id: 'root',\n        level: 0,\n        title: analysisIntent,\n        content: analysisIntent,\n        type: 'root',\n        x: 0,\n        y: 0,\n      };\n\n      // Child nodes\n      const childSpacing = 200;\n      const totalWidth = (hypotheses.length - 1) * childSpacing;\n      const startX = rootNode.x - totalWidth / 2;\n\n      const childNodes = hypothesesWithId.map((hyp, i) => ({\n        id: hyp.id,\n        level: 1,\n        title: hyp.title.trim(),\n        content: hyp.content.trim(),\n        type: 'complex',\n        x: startX + i * childSpacing,\n        y: rootNode.y + 150,\n      }));\n\n      const newNodes = [rootNode, ...childNodes];\n      const newLinks = childNodes.map((nd) => ({ source: rootNode.id, target: nd.id }));\n      setNodes(newNodes);\n      setLinks(newLinks);\n\n      setAnalysisIntent('');\n      setIsAnalysisSubmitted(true);\n\n      // 评估\n      await evaluateHypotheses(updatedHypothesesList);\n      setIsGenerating(false);\n    } catch (err) {\n      console.error('Error generating initial hypotheses:', err);\n      setError(err.message);\n      setIsGenerating(false);\n    }\n  };\n\n  // ============ generateChildNodes ============\n  const generateChildNodes = async () => {\n    if (!selectedNode) return;\n    setIsGenerating(true);\n    setError(null);\n\n    try {\n      const prompt = `Based on the following node content and data, generate exactly three new hypotheses. For each hypothesis, provide a two-word title and a detailed content. Return the hypotheses in JSON format as an array of objects with \"title\" and \"content\" fields.\n\nNode Content: ${selectedNode.content}\n\nData: ${JSON.stringify(data_summary)}\n\nAdditional Context: ${userInput}\n\nPlease provide only the JSON array in your response.`;\n\n      const apiKey = process.env.REACT_APP_OPENAI_API_KEY;\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`,\n        },\n        body: JSON.stringify({\n          model: 'gpt-4o',\n          messages: [\n            { role: 'system', content: 'You are a data scientist.' },\n            { role: 'user', content: prompt },\n          ],\n          max_tokens: 500,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error.message);\n      }\n\n      const data = await response.json();\n      const assistantReply = data.choices[0].message.content.trim();\n\n      let hypothesesArray;\n      try {\n        const jsonMatch = assistantReply.match(/\\[.*\\]/s);\n        if (jsonMatch) {\n          hypothesesArray = JSON.parse(jsonMatch[0]);\n        } else {\n          hypothesesArray = JSON.parse(assistantReply);\n        }\n      } catch (parseError) {\n        throw new Error(\"Failed to parse hypotheses JSON from the assistant's reply.\");\n      }\n\n      const hypotheses = hypothesesArray.slice(0, 3);\n      const newHypothesesWithId = hypotheses.map((hyp) => {\n        const id = generateUniqueId();\n        return { id, ...hyp };\n      });\n\n      const updatedHypothesesList = [...hypothesesList, ...newHypothesesWithId];\n      setHypothesesList(updatedHypothesesList);\n\n      // 布局\n      const childSpacing = 200;\n      const totalWidth = (hypotheses.length - 1) * childSpacing;\n      const startX = selectedNode.x - totalWidth / 2;\n\n      const newNodes = newHypothesesWithId.map((hyp, i) => ({\n        id: hyp.id,\n        level: selectedNode.level + 1,\n        title: hyp.title.trim(),\n        content: hyp.content.trim(),\n        type: 'complex',\n        x: startX + i * childSpacing + Math.random() * 20 - 10,\n        y: selectedNode.y + 150 + Math.random() * 20 - 10,\n      }));\n\n      const newLinks = newNodes.map((nd) => ({ source: selectedNode.id, target: nd.id }));\n      setNodes((prev) => [...prev, ...newNodes]);\n      setLinks((prev) => [...prev, ...newLinks]);\n\n      // 评估\n      await evaluateHypotheses(updatedHypothesesList);\n\n      setIsGenerating(false);\n      setUserInput('');\n    } catch (err) {\n      console.error('Error generating hypotheses:', err);\n      setError(err.message);\n      setIsGenerating(false);\n    }\n  };\n\n  // ============ modifyHypothesisBasedOnModifications ============\n  const modifyHypothesisBasedOnModifications = async (originalNode, ghostNode, modifications) => {\n    setError(null);\n\n    try {\n      setIsGenerating(true);\n\n      const modificationsDescriptions = modifications.map((mod) => {\n        const metricName =\n          mod.metric === 'noveltyScore'\n            ? 'Novelty'\n            : mod.metric === 'feasibilityScore'\n            ? 'Feasibility'\n            : 'Impact';\n        const direction = mod.direction === 'increase' ? 'increase' : 'decrease';\n        return `${direction} its ${metricName}`;\n      });\n\n      const modificationsText = modificationsDescriptions.join(' and ');\n\n      const prompt = `Modify the following hypothesis to significantly ${modificationsText}, while keeping its main idea intact. Provide the modified hypothesis content.\n\nOriginal Hypothesis: ${originalNode.content}\n\nData Summary: ${JSON.stringify(data_summary)}\n\nPlease provide only the modified hypothesis content in your response.`;\n\n      const apiKey = process.env.REACT_APP_OPENAI_API_KEY;\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`,\n        },\n        body: JSON.stringify({\n          model: 'gpt-4o',\n          messages: [\n            { role: 'system', content: 'You are a data scientist.' },\n            { role: 'user', content: prompt },\n          ],\n          max_tokens: 500,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error.message);\n      }\n\n      const data = await response.json();\n      const assistantReply = data.choices[0].message.content.trim();\n\n      ghostNode.content = assistantReply;\n      ghostNode.isModified = true;\n      ghostNode.previousState = originalNode;\n      ghostNode.isGhost = false;\n\n      const newHypothesis = {\n        id: ghostNode.id,\n        title: ghostNode.title,\n        content: assistantReply,\n      };\n      setHypothesesList((prevList) => [...prevList, newHypothesis]);\n\n      setNodes((prevNodes) => prevNodes.map((n) => (n.id === ghostNode.id ? ghostNode : n)));\n      setIsGenerating(false);\n      setIsEvaluating(true);\n\n      await evaluateHypotheses([...hypothesesList, newHypothesis]);\n    } catch (err) {\n      console.error('Error modifying hypothesis:', err);\n      setError(err.message);\n      setIsGenerating(false);\n    } finally {\n      setIsEvaluating(false);\n    }\n  };\n\n  // ============ handleNodeClick / Hover / Leave ============\n  const handleNodeClick = (node) => {\n    setSelectedNode((prev) => (prev?.id === node.id ? null : node));\n  };\n  const handleNodeHover = (event, d) => {\n    setHoveredNode(d);\n    d3.select(event.currentTarget).raise();\n  };\n  const handleNodeLeave = () => {\n    setHoveredNode(null);\n  };\n\n  // ============ useEffect for D3 Rendering ============\n  useEffect(() => {\n    if (!svgRef.current) return;\n\n    const width = 800;\n    const height = 600;\n\n    // 清空 SVG\n    d3.select(svgRef.current).selectAll('*').remove();\n\n    if (showTree) {\n      // ------------------- Exploration (Tree) View --------------------\n      const svg = d3.select(svgRef.current).attr('width', width).attr('height', height);\n\n      // 卡片背景\n      svg\n        .append('rect')\n        .attr('x', 2)\n        .attr('y', 2)\n        .attr('width', width - 4)\n        .attr('height', height - 4)\n        .attr('rx', 8)\n        .attr('ry', 8)\n        .style('fill', '#fff')\n        .style('stroke', '#e5e7eb')\n        .style('stroke-width', 1)\n        .style('filter', 'drop-shadow(0 4px 6px rgba(0,0,0,0.1))');\n\n      // 顶部显示 Root Hypothesis \"Income Inequality\"\n      svg\n        .append('text')\n        .attr('x', 24)\n        .attr('y', 50)\n        .style('font-size', '2rem')\n        .style('font-weight', 600)\n        .style('fill', '#2563EB')\n        .text('Income Inequality');\n\n      // 在卡片内部绘制树\n      const g = svg.append('g').attr('transform', `translate(300, 130)`);\n\n      // 连线\n      links.forEach((link) => {\n        const source = nodes.find((n) => n.id === link.source);\n        const target = nodes.find((n) => n.id === link.target);\n        if (source && target) {\n          g.append('path')\n            .attr(\n              'd',\n              `M ${source.x},${source.y} C ${source.x},${(source.y + target.y) / 2} \n                 ${target.x},${(source.y + target.y) / 2} \n                 ${target.x},${target.y}`\n            )\n            .style('fill', 'none')\n            .style('stroke', '#ccc')\n            .style('stroke-width', 2);\n        }\n      });\n\n      // 节点\n      const nodeGroups = g\n        .selectAll('.node')\n        .data(nodes)\n        .enter()\n        .append('g')\n        .attr('class', 'node')\n        .attr('transform', (d) => `translate(${d.x},${d.y})`);\n\n      nodeGroups\n        .append('text')\n        .attr('dy', 35)\n        .attr('text-anchor', 'middle')\n        .text((d) => d.title)\n        .attr('pointer-events', 'none');\n\n      nodeGroups\n        .append('circle')\n        .attr('r', 25)\n        .style('fill', (d) => (d.isNewlyGenerated ? '#FFD700' : colorMap[d.type]))\n        .style('opacity', (d) => (d.isGhost ? 0.5 : 1))\n        .style('stroke', (d) => {\n          if (selectedNode?.id === d.id) return '#000';\n          else if (hoveredNode?.id === d.id) return '#555';\n          else return '#fff';\n        })\n        .style('stroke-width', (d) => {\n          if (selectedNode?.id === d.id) return 4;\n          else if (hoveredNode?.id === d.id) return 3;\n          else return 2;\n        })\n        .style('cursor', 'pointer')\n        .on('mouseenter', handleNodeHover)\n        .on('mouseleave', handleNodeLeave)\n        .on('click', (event, d) => handleNodeClick(d));\n\n      // 在卡片底部放三个颜色标识 (蓝/红/黄)\n      const legendG = svg.append('g').attr('transform', `translate(40, ${height - 40})`);\n\n      // Initial Hypothesis (蓝)\n      legendG\n        .append('circle')\n        .attr('cx', 0)\n        .attr('cy', 0)\n        .attr('r', 6)\n        .style('fill', '#4C84FF');\n      legendG\n        .append('text')\n        .attr('x', 14)\n        .attr('y', 4)\n        .style('font-size', '0.875rem')\n        .style('fill', '#374151')\n        .text('Initial Hypothesis');\n\n      // Hypothesis1 (红)\n      legendG\n        .append('circle')\n        .attr('cx', 140)\n        .attr('cy', 0)\n        .attr('r', 6)\n        .style('fill', '#FF6B6B');\n      legendG\n        .append('text')\n        .attr('x', 154)\n        .attr('y', 4)\n        .style('font-size', '0.875rem')\n        .style('fill', '#374151')\n        .text('Hypothesis1');\n\n      // Hypothesis2 (黄)\n      legendG\n        .append('circle')\n        .attr('cx', 270)\n        .attr('cy', 0)\n        .attr('r', 6)\n        .style('fill', '#FFD700');\n      legendG\n        .append('text')\n        .attr('x', 284)\n        .attr('y', 4)\n        .style('font-size', '0.875rem')\n        .style('fill', '#374151')\n        .text('Hypothesis2');\n    } else {\n      // ------------------- Evaluation (Scatter) View --------------------\n      const svg = d3.select(svgRef.current).attr('width', width).attr('height', height);\n\n      // 背景卡片\n      svg\n        .append('rect')\n        .attr('x', 2)\n        .attr('y', 2)\n        .attr('width', width - 4)\n        .attr('height', height - 4)\n        .attr('rx', 8)\n        .attr('ry', 8)\n        .style('fill', '#fff')\n        .style('stroke', '#e5e7eb')\n        .style('stroke-width', 1)\n        .style('filter', 'drop-shadow(0 4px 6px rgba(0,0,0,0.1))');\n\n      // 顶部示例文字\n      svg\n        .append('text')\n        .attr('x', 24)\n        .attr('y', 40)\n        .style('font-size', '1rem')\n        .style('font-weight', 500)\n        .style('fill', '#111827')\n        .text('Income Inequality');\n\n      svg\n        .append('text')\n        .attr('x', 24)\n        .attr('y', 70)\n        .style('font-size', '1.5rem')\n        .style('font-weight', 600)\n        .style('fill', '#1D4ED8')\n        .text('Gender Disparity');\n\n      // 右上角 X/Y 下拉框\n      const axisFO = svg\n        .append('foreignObject')\n        .attr('x', width - 210)\n        .attr('y', 20)\n        .attr('width', 200)\n        .attr('height', 60);\n\n      axisFO\n        .append('xhtml:div')\n        .style('display', 'flex')\n        .style('flexDirection', 'column')\n        .style('gap', '6px')\n        .style('fontSize', '0.875rem')\n        .html(`\n          <label style=\"color: #374151;\">X-Axis:\n            <select id=\"xSelect\" style=\"margin-left: 6px;\">\n              <option value=\"noveltyScore\">Novelty</option>\n              <option value=\"feasibilityScore\">Feasibility</option>\n              <option value=\"impactScore\">Impact</option>\n            </select>\n          </label>\n          <label style=\"color: #374151;\">Y-Axis:\n            <select id=\"ySelect\" style=\"margin-left: 6px;\">\n              <option value=\"noveltyScore\">Novelty</option>\n              <option value=\"feasibilityScore\">Feasibility</option>\n              <option value=\"impactScore\">Impact</option>\n            </select>\n          </label>\n        `);\n\n      const xSelectElem = document.getElementById('xSelect');\n      const ySelectElem = document.getElementById('ySelect');\n      if (xSelectElem) xSelectElem.value = xAxisMetric;\n      if (ySelectElem) ySelectElem.value = yAxisMetric;\n\n      if (xSelectElem) {\n        xSelectElem.onchange = (e) => setXAxisMetric(e.target.value);\n      }\n      if (ySelectElem) {\n        ySelectElem.onchange = (e) => setYAxisMetric(e.target.value);\n      }\n\n      const margin = { top: 100, right: 50, bottom: 80, left: 50 };\n      const chartWidth = width - margin.left - margin.right;\n      const chartHeight = height - margin.top - margin.bottom;\n\n      const g = svg.append('g').attr('transform', `translate(${margin.left}, ${margin.top})`);\n\n      const xScale = d3.scaleLinear().domain([0, 100]).range([0, chartWidth]);\n      const yScale = d3.scaleLinear().domain([0, 100]).range([chartHeight, 0]);\n\n      const xAxis = d3\n        .axisBottom(xScale)\n        .tickValues(d3.range(0, 101, 20))\n        .tickFormat(d3.format('d'));\n      const yAxis = d3\n        .axisLeft(yScale)\n        .tickValues(d3.range(0, 101, 20))\n        .tickFormat(d3.format('d'));\n\n      // grid\n      const xGrid = d3.axisBottom(xScale).tickValues(d3.range(0, 101, 20)).tickSize(-chartHeight).tickFormat('');\n      const yGrid = d3.axisLeft(yScale).tickValues(d3.range(0, 101, 20)).tickSize(-chartWidth).tickFormat('');\n\n      g.append('g').attr('class', 'x-grid').attr('transform', `translate(0, ${chartHeight})`).call(xGrid).selectAll('.domain').remove();\n      g.append('g').attr('class', 'y-grid').call(yGrid).selectAll('.domain').remove();\n\n      g.append('g').attr('transform', `translate(0, ${chartHeight})`).call(xAxis);\n      g.append('g').call(yAxis);\n\n      // ① 在 Evaluation View 卡片底部，补充红色 before / 黄色 after\n      const legendEval = svg.append('g').attr('transform', `translate(${margin.left}, ${height - 30})`);\n\n      // 红圆 => Before\n      legendEval\n        .append('circle')\n        .attr('cx', 0)\n        .attr('cy', 0)\n        .attr('r', 5)\n        .style('fill', '#FF6B6B');\n      legendEval\n        .append('text')\n        .attr('x', 10)\n        .attr('y', 4)\n        .style('fontSize', '0.875rem')\n        .style('fill', '#374151')\n        .text('Before');\n\n      // 黄圆 => After\n      legendEval\n        .append('circle')\n        .attr('cx', 80)\n        .attr('cy', 0)\n        .attr('r', 5)\n        .style('fill', '#FFC300');\n      legendEval\n        .append('text')\n        .attr('x', 90)\n        .attr('y', 4)\n        .style('fontSize', '0.875rem')\n        .style('fill', '#374151')\n        .text('After');\n\n      // 仅显示已有分数的节点\n      const filteredNodes = nodes.filter((d) => d[xAxisMetric] !== undefined && d[yAxisMetric] !== undefined);\n\n      // 只显示被修改后的连线\n      const evaluationLinks = links.filter((link) => {\n        const sourceNode = nodes.find((n) => n.id === link.source);\n        const targetNode = nodes.find((n) => n.id === link.target);\n        return sourceNode && targetNode && targetNode.isModified;\n      });\n\n      evaluationLinks.forEach((link) => {\n        const source = nodes.find((n) => n.id === link.source);\n        const target = nodes.find((n) => n.id === link.target);\n        if (source && target) {\n          g.append('line')\n            .attr('x1', xScale(source[xAxisMetric]))\n            .attr('y1', yScale(source[yAxisMetric]))\n            .attr('x2', xScale(target[xAxisMetric]))\n            .attr('y2', yScale(target[yAxisMetric]))\n            .style('stroke', '#ccc')\n            .style('stroke-width', 1);\n        }\n      });\n\n      const nodeGroups = g\n        .selectAll('.node-group')\n        .data(filteredNodes)\n        .enter()\n        .append('g')\n        .attr('class', 'node-group')\n        .attr('transform', (d) => `translate(${xScale(d[xAxisMetric])}, ${yScale(d[yAxisMetric])})`)\n        .style('cursor', 'pointer')\n        .on('mouseenter', handleNodeHover)\n        .on('mouseleave', handleNodeLeave)\n        .on('click', (event, d) => handleNodeClick(d))\n        .call(\n          d3\n            .drag()\n            .on('start', function (event, d) {\n              if (isGenerating || isEvaluating) return;\n              d3.select(this).raise();\n            })\n            .on('drag', function (event, d) {\n              if (isGenerating || isEvaluating) return;\n              const [xx, yy] = d3.pointer(event, g.node());\n              d3.select(this).attr('transform', `translate(${xx}, ${yy})`);\n            })\n            .on('end', (event, d) => {\n              if (isGenerating || isEvaluating) return;\n              const [xx, yy] = d3.pointer(event, g.node());\n              const newXMetricValue = xScale.invert(xx);\n              const newYMetricValue = yScale.invert(yy);\n\n              const oldXMetricValue = d[xAxisMetric];\n              const oldYMetricValue = d[yAxisMetric];\n              const deltaX = newXMetricValue - oldXMetricValue;\n              const deltaY = newYMetricValue - oldYMetricValue;\n\n              let modifications = [];\n              if (Math.abs(deltaX) > 5) {\n                modifications.push({ metric: xAxisMetric, direction: deltaX > 0 ? 'increase' : 'decrease' });\n              }\n              if (Math.abs(deltaY) > 5) {\n                modifications.push({ metric: yAxisMetric, direction: deltaY > 0 ? 'increase' : 'decrease' });\n              }\n\n              // 复位\n              d3.select(this).attr('transform', `translate(${xScale(d[xAxisMetric])}, ${yScale(d[yAxisMetric])})`);\n\n              if (modifications.length > 0) {\n                const ghostNodeId = generateUniqueId();\n                const ghostNode = {\n                  ...d,\n                  id: ghostNodeId,\n                  x: d.x,\n                  y: d.y,\n                  [xAxisMetric]: newXMetricValue,\n                  [yAxisMetric]: newYMetricValue,\n                  isGhost: true,\n                  isNewlyGenerated: true,\n                };\n\n                setNodes((prev) => [...prev, ghostNode]);\n                setLinks((prev) => [...prev, { source: d.id, target: ghostNodeId }]);\n                modifyHypothesisBasedOnModifications(d, ghostNode, modifications);\n              }\n            })\n        );\n\n      nodeGroups\n        .append('circle')\n        .attr('r', 8)\n        .style('fill', (d) => (d.isNewlyGenerated ? '#FFD700' : colorMap[d.type]))\n        .style('opacity', (d) => (d.isGhost ? 0.5 : 1))\n        .style('stroke', (d) => {\n          if (selectedNode?.id === d.id) return '#000';\n          else if (hoveredNode?.id === d.id) return '#555';\n          else return '#fff';\n        })\n        .style('stroke-width', (d) => {\n          if (selectedNode?.id === d.id) return 4;\n          else if (hoveredNode?.id === d.id) return 3;\n          else return 2;\n        });\n    }\n  }, [\n    showTree,\n    nodes,\n    links,\n    selectedNode,\n    hoveredNode,\n    xAxisMetric,\n    yAxisMetric,\n    isGenerating,\n    isEvaluating,\n  ]);\n\n  // =========================== Dashboard Code ===========================\n  const TopNav = () => {\n    // exploration icon\n    const explorationIcon = (\n      <svg\n        width=\"20\"\n        height=\"20\"\n        viewBox=\"0 0 20 20\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        style={{ marginRight: '8px' }}\n      >\n        <g clipPath=\"url(#clip0_119_560)\">\n          <path\n            d=\"M8.52543 15.8306C12.2418 15.8306 15.2546 12.8179 15.2546 9.10148C15.2546 5.38508 12.2418 2.37231 8.52543 2.37231C4.80903 2.37231 1.79626 5.38508 1.79626 9.10148C1.79626 12.8179 4.80903 15.8306 8.52543 15.8306Z\"\n            stroke=\"#A2A2A2\"\n            strokeWidth=\"2\"\n            strokeLinejoin=\"round\"\n          />\n          <path\n            d=\"M10.7646 6.46654C10.1915 5.89349 9.39988 5.53906 8.5254 5.53906C7.65097 5.53906 6.8593 5.89349 6.28625 6.46654\"\n            stroke=\"#A2A2A2\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n          />\n          <path\n            d=\"M13.3632 13.9392L16.7219 17.298\"\n            stroke=\"#A2A2A2\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n          />\n        </g>\n        <defs>\n          <clipPath id=\"clip0_119_560\">\n            <rect width=\"19\" height=\"19\" fill=\"white\" transform=\"translate(0.212891 0.789062)\" />\n          </clipPath>\n        </defs>\n      </svg>\n    );\n\n    // evaluation icon\n    const evaluationIcon = (\n      <svg\n        width=\"20\"\n        height=\"20\"\n        viewBox=\"0 0 20 20\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        style={{ marginRight: '8px' }}\n      >\n        <g>\n          <path\n            d=\"M2.47949 2.46533V16.7153H16.7295\"\n            stroke=\"#141414\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n          />\n          <path\n            fillRule=\"evenodd\"\n            clipRule=\"evenodd\"\n            d=\"M8.02114 9.59025C8.89557 9.59025 9.60447 8.88135 9.60447 8.00692C9.60447 7.13248 8.89557 6.42358 8.02114 6.42358C7.1467 6.42358 6.43781 7.13248 6.43781 8.00692C6.43781 8.88135 7.1467 9.59025 8.02114 9.59025Z\"\n            fill=\"#141414\"\n          />\n          <path\n            fillRule=\"evenodd\"\n            clipRule=\"evenodd\"\n            d=\"M14.7503 6.42367C15.8434 6.42367 16.7295 5.53755 16.7295 4.4445C16.7295 3.35144 15.8434 2.46533 14.7503 2.46533C13.6573 2.46533 12.7712 3.35144 12.7712 4.4445C12.7712 5.53755 13.6573 6.42367 14.7503 6.42367Z\"\n            fill=\"#141414\"\n          />\n          <path\n            fillRule=\"evenodd\"\n            clipRule=\"evenodd\"\n            d=\"M6.04199 14.3403C6.69785 14.3403 7.22949 13.8087 7.22949 13.1528C7.22949 12.497 6.69785 11.9653 6.04199 11.9653C5.38614 11.9653 4.85449 12.497 4.85449 13.1528C4.85449 13.8087 5.38614 14.3403 6.04199 14.3403Z\"\n            fill=\"#141414\"\n          />\n          <path\n            fillRule=\"evenodd\"\n            clipRule=\"evenodd\"\n            d=\"M13.167 12.7571C13.8228 12.7571 14.3545 12.2254 14.3545 11.5696C14.3545 10.9137 13.8228 10.3821 13.167 10.3821C12.5111 10.3821 11.9795 10.9137 11.9795 11.5696C11.9795 12.2254 12.5111 12.7571 13.167 12.7571Z\"\n            fill=\"#141414\"\n          />\n        </g>\n      </svg>\n    );\n\n    const tabStyle = {\n      display: 'flex',\n      alignItems: 'center',\n      padding: '10px 16px',\n      cursor: 'pointer',\n      borderRadius: '9999px',\n      transition: 'all 0.2s ease',\n      fontSize: '0.875rem',\n      fontWeight: 500,\n    };\n\n    const explorationActiveStyle = showTree\n      ? { backgroundColor: '#fff', color: '#141414' }\n      : { backgroundColor: 'transparent', color: '#A0AEC0' };\n\n    const evaluationActiveStyle = !showTree\n      ? { backgroundColor: '#fff', color: '#141414' }\n      : { backgroundColor: 'transparent', color: '#A0AEC0' };\n\n    return (\n      <div\n        style={{\n          display: 'flex',\n          alignItems: 'center',\n          backgroundColor: '#0F172A', // 类似深色\n          padding: '10px 20px',\n        }}\n      >\n        {/* Exploration View Tab */}\n        <div style={{ ...tabStyle, ...explorationActiveStyle, marginRight: '6px' }} onClick={() => setShowTree(true)}>\n          {explorationIcon}\n          Exploration View\n        </div>\n\n        {/* Evaluation View Tab */}\n        <div style={{ ...tabStyle, ...evaluationActiveStyle }} onClick={() => setShowTree(false)}>\n          {evaluationIcon}\n          Evaluation View\n        </div>\n      </div>\n    );\n  };\n\n  // Dashboard 组件\n  const Dashboard = ({ node }) => {\n    if (!node) {\n      return (\n        <div\n          style={{\n            padding: '24px',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            height: '160px',\n            color: '#9ca3af',\n          }}\n        >\n          <p>Click on a node to view details</p>\n        </div>\n      );\n    }\n\n    return (\n      <div style={{ width: '100%' }}>\n        {/* Dashboard 标题 */}\n        <h2\n          style={{\n            fontSize: '1.25rem',\n            fontWeight: '700',\n            marginBottom: '1rem',\n            color: '#111827',\n          }}\n        >\n          {node.title || 'Hypothesis Title'}\n        </h2>\n\n        {/* IV / DV 卡片（独立 Switch） */}\n        <IVDVCard node={node} />\n\n        {/* Novelty / Feasibility / Impact 卡片（独立 Switch） */}\n        <ThreeFactorsCard node={node} />\n\n        {showTree ? (\n          // Exploration View 下方替换成：Add context + Generate\n          <ContextAndGenerateCard />\n        ) : (\n          // Evaluation View 显示得分对比\n          <ScoreComparison node={node} />\n        )}\n      </div>\n    );\n  };\n\n  // 1) IV/DV/Relationship 卡片 + 独立 Switch\n  const IVDVCard = ({ node }) => {\n    const [isAfterIVDV, setIsAfterIVDV] = useState(true);\n\n    const SwitchButton = () => (\n      <div\n        onClick={() => setIsAfterIVDV((prev) => !prev)}\n        style={{\n          position: 'absolute',\n          top: '12px',\n          right: '12px',\n          width: '82px',\n          height: '20px',\n          background: '#EEEEEE',\n          borderRadius: 62,\n          overflow: 'hidden',\n          display: 'flex',\n          cursor: 'pointer',\n        }}\n      >\n        {/* After */}\n        <div\n          style={{\n            width: 42,\n            height: 17,\n            background: isAfterIVDV ? '#2E2E2E' : '#EEEEEE',\n            borderRadius: 62,\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            transition: 'all 0.2s ease',\n          }}\n        >\n          <div\n            style={{\n              color: isAfterIVDV ? '#EEEEEE' : '#2E2E2E',\n              fontSize: 10,\n              fontWeight: 500,\n            }}\n          >\n            After\n          </div>\n        </div>\n\n        {/* Before */}\n        <div\n          style={{\n            width: 40,\n            height: 20,\n            background: isAfterIVDV ? '#EEEEEE' : '#2E2E2E',\n            borderRadius: 62,\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            transition: 'all 0.2s ease',\n          }}\n        >\n          <div\n            style={{\n              color: isAfterIVDV ? '#2E2E2E' : '#EEEEEE',\n              fontSize: 10,\n              fontWeight: 500,\n            }}\n          >\n            Before\n          </div>\n        </div>\n      </div>\n    );\n\n    return (\n      <div\n        style={{\n          position: 'relative',\n          border: '1px solid #e5e7eb',\n          borderRadius: '8px',\n          backgroundColor: '#FAFAFA',\n          padding: '16px',\n          marginBottom: '16px',\n        }}\n      >\n        <SwitchButton />\n\n        {/* IV / DV */}\n        <div style={{ display: 'flex', gap: '8px', marginBottom: '12px' }}>\n          <div\n            style={{\n              backgroundColor: '#ECFDF5',\n              color: '#065F46',\n              padding: '6px 8px',\n              borderRadius: '4px',\n              fontSize: '0.875rem',\n            }}\n          >\n            <strong>IV:</strong> Gender, Race\n          </div>\n          <div\n            style={{\n              backgroundColor: '#F0F9FF',\n              color: '#1E3A8A',\n              padding: '6px 8px',\n              borderRadius: '4px',\n              fontSize: '0.875rem',\n            }}\n          >\n            <strong>DV:</strong> Income\n          </div>\n        </div>\n\n        {/* Relationship */}\n        <div\n          style={{\n            backgroundColor: '#F9FAFB',\n            padding: '12px',\n            borderRadius: '6px',\n          }}\n        >\n          <div\n            style={{\n              fontSize: '0.875rem',\n              fontWeight: '500',\n              color: '#6b7280',\n              marginBottom: '4px',\n            }}\n          >\n            Relationship / Hypothesis ({isAfterIVDV ? 'After' : 'Before'})\n          </div>\n          <div\n            style={{\n              marginTop: '4px',\n              color: '#374151',\n              fontSize: '0.875rem',\n              lineHeight: '1.5',\n              whiteSpace: 'pre-wrap',\n            }}\n          >\n            {node.content}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  // 2) Novelty / Feasibility / Impact 卡片 + 独立 Switch\n  const ThreeFactorsCard = ({ node }) => {\n    const [isAfterFactors, setIsAfterFactors] = useState(true);\n\n    const SwitchButton = () => (\n      <div\n        onClick={() => setIsAfterFactors((prev) => !prev)}\n        style={{\n          position: 'absolute',\n          top: '12px',\n          right: '12px',\n          width: '82px',\n          height: '20px',\n          background: '#EEEEEE',\n          borderRadius: 62,\n          overflow: 'hidden',\n          display: 'flex',\n          cursor: 'pointer',\n        }}\n      >\n        {/* After */}\n        <div\n          style={{\n            width: 42,\n            height: 17,\n            background: isAfterFactors ? '#2E2E2E' : '#EEEEEE',\n            borderRadius: 62,\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            transition: 'all 0.2s ease',\n          }}\n        >\n          <div\n            style={{\n              color: isAfterFactors ? '#EEEEEE' : '#2E2E2E',\n              fontSize: 10,\n              fontWeight: 500,\n            }}\n          >\n            After\n          </div>\n        </div>\n\n        {/* Before */}\n        <div\n          style={{\n            width: 40,\n            height: 20,\n            background: isAfterFactors ? '#EEEEEE' : '#2E2E2E',\n            borderRadius: 62,\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            transition: 'all 0.2s ease',\n          }}\n        >\n          <div\n            style={{\n              color: isAfterFactors ? '#2E2E2E' : '#EEEEEE',\n              fontSize: 10,\n              fontWeight: 500,\n            }}\n          >\n            Before\n          </div>\n        </div>\n      </div>\n    );\n\n    const noveltyText = node.noveltyText || 'Exploring the gender income dynamics within different racial groups.';\n    const feasibilityText =\n      node.feasibilityText || 'Considering the influence of age, education, and race on income...';\n    const impactText =\n      node.impactText || 'This hypothesis can be evaluated by comparing the average income...';\n\n    const renderCardItem = (color, title, text) => (\n      <div style={{ display: 'flex', marginBottom: '16px' }}>\n        <div style={{ marginRight: '12px', marginTop: '4px' }}>\n          <div\n            style={{\n              width: '12px',\n              height: '12px',\n              borderRadius: '50%',\n              backgroundColor: color,\n            }}\n          ></div>\n        </div>\n        <div>\n          <div\n            style={{\n              color,\n              fontSize: '1rem',\n              fontWeight: '600',\n              marginBottom: '4px',\n            }}\n          >\n            {title}\n          </div>\n          <div\n            style={{\n              color: '#111827',\n              fontSize: '1rem',\n              lineHeight: '1.4',\n            }}\n          >\n            {text}\n          </div>\n        </div>\n      </div>\n    );\n\n    return (\n      <div\n        style={{\n          position: 'relative',\n          border: '1px solid #e5e7eb',\n          borderRadius: '8px',\n          backgroundColor: '#FAFAFA',\n          padding: '16px',\n          marginBottom: '16px',\n        }}\n      >\n        <SwitchButton />\n\n        {/* 三要素 */}\n        {renderCardItem('#FB7185', 'Novelty', noveltyText + ` (${isAfterFactors ? 'After' : 'Before'})`)}\n        {renderCardItem('#FBBF24', 'Feasibility', feasibilityText + ` (${isAfterFactors ? 'After' : 'Before'})`)}\n        {renderCardItem('#3B82F6', 'Impact', impactText + ` (${isAfterFactors ? 'After' : 'Before'})`)}\n      </div>\n    );\n  };\n\n  // Exploration 下方的 Add context + Generate 新卡片（在 Dashboard 最后）\n  const ContextAndGenerateCard = () => {\n    return (\n      <div\n        style={{\n          border: '1px solid #e5e7eb',\n          borderRadius: '8px',\n          backgroundColor: '#FAFAFA',\n          padding: '16px',\n          marginBottom: '16px',\n        }}\n      >\n        <div style={{ marginBottom: '8px', fontSize: '0.875rem', color: '#6b7280' }}>\n          Add context for new hypotheses (option)\n        </div>\n        <textarea\n          rows={2}\n          value={userInput}\n          onChange={(e) => setUserInput(e.target.value)}\n          style={{\n            width: '100%',\n            fontSize: '0.875rem',\n            padding: '8px',\n            border: '1px solid #d1d5db',\n            borderRadius: '4px',\n            resize: 'none',\n            marginBottom: '10px',\n          }}\n        />\n\n        <button\n          onClick={generateChildNodes}\n          disabled={!selectedNode || isGenerating || isEvaluating || !isAnalysisSubmitted}\n          style={{\n            padding: '8px 16px',\n            backgroundColor: '#4C84FF',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            fontSize: '0.875rem',\n            cursor: !selectedNode || isGenerating || isEvaluating || !isAnalysisSubmitted ? 'not-allowed' : 'pointer',\n            opacity: !selectedNode || isGenerating || isEvaluating || !isAnalysisSubmitted ? 0.6 : 1,\n          }}\n        >\n          Generate New Hypotheses\n        </button>\n      </div>\n    );\n  };\n\n  // 3) Evaluation 下方分数对比\n  const ScoreComparison = ({ node }) => {\n    const hasBefore = !!node.previousState;\n    const noveltyBefore = hasBefore ? node.previousState.noveltyScore ?? 'N/A' : null;\n    const noveltyAfter = node.noveltyScore ?? 'N/A';\n    const feasibilityBefore = hasBefore ? node.previousState.feasibilityScore ?? 'N/A' : null;\n    const feasibilityAfter = node.feasibilityScore ?? 'N/A';\n    const impactBefore = hasBefore ? node.previousState.impactScore ?? 'N/A' : null;\n    const impactAfter = node.impactScore ?? 'N/A';\n\n    // 在最下方补充 Score Reason\n    const reason = node.rankingReason ?? '(No reason provided)';\n\n    // ③ 如果数字大小相同，则用以下横线icon放在两个数字之间\n    const getArrowDiv = (beforeVal, afterVal) => {\n      const b = parseFloat(beforeVal);\n      const a = parseFloat(afterVal);\n      if (isNaN(b) || isNaN(a)) return null;\n      if (a > b) {\n        // green arrow\n        return (\n          <svg\n            width=\"17\"\n            height=\"17\"\n            viewBox=\"0 0 17 17\"\n            fill=\"none\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            style={{ margin: '0 6px' }}\n          >\n            <g>\n              <path\n                d=\"M7.01221 4.32837L13.0122 4.32837L13.0122 10.3284\"\n                stroke=\"#37A219\"\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n              />\n              <path\n                d=\"M4.52682 12.8137L13.0121 4.32845\"\n                stroke=\"#37A219\"\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n              />\n            </g>\n          </svg>\n        );\n      } else if (a < b) {\n        // red arrow\n        return (\n          <svg\n            width=\"17\"\n            height=\"17\"\n            viewBox=\"0 0 17 17\"\n            fill=\"none\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            style={{ margin: '0 6px' }}\n          >\n            <g>\n              <path\n                d=\"M12.9168 7.19702V13.197H6.91684\"\n                stroke=\"#A21919\"\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n              />\n              <path\n                d=\"M4.43146 4.71167L12.9167 13.1969\"\n                stroke=\"#A21919\"\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n              />\n            </g>\n          </svg>\n        );\n      } else {\n        // 分数相同 -> 横线 icon\n        return (\n          <svg\n            width=\"16\"\n            height=\"17\"\n            viewBox=\"0 0 16 17\"\n            fill=\"none\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            style={{ margin: '0 6px' }}\n          >\n            <g id=\"Frame\">\n              <path\n                id=\"Vector\"\n                d=\"M2.97964 8.17383L13.0204 8.17383\"\n                stroke=\"#A2A2A2\"\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n              />\n            </g>\n          </svg>\n        );\n      }\n    };\n\n    const renderMetricCard = (label, color, beforeVal, afterVal) => {\n      const showScore = hasBefore ? (\n        <div style={{ display: 'flex', alignItems: 'center', fontSize: '1rem', color: '#374151' }}>\n          <span>{beforeVal}</span>\n          {getArrowDiv(beforeVal, afterVal)}\n          <span>{afterVal}</span>\n        </div>\n      ) : (\n        <div style={{ fontSize: '1rem', color: '#374151' }}>Score: {afterVal}</div>\n      );\n\n      return (\n        <div\n          key={label}\n          style={{\n            backgroundColor: '#F9FAFB',\n            border: '1px solid #E5E7EB',\n            borderRadius: '8px',\n            padding: '16px',\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            gap: '6px',\n          }}\n        >\n          <div style={{ fontSize: '1rem', fontWeight: '600', color }}>{label}</div>\n          {showScore}\n\n          {/* Score reason */}\n          <div\n            style={{\n              fontSize: '0.875rem',\n              color: '#6b7280',\n              textAlign: 'center',\n              marginTop: '4px',\n              lineHeight: '1.3',\n            }}\n          >\n            {reason}\n          </div>\n        </div>\n      );\n    };\n\n    return (\n      <div\n        style={{\n          display: 'grid',\n          gridTemplateColumns: '1fr 1fr 1fr',\n          gap: '16px',\n          marginTop: '16px',\n        }}\n      >\n        {renderMetricCard('Novelty', '#DC2626', noveltyBefore, noveltyAfter)}\n        {renderMetricCard('Feasibility', '#D97706', feasibilityBefore, feasibilityAfter)}\n        {renderMetricCard('Impact', '#2563EB', impactBefore, impactAfter)}\n      </div>\n    );\n  };\n\n  return (\n    <div style={{ fontFamily: 'Arial, sans-serif' }}>\n      {/* 顶部改用 Tab 而不是 Switch 按钮 */}\n      <TopNav />\n\n      {/* Analysis Intent 输入：仅在 showTree && !isAnalysisSubmitted 时显示 */}\n      {showTree && !isAnalysisSubmitted && (\n        <div\n          style={{\n            backgroundColor: '#1f2937',\n            display: 'flex',\n            alignItems: 'center',\n            padding: '10px 20px',\n          }}\n        >\n          <form onSubmit={handleAnalysisIntentSubmit} style={{ display: 'flex', alignItems: 'center' }}>\n            <input\n              type=\"text\"\n              value={analysisIntent}\n              onChange={(e) => setAnalysisIntent(e.target.value)}\n              placeholder=\"Enter analysis intent\"\n              style={{\n                padding: '6px 10px',\n                borderRadius: '4px',\n                border: '1px solid #d1d5db',\n                marginRight: '8px',\n              }}\n            />\n            <button\n              type=\"submit\"\n              disabled={isGenerating || isEvaluating}\n              style={{\n                padding: '6px 12px',\n                backgroundColor: '#4C84FF',\n                color: 'white',\n                border: 'none',\n                borderRadius: '4px',\n                cursor: isGenerating || isEvaluating ? 'not-allowed' : 'pointer',\n                opacity: isGenerating || isEvaluating ? 0.7 : 1,\n              }}\n            >\n              {isEvaluating ? 'Evaluating...' : isGenerating ? 'Generating...' : 'Submit'}\n            </button>\n            {error && (\n              <div style={{ marginLeft: '16px', color: '#dc2626', fontSize: '0.875rem' }}>{error}</div>\n            )}\n          </form>\n        </div>\n      )}\n\n      {/* Main Content */}\n      <div\n        style={{\n          display: 'flex',\n          padding: '20px',\n          maxWidth: '1600px',\n          margin: '0 auto',\n          boxSizing: 'border-box',\n        }}\n      >\n        {/* 左侧 - Exploration / Evaluation 图表 - 60% */}\n        <div style={{ flexBasis: '60%', marginRight: '20px' }}>\n          <svg ref={svgRef} />\n        </div>\n\n        {/* 右侧 - Dashboard - 40% */}\n        <div style={{ flexBasis: '40%' }}>\n          {(isGenerating || isEvaluating) && (\n            <div style={{ textAlign: 'center', marginBottom: '10px', color: '#4C84FF' }}>\n              {isGenerating ? 'Generating...' : 'Evaluating...'}\n            </div>\n          )}\n          <Dashboard node={nodes.find((n) => n.id === (hoveredNode?.id || selectedNode?.id))} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TreePlotVisualization;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}